<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>GAMES105</title>
        <meta name="robots" content="noindex" />
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="The note of GAMES105">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="theme/pagetoc.css">
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><div>GAMES105</div></li><li class="chapter-item expanded "><a href="index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="Introduction.html"><strong aria-hidden="true">2.</strong> Introduction to 3D Character Animation</a></li><li class="chapter-item expanded "><a href="Math.html"><strong aria-hidden="true">3.</strong> Math Background</a></li><li class="chapter-item expanded "><a href="Forward.html"><strong aria-hidden="true">4.</strong> Character Kinematics:Forward and Inverse Kinematics</a></li><li class="chapter-item expanded "><a href="Keyframe.html"><strong aria-hidden="true">5.</strong> Character Kinematics (cont.) &amp; Keyframe Animation</a></li><li class="chapter-item expanded "><a href="Data-driven.html"><strong aria-hidden="true">6.</strong> Data-driven Character Animation</a></li><li class="chapter-item expanded "><a href="Learning-based.html"><strong aria-hidden="true">7.</strong> Statistical Models of Human Motion</a></li><li class="chapter-item expanded "><a href="cont.html"><strong aria-hidden="true">8.</strong> Learning-based Character Animation</a></li><li class="chapter-item expanded "><a href="Skinning.html"><strong aria-hidden="true">9.</strong> Skinning</a></li><li class="chapter-item expanded "><a href="Simulation.html"><strong aria-hidden="true">10.</strong> Physics-based Simulation and Articulated Rigid Bodies</a></li><li class="chapter-item expanded "><a href="Actuating.html"><strong aria-hidden="true">11.</strong> Actuating Simulated Characters</a></li><li class="chapter-item expanded "><a href="Controlling.html"><strong aria-hidden="true">12.</strong> Controlling Characters</a></li><li class="chapter-item expanded "><a href="Learning.html"><strong aria-hidden="true">13.</strong> Learning to Walk</a></li><li class="chapter-item expanded "><a href="Optimal.html"><strong aria-hidden="true">14.</strong> Optimal Control and Reinforcement Learning</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">GAMES105</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/CaterpillarStudyGroup/GAMES105_mdbook" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main><div class="sidetoc"><nav class="pagetoc"></nav></div>
                        <div style="break-before: page; page-break-before: always;"></div><h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p>P4</p>
<h2 id="welcome--course-information"><a class="header" href="#welcome--course-information">Welcome &amp; Course Information</a></h2>
<ul>
<li>Instructor: \( \quad \quad \quad \)Libin Liu (<a href="http://libliu.info">http://libliu.info</a>)</li>
<li>Website: \( \quad \quad \quad \) <a href="https://games-105.github.io/">https://games-105.github.io/</a></li>
<li>Lecture: \( \quad \quad\quad  \) Monday 8:00PM to 9:00PM (12 Weeks)</li>
<li>Prerequisites: \( \quad  \) linear algebra, calculus,<br />
\( \quad \quad \quad \quad\quad \quad\) programming skills (python),<br />
\( \quad \quad \quad \quad\quad \quad\) probability theory, mechanics, ML, RLâ€¦</li>
<li>Exercise:
<ul>
<li>Codebase: \( \quad  \)<a href="https://github.com/GAMES-105/GAMES-105">https://github.com/GAMES-105/GAMES-105</a></li>
<li><strong>Submission</strong>: \( \quad  \)<a href="http://cn.ces-alpha.org/course/register/GAMES-105-Animation-2022/">http://cn.ces-alpha.org/course/register/GAMES-105-Animation-2022/</a></li>
<li><strong>Register code</strong>: \( \quad  \)<strong>GAMES-FCA-2022</strong></li>
</ul>
</li>
<li>BBS: \( \quad \quad \quad \quad \quad\)<a href="https://github.com/GAMES-105/GAMES-105/discussions">https://github.com/GAMES-105/GAMES-105/discussions</a></li>
<li>QQ Group: \( \quad \quad  \quad\)533469817</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><p>P7</p>
<h1 id="3d-computer-graphics"><a class="header" href="#3d-computer-graphics">3D Computer Graphics</a></h1>
<p><img src="./assets/01-02.png" alt="" /></p>
<p>P10</p>
<h2 id="3d-computer-animation"><a class="header" href="#3d-computer-animation">3D Computer Animation</a></h2>
<p><img src="./assets/01-03.png" alt="" /></p>
<blockquote>
<p>âœ… ä»¿çœŸï¼Œç”¨äºæè¿°å®¢è§‚äº‹ç‰©ï¼Œå®ƒä»¬çš„è¿åŠ¨è§„å¾‹å¯ä»¥ç”¨ç²¾ç¡®çš„æ•°æ¥æè¿°ã€‚GAMES103<br />
âœ… åŠ¨ç”»ï¼Œç”¨äºæè¿°æœ‰ä¸»è§‚æ„å¿—çš„äº‹ç‰©ï¼Œä½¿ç”¨ç»Ÿè®¡çš„æ–¹å¼æ¥å¯¹å®ƒä»¬çš„è¡Œä¸ºå»ºæ¨¡(ä¾‹å¦‚AIå»ºæ¨¡)ã€‚ GAMES105</p>
</blockquote>
<p>P11</p>
<h2 id="why-do-we-study-character-animation"><a class="header" href="#why-do-we-study-character-animation">Why Do We Study Character Animation</a></h2>
<ul>
<li>A character typically has 20+ joints, or 50-100+ parameters
<ul>
<li>It is not super high-dimensional, so most animation can be created manually, by posing the character at keyframes</li>
<li><strong>Labor-intensive, not for interactive applications</strong></li>
</ul>
</li>
</ul>
<p><img src="./assets/01-4.png" alt="" /></p>
<ul>
<li>Character animation techniques
<ul>
<li><strong>Understanding the mechanism behind motions and behaviors</strong></li>
<li>Smart editing of animation/ Reuse animation / Generate new animation</li>
<li><strong>â€œCompute-intensiveâ€</strong></li>
</ul>
</li>
</ul>
<p><img src="./assets/01-05.png" alt="" /></p>
<blockquote>
<p>âœ… è®¡ç®—æœºè§’è‰²åŠ¨ç”»æŠŠåŸæœ¬åŠ³åŠ¨å¯†é›†å‹çš„åŠ¨ç”»å¸ˆå·¥ä½œå˜æˆè®¡ç®—å¯†é›†å‹çš„å·¥ä½œã€‚</p>
</blockquote>
<p>P13</p>
<h1 id="character-animation-pipeline"><a class="header" href="#character-animation-pipeline">Character Animation Pipeline</a></h1>
<p><img src="./assets/01-06.png" alt="" /></p>
<p>P15</p>
<h2 id="where-does-a-motion-come-from"><a class="header" href="#where-does-a-motion-come-from">Where does a Motion Come From</a></h2>
<p>æ ¹æ®æ˜¯å¦ä½¿ç”¨ç‰©ç†ï¼ŒæŠŠè§’è‰²åŠ¨ç”»åˆ†ä¸ºä¸¤å¤§ç±»ã€‚</p>
<p><img src="./assets/01-10.png" alt="" /></p>
<p>P16</p>
<h3 id="keyframe-basedkinematic-approaches"><a class="header" href="#keyframe-basedkinematic-approaches">Keyframe-based/Kinematic Approaches</a></h3>
<p><img src="./assets/01-08.png" alt="" /> </p>
<blockquote>
<p>âœ… åŸºäºè¿åŠ¨å­¦ç›´æ¥æ›´æ–°è§’è‰²çŠ¶æ€ï¼Œè¿åŠ¨å¯ä»¥ä¸ç¬¦åˆç‰©ç†è§„å¾‹ã€‚</p>
</blockquote>
<p>P18</p>
<h3 id="physics-baseddynamic-approaches"><a class="header" href="#physics-baseddynamic-approaches">Physics-based/Dynamic Approaches</a></h3>
<p><img src="./assets/01-09.png" alt="" /></p>
<blockquote>
<p>âœ… åŸºäºç‰©ç†ï¼Œä½†å®é™…æƒ…å†µä¼šæœ‰ç®€åŒ–ï¼Œä¸èƒ½ç›´æ¥å¹²é¢„è§’è‰²å§¿æ€ã€‚ </p>
</blockquote>
<p>P19</p>
<h2 id="control-level"><a class="header" href="#control-level">Control Level</a></h2>
<p>æ ¹æ®æ§åˆ¶æ–¹å¼çš„é«˜åº¦ï¼Œå¯ä»¥åˆ†ä¸ºLow Levelå’ŒHeigh Level</p>
<p>P20</p>
<h3 id="low-level-control"><a class="header" href="#low-level-control">low-level control</a></h3>
<p><img src="./assets/01-11.png" alt="" /></p>
<blockquote>
<p>âœ… å¯¹æ¯ä¸€å¸§æ¯ä¸€ä¸ªå§¿æ€è¿›è¡Œç²¾ç¡®æ§åˆ¶æ¯ä¸ªç»†èŠ‚ã€‚<br />
âœ… ä¼˜ç‚¹ï¼šç²¾ç¡®æ§åˆ¶ï¼›ç¼ºç‚¹ï¼šä½æ•ˆã€‚</p>
</blockquote>
<p>P21</p>
<h3 id="high-level-control"><a class="header" href="#high-level-control">high-level control</a></h3>
<p><img src="./assets/01-12.png" alt="" /></p>
<blockquote>
<p>âœ… æ§åˆ¶é«˜çº§ç›®æ ‡ã€‚</p>
</blockquote>
<h1 id="keyframe-basedkinematic-approaches-1"><a class="header" href="#keyframe-basedkinematic-approaches-1">Keyframe-based/Kinematic Approaches</a></h1>
<p>P24</p>
<h2 id="disneys-12-principles-of-animation"><a class="header" href="#disneys-12-principles-of-animation">Disneyâ€™s 12 Principles of Animation</a></h2>
<p><img src="./assets/01-13.png" alt="" /></p>
<p>[<a href="http://the12principles.tumblr.com/">http://the12principles.tumblr.com/</a>]</p>
<blockquote>
<p>âœ… åœ¨åŠ¨ç”»å¸ˆæ€»ç»“çš„å‡†åˆ™é‡Œéšè—äº†ç‰©ç†è§„åˆ™å’Œè‰ºæœ¯å¤¸å¼ </p>
</blockquote>
<h2 id="keyframe-animation"><a class="header" href="#keyframe-animation">Keyframe Animation</a></h2>
<blockquote>
<p>âœ… è¿™æ˜¯ä¸€ç§éå¸¸low levelçš„æ§åˆ¶æ–¹æ³•ï¼Œå¯ä»¥ä¿è¯æ‰€æœ‰ç»†èŠ‚ï¼Œä½†éå¸¸æ…¢</p>
</blockquote>
<p>P26</p>
<h3 id="forward-kinematics"><a class="header" href="#forward-kinematics">Forward Kinematics</a></h3>
<p><img src="./assets/01-14.png" alt="" /></p>
<p><strong>Given</strong> rotations of every joints<br />
<strong>Compute</strong> position of end-effectors</p>
<p>P27</p>
<h3 id="inverse-kinematics"><a class="header" href="#inverse-kinematics">Inverse Kinematics</a></h3>
<p><img src="./assets/01-15.png" alt="" /></p>
<p><strong>Given</strong> position of end-effectors<br />
<strong>Compute</strong> rotations of every joints</p>
<p>P28</p>
<h3 id="interpolation"><a class="header" href="#interpolation">Interpolation</a></h3>
<p><img src="./assets/01-16.png" alt="" /></p>
<h2 id="motion-capture"><a class="header" href="#motion-capture">Motion Capture</a></h2>
<p>åŠ¨æ•è®¾å¤‡ã€è§†é¢‘åŠ¨æ•ï¼ŒæŠŠåŠ¨æ•è§’è‰²åº”ç”¨åˆ°è§’è‰²èº«ä¸Šï¼Œéœ€è¦ç»è¿‡é‡å®šå‘<br />
åŠ¨ä½œæ•æ‰å’Œé‡æ”¾ï¼Œä¸èƒ½äº§ç”Ÿæ–°çš„æ•°æ®</p>
<blockquote>
<p>âœ… å…‰å­¦åŠ¨æ•ã€è§†é¢‘åŠ¨æ•ã€ç©¿æˆ´ä¼ æ„Ÿå™¨åŠ¨æ•ã€‚</p>
</blockquote>
<p>P34</p>
<h3 id="motion-retargeting"><a class="header" href="#motion-retargeting">Motion Retargeting</a></h3>
<p><img src="./assets/01-17.png" alt="" /></p>
<p><strong>Given</strong> motions of a source character<br />
<strong>Compute</strong> motions for target characters with</p>
<ul>
<li>different skeleton sizes</li>
<li>different number of bones</li>
<li>different topologies</li>
<li>â€¦â€¦</li>
</ul>
<p>P36</p>
<h2 id="motion-graphs--state-machines"><a class="header" href="#motion-graphs--state-machines">Motion Graphs / State Machines</a></h2>
<p><img src="./assets/01-18.png" alt="" /></p>
<blockquote>
<p>âœ… æŠŠæ•å‡ºæ¥çš„åŠ¨ä½œè¿›è¡Œåˆ†è§£å’Œé‡ç»„ï¼Œç”Ÿæˆæ–°çš„åŠ¨ä½œã€‚</p>
</blockquote>
<p>P37</p>
<h3 id="motion-graphs"><a class="header" href="#motion-graphs">Motion Graphs</a></h3>
<p><img src="./assets/01-19.png" alt="" /></p>
<blockquote>
<p>âœ… ç»™ä¸€æ®µä»»æ„çš„åŠ¨ä½œï¼Œå¯»æ‰¾èƒ½å¤Ÿæ„å»ºçŠ¶æ€æœºåˆ‡æ¢çš„ä½ã€‚ </p>
</blockquote>
<p>P38</p>
<h3 id="motion-graphsçš„æ”¹è¿›---interactively-controlled-boxing"><a class="header" href="#motion-graphsçš„æ”¹è¿›---interactively-controlled-boxing">Motion Graphsçš„æ”¹è¿› - Interactively Controlled Boxing</a></h3>
<p><img src="./assets/01-20.png" alt="" /></p>
<p>[Heck and Gleicher 2007, Parametric Motion Graphs]</p>
<blockquote>
<p>âœ… å¯¹Motion Graphçš„æ”¹è¿›ï¼Œæ¯”å¦‚ä¸€ä¸ªèŠ‚ç‚¹ä¸­æœ‰å¾ˆå¤šåŠ¨ä½œï¼Œå¯¹è¿™äº›åŠ¨ä½œè¿›è¡Œæ’å€¼ï¼Œæ¥å®ç°ç²¾ç¡®æ§åˆ¶ã€‚</p>
</blockquote>
<p>P39</p>
<h3 id="motion-graphsçš„é«˜çº§åº”ç”¨"><a class="header" href="#motion-graphsçš„é«˜çº§åº”ç”¨">Motion Graphsçš„é«˜çº§åº”ç”¨</a></h3>
<p><strong>Character Animation in Two-Player Adversarial Games</strong><br />
KEVIN WAMPLER,ERIK ANDERSEN, EVAN HERBST, YONGJOON LEE, and ZORAN POPOVIC Univoersity of Washington</p>
<p><strong>Near-optimal Character Animation with Continuous Control</strong><br />
Adrien Treuille  \(\quad\)   Yongjoon Lee   \(\quad\)  Zoran Popovic<br />
University of Washington</p>
<blockquote>
<p>âœ… Motion Graphï¼‹AIï¼Œå®ç°é«˜çº§æ§åˆ¶<br />
âœ… ä¾‹å¦‚ï¼šAIä½¿ç”¨Motion Graphï¼Œé€šè¿‡é€‰æ‹©åˆé€‚çš„è¾¹ï¼Œè¿›è¡Œæ‰§è¡Œï¼Œå®Œæˆé«˜çº§è¯­ä¹‰ã€‚</p>
</blockquote>
<p>P42</p>
<h3 id="complex-motion-graphs"><a class="header" href="#complex-motion-graphs">Complex Motion Graphs</a></h3>
<p><img src="./assets/01-21.png" alt="" /></p>
<blockquote>
<p>âœ… åŠ¨ä½œå›¾éå¸¸å¤æ‚ï¼Œå®¹æ˜“å‡ºBUGï¼</p>
</blockquote>
<p>P43</p>
<h2 id="motion-mathing"><a class="header" href="#motion-mathing">Motion Mathing</a></h2>
<blockquote>
<p>âœ… æ”¹è¿›ï¼ŒMotion Graphçš„åŠ¨ä½œéƒ½æ˜¯å®Œæ•´çš„ç‰‡æ–­ï¼Œå¯ä»¥æŠŠåŠ¨ä½œå†åˆ†ç»†ä¸€ç‚¹ï¼Œåˆ‡åˆ°æ¯ä¸€å¸§ã€‚<br />
âœ… ä¸æ˜¯å®Œæ•´åœ°æ’­æ”¾ä¸€æ®µåŠ¨ä½œï¼Œè€Œæ˜¯æ¯ä¸€å¸§ç»“æŸåï¼Œé€šè¿‡æœ€è¿‘é‚»æœç´¢æ‰¾åˆ°ä¸€ä¸ªæ–°çš„å§¿æ€ï¼Œ<br />
âœ… æ»¡è¶³ï¼šï¼ˆ1ï¼‰æ¥è¿‘æ§åˆ¶ç›®æ ‡ï¼ˆ2ï¼‰åŠ¨ä½œè¿ç»­<br />
âœ… å…³é”®ï¼šï¼ˆ1ï¼‰å®šä¹‰è·ç¦»å‡½æ•°ï¼ˆ2ï¼‰è®¾è®¡åŠ¨ä½œåº“</p>
</blockquote>
<p>P45</p>
<h2 id="learning-based-approaches"><a class="header" href="#learning-based-approaches">Learning-based Approaches</a></h2>
<p><img src="./assets/01-22.png" alt="" /> </p>
<blockquote>
<p>âœ… å¯¹è§’è‰²åŠ¨ä½œçš„å†…åœ¨è§„å¾‹å»ç†è§£å’Œå»ºæ¨¡ï¼Œä»æ•°æ®å­¦ä¹ ç»Ÿè®¡è§„å¾‹ã€‚<br />
âœ… ç”Ÿæˆæ¨¡å‹ï¼šåªéœ€è¦é‡‡è¶³å¤Ÿçš„åŠ¨ä½œå»ç»™æ¨¡å‹å°±èƒ½ç”Ÿæˆæ–°çš„åŠ¨ä½œã€‚<br />
âœ… ä¸éœ€è¦æ‰‹å·¥ä½œåˆ‡åˆ†ã€ç”ŸæˆçŠ¶æ€æœº</p>
</blockquote>
<table><thead><tr><th>ID</th><th>Year</th><th>Name</th><th>Note</th><th>Tags</th><th>Link</th></tr></thead><tbody>
<tr><td></td><td>2020</td><td>Local Motion Phases for Learning Multi-Contact Character Movements</td><td></td><td></td><td></td></tr>
<tr><td></td><td>2021</td><td>Character Controllers Using Motion VAEs</td><td></td><td></td><td></td></tr>
</tbody></table>
<p>P49</p>
<h2 id="cross-modal-motion-synthesis"><a class="header" href="#cross-modal-motion-synthesis">Cross-Modal Motion Synthesis</a></h2>
<ul>
<li>Audio-driven animation
<ul>
<li>Music to dance</li>
<li>Co-speech gesture</li>
<li>â€¦â€¦</li>
</ul>
</li>
<li>Natural language to animation
<ul>
<li>Descriptions to actions</li>
<li>Scripts to performance</li>
<li>â€¦â€¦</li>
</ul>
</li>
</ul>
<table><thead><tr><th>ID</th><th>Year</th><th>Name</th><th>Note</th><th>Tags</th><th>Link</th></tr></thead><tbody>
<tr><td></td><td>2022</td><td>Rhythmic Gesticulator</td><td>âœ… è¯­è¨€å’ŒåŠ¨ä½œéƒ½æœ‰å†…å­˜çš„ç»Ÿè®¡è§„å¾‹ï¼ŒæŠŠä¸¤ç§ç»Ÿè®¡æ¨¡å‹ä¹‹é—´å»ºå…³ç³»ï¼Œå®ç°è·¨æ¨¡æ€ç”Ÿæˆã€‚</td><td><img src="./assets/01-23.png" alt="" /></td><td></td></tr>
</tbody></table>
<p><img src="./assets/01-23.png" alt="" /></p>
<h2 id="æ€»ç»“"><a class="header" href="#æ€»ç»“">æ€»ç»“</a></h2>
<p><img src="./assets/01-24.png" alt="" /></p>
<h1 id="physics-baseddynamic-approaches-1"><a class="header" href="#physics-baseddynamic-approaches-1">Physics-based/Dynamic Approaches</a></h1>
<blockquote>
<p>âœ… ä¸ç›´æ¥ç”Ÿæˆå§¿æ€ï¼Œè€Œæ˜¯æ§åˆ¶é‡ï¼ˆä¾‹å¦‚åŠ›ï¼‰ï¼Œé€šè¿‡ç‰©ç†ä»¿çœŸçœŸæ­£æ”¹å˜è§’è‰²ã€‚</p>
</blockquote>
<p><img src="./assets/01-26.png" alt="" /><br />
<img src="./assets/01-27.png" alt="" /></p>
<p>P59</p>
<h2 id="ragdoll-simulation"><a class="header" href="#ragdoll-simulation">Ragdoll Simulation</a></h2>
<p><img src="./assets/01-28.png" alt="" /></p>
<blockquote>
<p>âœ… ç”¨äºäººæ­»æ‰ã€å¤±å»æ„è¯†ã€çªå‘äº‹ä»¶æ¥ä¸åŠå“åº”çš„æƒ…å†µã€‚</p>
</blockquote>
<p>P63</p>
<h2 id="ç‰©ç†ä»¿çœŸè§’è‰²åŠ¨ç”»çš„åº”ç”¨"><a class="header" href="#ç‰©ç†ä»¿çœŸè§’è‰²åŠ¨ç”»çš„åº”ç”¨">ç‰©ç†ä»¿çœŸè§’è‰²åŠ¨ç”»çš„åº”ç”¨</a></h2>
<p><img src="./assets/01-30.png" alt="" /></p>
<p>[DeepMotion: Virtual Reality Tracking]</p>
<p>[Ye et al. 2022: Neural3Points]</p>
<p>[Yang et al. 2022: Learning to Use Chopsticks]</p>
<blockquote>
<p>âœ… æŠ“ä½æ‰‹æŒ‡åŠ¨ä½œç»†èŠ‚
P67</p>
</blockquote>
<p>P68</p>
<h2 id="ç‰©ç†è§’è‰²çš„å»ºæ¨¡æ–¹æ³•"><a class="header" href="#ç‰©ç†è§’è‰²çš„å»ºæ¨¡æ–¹æ³•">ç‰©ç†è§’è‰²çš„å»ºæ¨¡æ–¹æ³•</a></h2>
<p><img src="./assets/01-32.png" alt="" /></p>
<blockquote>
<p>âœ… æ„å»ºå®Œæ•´çš„ç¥ç»ç³»ç»Ÿå’Œè‚Œè‚‰ç³»ç»Ÿã€‚<br />
âœ… ï¼ˆ1ï¼‰ç¥ç»è‚Œè‚‰æœºç†ä¸æ¸…æ¥šã€‚<br />
âœ… ï¼ˆ2ï¼‰è‡ªç”±åº¦é«˜ï¼Œä»¿çœŸæ•ˆç‡ä½ã€‚<br />
âœ… æ‰€ä»¥å®é™…ä¸Šä¼šåšç®€åŒ–ï¼Œå¯¹å…³èŠ‚åŠ›çŸ©è¿›è¡Œå»ºæ¨¡</p>
</blockquote>
<p><img src="./assets/01-33.png" alt="" /></p>
<blockquote>
<p>âœ… ç”¨å…³èŠ‚åŠ›çŸ©ä»¿çœŸè‚Œè‚‰çš„åŠ›ã€‚</p>
</blockquote>
<p>P70</p>
<h3 id="force--torque"><a class="header" href="#force--torque">Force &amp; Torque</a></h3>
<p><img src="./assets/01-34.png" alt="" /></p>
<p>P71</p>
<h2 id="keyfrmae-control"><a class="header" href="#keyfrmae-control">Keyfrmae Control</a></h2>
<h3 id="proportional-derivative-pd-control"><a class="header" href="#proportional-derivative-pd-control">Proportional-Derivative (PD) Control</a></h3>
<p><img src="./assets/01-35.png" alt="" /></p>
<blockquote>
<p>âœ… æ ¹æ®å½“å‰çŠ¶æ€ä¸ç›®æ ‡çŠ¶æ€çš„å·®è·ï¼Œè®¡ç®—å‡ºå½“å‰çŠ¶æ€è¿åŠ¨åˆ°ç›®æ ‡çŠ¶æ€æ‰€éœ€è¦çš„åŠ›çŸ©ã€‚</p>
</blockquote>
<p>P72</p>
<h3 id="tracking-controllers"><a class="header" href="#tracking-controllers">Tracking Controllers</a></h3>
<p><img src="./assets/01-36.png" alt="" /></p>
<blockquote>
<p>âœ… æ¯”å¦‚è¦åšä¸€ä¸ªåŠ¨ä½œï¼Œç»™å‡ºç›®æ ‡é«˜åº¦çš„è½¨è¿¹ï¼Œé‡‡ç”¨PDæ§åˆ¶ç”Ÿæˆæ¯ä¸ªå…³èŠ‚çš„åŠ›çŸ©ï¼Œå¤§æ¦‚èƒ½äº§ç”Ÿè¦åšçš„åŠ¨ä½œ </p>
</blockquote>
<blockquote>
<p>[Hodgins and Wooten 1995, Animating Human Athletics]</p>
</blockquote>
<p>P76</p>
<h3 id="trajectory-crafting"><a class="header" href="#trajectory-crafting">Trajectory Crafting</a></h3>
<p>NaturalMotion - Endorphin</p>
<blockquote>
<p>âœ… å…³é”®å¸§â†’åŠ›â†’ä»¿çœŸ</p>
</blockquote>
<p>å®é™…ä¸Šè¿™ä¸ªæ–¹æ³•å¾ˆéš¾ç”¨èµ·æ¥ï¼Œå› ä¸ºè°ƒæ•´ä»¿çœŸå‚æ•°ç”šè‡³æ¯”ç›´æ¥åšå…³é”®å¸§æ›´èŠ±æ—¶é—´ã€‚</p>
<p>P79</p>
<h2 id="spacetimetrajectory-optimization"><a class="header" href="#spacetimetrajectory-optimization">Spacetime/Trajectory Optimization</a></h2>
<blockquote>
<p>âœ… ç”¨ä¼˜åŒ–æ–¹æ³•å®ç°ï¼Œç»“åˆé‡å®šå‘</p>
</blockquote>
<p>[Liu et al 2010. SAMCON]</p>
<p>[Wampler and PopoviÄ‡. 2009. Optimal gait and form for animal locomotion]</p>
<p>[Hamalainen et al. 2020, Visualizing Movement Control Optimization Landscapes]</p>
<blockquote>
<p>âœ… è¿™æ˜¯é«˜ç»´éçº¿æ€§ä¼˜åŒ–é—®é¢˜ï¼Œéå¸¸å‡†è§£ã€‚</p>
</blockquote>
<p>P83</p>
<h2 id="abstract-models-ç®€åŒ–æ¨¡å‹"><a class="header" href="#abstract-models-ç®€åŒ–æ¨¡å‹">Abstract Models ç®€åŒ–æ¨¡å‹</a></h2>
<p>é€šè¿‡ç®€åŒ–æ¨¡å‹å®ç°å¯¹ä¸€äº›åŠ¨ä½œçš„æ§åˆ¶ï¼Œä½†åªèƒ½åšç®€å•åŠ¨ä½œ</p>
<h3 id="simbicon"><a class="header" href="#simbicon">SIMBICON</a></h3>
<p><img src="./assets/01-38.png" alt="" /></p>
<blockquote>
<p>âœ… ç”¨ç®€åŒ–æ¨¡å‹æŠŠæƒ³è¦çš„åŠ¨ä½œæè¿°å‡ºæ¥ï¼Œæ¥æŒ‡å¯¼è§’è‰²æ§åˆ¶ã€‚<br />
âœ… åŸºäºæ­¤å®ç°ç¨³å®šçš„å¤šæŠ€èƒ½çš„æ§åˆ¶ç­–ç•¥ã€‚<br />
âœ… æ§åˆ¶ç®€åŒ–ã€ç¼ºå°‘ç»†èŠ‚ï¼Œèµ°è·¯åƒæœºå™¨äººã€‚<br />
âœ… ç®€åŒ–æ¨¡å‹æ€è·¯ï¼Œå¯ä»¥å®ç°å¯¹ä¸€äº›åŠ¨ä½œè¿›è¡Œæ§åˆ¶ï¼Œä¸”ç»“æœé²æ£’ï¼Œå…è®¸ä½¿ç”¨å¤–åŠ›ä¸è§’è‰²äº¤äº’ã€‚<br />
âœ… ç¼ºç‚¹ï¼šåªèƒ½èµ°è·¯ï¼Œä¸èƒ½å¤æ‚åŠ¨ä½œã€‚ </p>
</blockquote>
<p>P85</p>
<h3 id="inverted-pendulum-model"><a class="header" href="#inverted-pendulum-model">Inverted Pendulum Model</a></h3>
<p><img src="./assets/01-039.png" alt="" /></p>
<p>[Coros et al. 2010]</p>
<p>P87</p>
<h2 id="reinforcement-learning"><a class="header" href="#reinforcement-learning">Reinforcement Learning</a></h2>
<p><img src="./assets/01-40.png" alt="" /></p>
<p>P89</p>
<h3 id="drl-based-tracking-controllers"><a class="header" href="#drl-based-tracking-controllers">DRL-based Tracking Controllers</a></h3>
<p>[Liu et al. 2016. ControlGraphs]</p>
<p>[Liu et al. 2018]</p>
<p>[Peng et al. 2018. DeepMimic]</p>
<blockquote>
<p>âœ… åˆ©ç”¨DRLåšå¤æ‚åŠ¨ä½œï¼Œä½†è¿˜åªæ˜¯åŠ¨ä½œå¤ç°ã€‚</p>
</blockquote>
<p>P90</p>
<h3 id="multi-skill-characters"><a class="header" href="#multi-skill-characters">Multi-skill Characters</a></h3>
<h4 id="å¼•å…¥çŠ¶æ€æœºå®Œæˆæ›´å¤æ‚åŠ¨ä½œ"><a class="header" href="#å¼•å…¥çŠ¶æ€æœºå®Œæˆæ›´å¤æ‚åŠ¨ä½œ">å¼•å…¥çŠ¶æ€æœºï¼Œå®Œæˆæ›´å¤æ‚åŠ¨ä½œã€‚</a></h4>
<p>State Machines of Tracking Controllers</p>
<h4 id="å¼•å…¥motion-maching"><a class="header" href="#å¼•å…¥motion-maching">å¼•å…¥Motion Maching</a></h4>
<p><img src="./assets/01-41.png" alt="" /></p>
<p>[Liu et al. 2017: Learning to Schedule Control Fragments]</p>
<h2 id="hierarchical-controllers"><a class="header" href="#hierarchical-controllers">Hierarchical Controllers</a></h2>
<p>åœ¨é«˜çº§æŒ‡ä»¤æ§åˆ¶ä¸‹ï¼Œç»¼åˆä½¿ç”¨åŠ¨ä½œæ¥å®ŒæˆåŠŸèƒ½</p>
<p>Generative Control Policies</p>
<table><thead><tr><th>è¿åŠ¨ç”Ÿæˆæ¨¡å‹</th><th>æ§åˆ¶ç”Ÿæˆæ¨¡å‹</th></tr></thead><tbody>
<tr><td><img src="./assets/01-42.png" alt="" /></td><td><img src="./assets/01-43.png" alt="" /></td></tr>
</tbody></table>
<h2 id="æ€»ç»“-1"><a class="header" href="#æ€»ç»“-1">æ€»ç»“</a></h2>
<p><img src="./assets/01-44.png" alt="" /></p>
<blockquote>
<p>âœ… å›é¡¾è®¡ç®—æœºè§’è‰²åŠ¨åŒ–é¢†åŸŸæœ€è¿‘30å¹´ä¸»è¦ç ”ç©¶æ–¹å‘ã€‚ </p>
</blockquote>
<p>P102</p>
<h1 id="about-this-course"><a class="header" href="#about-this-course">About This Course</a></h1>
<ul>
<li>
<p>What will not be covered</p>
<ul>
<li>How to use Maya/Motion Builder/Houdini/Unity/Unreal Engineâ€¦</li>
<li>How to become an animator</li>
</ul>
</li>
<li>
<p>What will be covered</p>
<ul>
<li>
<p>Methods, theories, and techniques behind animation tools</p>
<ul>
<li>Kinematics of characters</li>
<li>Physics-based simulation</li>
<li>Motion control</li>
</ul>
</li>
<li>
<p>Ability to create an interactive character</p>
</li>
</ul>
</li>
</ul>
<hr />
<blockquote>
<p>æœ¬æ–‡å‡ºè‡ªCaterpillarStudyGroupï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>
<p>https://caterpillarstudygroup.github.io/GAMES105_mdbook/</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><p>P2</p>
<h1 id="outline"><a class="header" href="#outline">Outline</a></h1>
<ul>
<li>
<p>Review of Linear Algebra</p>
<ul>
<li>Vector and Matrix</li>
<li>Translation, Rotation, and Transformation</li>
</ul>
</li>
<li>
<p>Representations of 3D rotation</p>
<ul>
<li>Rotation matrices</li>
<li>Euler angles</li>
<li>Rotation vectors/Axis angles</li>
<li>Quaternions</li>
</ul>
</li>
</ul>
<blockquote>
<p>âœ… è¿™èŠ‚è¯¾å¤§éƒ¨åˆ†å†…å®¹ä¼šè·³è¿‡ï¼Œå› ä¸ºå‰é¢è¯¾ç¨‹è®²è¿‡å¥½å¤šéäº†</p>
</blockquote>
<p>P3</p>
<h1 id="review-of-linear-algebra"><a class="header" href="#review-of-linear-algebra">Review of Linear Algebra</a></h1>
<h2 id="vectors-and-matrices"><a class="header" href="#vectors-and-matrices">Vectors and Matrices</a></h2>
<p><em>a few slides were modified from GAMES-101 and GAMES-103</em></p>
<p>P24</p>
<blockquote>
<p>âœ… ä¸¤ä¸ªå•ä½å‘é‡çš„å‰ä¹˜ä¸ä¸€å®šæ˜¯å•ä½å‘é‡ã€‚<br />
âœ… è¦å¾—åˆ°æ–¹å‘ï¼Œåº”å…ˆå‰ä¹˜å†å•ä½åŒ–<br />
âœ… \(n=\frac{a\times b}{||a\times b||}\)ï¼ˆæ­£ç¡®ï¼‰ã€\(n=\frac{a}{||a||} \times \frac{b}{||b||}\)ï¼ˆé”™è¯¯ï¼‰</p>
</blockquote>
<p>P26</p>
<h3 id="how-to-find-the-rotation-between-vectors"><a class="header" href="#how-to-find-the-rotation-between-vectors">How to find the rotation between vectors?</a></h3>
<h4 id="é—®é¢˜æè¿°"><a class="header" href="#é—®é¢˜æè¿°">é—®é¢˜æè¿°</a></h4>
<blockquote>
<p>âœ… å·²çŸ¥\(a,b\) , æ±‚æ—‹è½¬ã€‚</p>
</blockquote>
<p><img src="./assets/02-01.png" alt="" /></p>
<h4 id="æ±‚æ—‹è½¬è½´"><a class="header" href="#æ±‚æ—‹è½¬è½´">æ±‚æ—‹è½¬è½´</a></h4>
<p>P27</p>
<p>Any vector in the bisecting plane can be the axis</p>
<p>$$
ğ’– =\frac{ğ’‚ Ã— ğ’ƒ}{||ğ’‚ Ã— ğ’ƒ||} 
$$</p>
<h4 id="æ±‚æ—‹è½¬è§’"><a class="header" href="#æ±‚æ—‹è½¬è§’">æ±‚æ—‹è½¬è§’</a></h4>
<p>P28</p>
<p>The minimum rotation:<br />
$$
\theta = \mathrm{arg} \cos \frac{a\cdot b}{||a||||b||} 
$$</p>
<p><img src="./assets/02-02.png" alt="" /></p>
<blockquote>
<p>âœ… \(u\) ä¸ºæ—‹è½¬è½´ï¼Œ\( \theta \) ä¸ºæ—‹è½¬è§’ã€‚</p>
</blockquote>
<p>P33</p>
<h3 id="how-to-rotate-a-vectors"><a class="header" href="#how-to-rotate-a-vectors">How to rotate a vectors?</a></h3>
<h4 id="é—®é¢˜æè¿°-1"><a class="header" href="#é—®é¢˜æè¿°-1">é—®é¢˜æè¿°</a></h4>
<p>å·²çŸ¥ \(a\) å’Œæ—‹è½¬ \((ğ’–, \theta )\) æ±‚ç»ˆç‚¹ \(b\)</p>
<p><img src="./assets/02-3.png" alt="" /></p>
<h4 id="è§£é¢˜æ–¹æ³•"><a class="header" href="#è§£é¢˜æ–¹æ³•">è§£é¢˜æ–¹æ³•</a></h4>
<p>\(a\) ç§»åŠ¨åˆ° \(b\) çœ‹ä½œæ˜¯å…ˆç§»åŠ¨ \(ğ’—\) å†ç§»åŠ¨ \(t\)ï¼Œåˆ†åˆ«è®¡ç®— \(ğ’—\) å’Œ \(t\) çš„æ–¹å‘å’Œé•¿åº¦ã€‚</p>
<p>$$
ğ’— \gets  ğ’– \times  ğ’‚
$$</p>
<p>$$
ğ’• \gets ğ’– \times ğ’— = ğ’– \times( ğ’– \times ğ’‚)
$$</p>
<p><img src="./assets/02-04.png" alt="" /></p>
<h4 id="è®¡ç®—è¿‡ç¨‹"><a class="header" href="#è®¡ç®—è¿‡ç¨‹">è®¡ç®—è¿‡ç¨‹</a></h4>
<p>P35</p>
<p>$$
ğ’— = (\sin \theta) ğ’– \times  ğ’‚
ğ’• =(1-\cos \theta ) ğ’– \times( ğ’– \times ğ’‚)
$$</p>
<h4 id="rodrigues-rotation-formula"><a class="header" href="#rodrigues-rotation-formula">Rodrigues' rotation formula</a></h4>
<p>$$
ğ’ƒ = ğ’‚ + (\sin \theta) ğ’– Ã— ğ’‚ + (1-\cos \theta ) ğ’– \times( ğ’– \times ğ’‚)
$$</p>
<p>P53</p>
<h2 id="matrix"><a class="header" href="#matrix">Matrix</a></h2>
<h3 id="matrix-form-of-cross-product"><a class="header" href="#matrix-form-of-cross-product">Matrix Form of Cross Product</a></h3>
<p>$$
\begin{align*}
c=a\times b= &amp; \begin{bmatrix}
a_yb_z-a_zb_y \\
a_zb_x-a_xb_z \\
a_xb_y-a_yb_x
\end{bmatrix}\\
= &amp; \begin{bmatrix}
0 &amp; -a_z &amp; a_y \\
a_z &amp; 0 &amp; -a_x \\
-a_y &amp; a_x &amp; 0
\end{bmatrix}\begin{bmatrix}
b_x \\
b_y  \\
b_z
\end{bmatrix}=[a]_\times b
\end{align*}
$$</p>
<p>$$ 
[a]_\times +[a]^ \mathbf{T} _\times =0 \quad \quad \mathrm{skewsymmetric} 
$$ </p>
<p>P56</p>
<p>$$
\begin{align*}
a \times b = &amp;[a] _ \times b  \\
a \times (b \times c) = &amp; [a] _ \times ( [b] _ \times c ) \\
=  &amp; [a] _ \times [b] _ \times c  \\
a \times (a \times c) = &amp; [a] ^2 _ \times  b \\
(a \times b) \times c = &amp; [a\times b] _ \times  c \\
\end{align*}
$$</p>
<blockquote>
<p>âœ… æœ€åä¸€ä¸ªå…¬å¼æ³¨æ„ä¸€ä¸‹ï¼Œå‰ä¹˜ä¸æ»¡è¶³ç»“åˆå¾‹ã€‚</p>
</blockquote>
<p>P57</p>
<h3 id="how-to-rotate-a-vectors-1"><a class="header" href="#how-to-rotate-a-vectors-1">How to rotate a vectors?</a></h3>
<h4 id="é—®é¢˜æè¿°-2"><a class="header" href="#é—®é¢˜æè¿°-2">é—®é¢˜æè¿°</a></h4>
<p>å·²çŸ¥ \(a\) å’Œæ—‹è½¬ \((ğ’–, \theta )\) æ±‚ç»ˆç‚¹ \(b\)</p>
<h4 id="æŠŠå‰é¢çš„ç»“è®ºè½¬åŒ–ä¸ºçŸ©é˜µå½¢å¼"><a class="header" href="#æŠŠå‰é¢çš„ç»“è®ºè½¬åŒ–ä¸ºçŸ©é˜µå½¢å¼">æŠŠå‰é¢çš„ç»“è®ºè½¬åŒ–ä¸ºçŸ©é˜µå½¢å¼</a></h4>
<p>$$
\begin{align*}
b = &amp; a+(\sin \theta )u \times a +(1-\cos \theta)u \times(u \times a) \\
b = &amp; (I+(\sin \theta ))[u]_ \times + (1-(\cos \theta )[u]^2_ \times ) a \\
= &amp; Ra
\end{align*}
$$</p>
<blockquote>
<p>âœ… æŠŠå‰é¢çš„å‰ä¹˜å…¬å¼è½¬åŒ–ä¸ºç‚¹ä¹˜å½¢å¼</p>
</blockquote>
<h4 id="ç»“è®º"><a class="header" href="#ç»“è®º">ç»“è®º</a></h4>
<p>Rodrigues' rotation formula</p>
<p>$$
R = I+(\sin \theta )[u]_ \times + (1-\cos \theta )[u]^2_ \times
$$</p>
<blockquote>
<p>âœ… \(R\) æ˜¯æ—‹è½¬ \((u, \theta )\) å¯¹åº”çš„æ—‹è½¬çŸ©é˜µã€‚</p>
</blockquote>
<p>P62</p>
<h3 id="determinant-of-a-matrix"><a class="header" href="#determinant-of-a-matrix">Determinant of a Matrix</a></h3>
<h4 id="å®šä¹‰"><a class="header" href="#å®šä¹‰">å®šä¹‰</a></h4>
<p><img src="./assets/02-07-1.png" alt="" /></p>
<blockquote>
<p>âœ… è¡Œåˆ—å¼çš„è®¡ç®—ï¼šçº¢è‰²ç›¸ä¹˜å‡è“è‰²ç›¸ä¹˜ã€‚</p>
</blockquote>
<p>P63</p>
<h4 id="å…¬å¼"><a class="header" href="#å…¬å¼">å…¬å¼</a></h4>
<ul>
<li>det \(I = 1\)</li>
<li>det \(AB = \text{ det } A âˆ— \text{det } B\)</li>
<li>det \(A^T\) = det \(A\)</li>
<li>If \(A\) is invertibleï¼Œdet \(A^{âˆ’1}\) = \((\text{det } A)^{âˆ’1}\)</li>
<li>If \(U\) is orthogonalï¼Œ\(\text{det } U = Â± 1\)</li>
</ul>
<p>P64</p>
<h4 id="cross-product-as-a-determinant"><a class="header" href="#cross-product-as-a-determinant">Cross Product as a Determinant</a></h4>
<p>$$
\begin{align*}
c=a\times b= &amp; \begin{bmatrix}
a_yb_z-a_zb_y \\
a_zb_x-a_xb_z \\
a_xb_y-a_yb_x
\end{bmatrix}\\
= &amp; \text{det } \begin{bmatrix}
i &amp; j &amp; k \\
a_x &amp; a_y &amp; a_z \\
b_x &amp; b_y &amp; b_z
\end{bmatrix}
\end{align*}
$$</p>
<blockquote>
<p>âœ… ç”¨è¡Œåˆ—å¼è¿ç®—è§„åˆ™æ¥è®¡ç®—å‰ä¹˜ç»“æœã€‚</p>
</blockquote>
<p>P66</p>
<h3 id="eigenvalues-and-eigenvectors"><a class="header" href="#eigenvalues-and-eigenvectors">Eigenvalues and Eigenvectors</a></h3>
<p>For a matrix \(A\), if a <strong>nonzero</strong> vector \(x\) satisfies<br />
$$
Ax=\lambda x
$$</p>
<p>Then:<br />
\(\lambda\): an eigenvalue of \(A\)<br />
\(x\): an eigenvector of \(A\)</p>
<p>Especially, a \(3\times 3\) <strong>orthogonal</strong> matrix \(U\)<br />
has at least one real eigenvalue: \(\lambda=\text{det } U = Â±1\)</p>
<p>P67</p>
<h3 id="rigid-transformation"><a class="header" href="#rigid-transformation">Rigid Transformation</a></h3>
<p>Translation, rotation, and coordinate transformation </p>
<p><img src="./assets/02-07.png" alt="" /></p>
<blockquote>
<p>âœ… åˆšä½“å˜æ¢ä¸èƒ½æ”¹å˜å½¢çŠ¶å’Œå¤§å°ï¼Œå› æ­¤æ²¡æœ‰Scaling</p>
</blockquote>
<p>P69</p>
<h4 id="scaling"><a class="header" href="#scaling">Scaling</a></h4>
<p><img src="./assets/02-08.png" alt="" /></p>
<p>P70</p>
<h4 id="translation"><a class="header" href="#translation">Translation</a></h4>
<p><img src="./assets/02-9.png" alt="" /></p>
<p>P72</p>
<h4 id="rotation"><a class="header" href="#rotation">Rotation</a></h4>
<p><img src="./assets/02-10.png" alt="" /></p>
<p>P73</p>
<h2 id="rotation-matrix"><a class="header" href="#rotation-matrix">Rotation Matrix</a></h2>
<h3 id="å®šä¹‰-1"><a class="header" href="#å®šä¹‰-1">å®šä¹‰</a></h3>
<ul>
<li>Rotation matrix is orthogonal:</li>
</ul>
<p>$$
R^{-1}=R^{T}  \quad R^TR=RR^T=1
$$</p>
<ul>
<li>Determinant of \(R\)<br />
$$
\text{det } R = + 1
$$</li>
<li>Rotation maintains length of vectors
$$
||Rx|| = ||x||
$$</li>
</ul>
<blockquote>
<p>âœ… å…¬å¼2ï¼š\(R\) ä¸ä¼šæ”¹å˜å·¦ã€å³æ‰‹ç³»<br />
âœ… å…¬å¼3ï¼š\(R\) æ˜¯åˆšæ€§å˜æ¢ï¼Œä¸æ”¹å˜å¤§å°</p>
</blockquote>
<p>P75</p>
<h3 id="combination-of-rotations"><a class="header" href="#combination-of-rotations">Combination of Rotations</a></h3>
<p><img src="./assets/02-11.png" alt="" /></p>
<p>P76</p>
<h3 id="rotation-around-coordinate-axes"><a class="header" href="#rotation-around-coordinate-axes">Rotation around Coordinate Axes</a></h3>
<p><img src="./assets/02-12.png" alt="" /></p>
<p>$$
R_x(\alpha )=\begin{pmatrix}
1 &amp; 0 &amp; 0 \\
0 &amp; \cos\alpha  &amp; -\sin \alpha \\
0 &amp; \sin \alpha  &amp; \cos \alpha 
\end{pmatrix}
$$</p>
<p>$$
R_y(\beta )=\begin{pmatrix}
\cos \beta &amp; 0 &amp; \sin \beta \\
0 &amp; 1  &amp; 0  \\
-\sin \beta &amp; 0   &amp; \cos \beta 
\end{pmatrix}
$$</p>
<p>$$
R_z(\gamma  )=\begin{pmatrix}
\cos \gamma &amp; -\sin \gamma &amp; 0 \\
\sin \gamma &amp; \cos \gamma  &amp; 0  \\
0 &amp; 0   &amp; 1 
\end{pmatrix}
$$</p>
<blockquote>
<p>âœ… æ²¿ç€å“ªä¸ªè½´è½¬ï¼Œé‚£ä¸ªè½´ä¸Šçš„åæ ‡ä¸ä¼šæ”¹å˜ã€‚<br />
âœ… ä¸‰ä¸ªåŸºæœ¬æ—‹è½¬å¯ä»¥ç»„åˆå‡ºå¤æ‚æ—‹è½¬ã€‚</p>
</blockquote>
<p>P79</p>
<h2 id="rotation-axis-and-angle"><a class="header" href="#rotation-axis-and-angle">Rotation Axis and Angle</a></h2>
<p>Rotation matrix \(R\) has a real eigenvalue: +1<br />
$$
Ru=u
$$</p>
<p>In other words, \(R\) can be considered as a rotation around axis \(u\) by some angle \(\theta \)<br />
How to find axis ğ’– and angle \(\theta \)?</p>
<p><img src="./assets/02-13.png" alt="" /></p>
<blockquote>
<p>âœ… ç”¨ \(R\) æ—‹è½¬æ—¶ï¼Œå‘é‡ \(u\) ä¸ä¼šå˜åŒ–ã€‚<br />
âœ… å¯¹äºä»»æ„ \(R\)ï¼Œéƒ½å­˜åœ¨è¿™æ ·ä¸€ä¸ª \(u\).<br />
âœ… \(u\) æ˜¯ \(R\) çš„æ—‹è½¬è½´ã€‚</p>
</blockquote>
<p>P80</p>
<h3 id="æ ¹æ®æ—‹è½¬çŸ©é˜µæ±‚è½´è§’"><a class="header" href="#æ ¹æ®æ—‹è½¬çŸ©é˜µæ±‚è½´è§’">æ ¹æ®æ—‹è½¬çŸ©é˜µæ±‚è½´è§’</a></h3>
<p><img src="./assets/02-14.png" alt="" /></p>
<p>P81</p>
<p><img src="./assets/02-015.png" alt="" /></p>
<blockquote>
<p>âœ… \({u}' \) ä¸ \({u} \) å…±çº¿ï¼Œ\({u}' \) å•ä½åŒ–å¾—åˆ° \({u} \)ï¼<br />
âœ… \(q\) å’Œ \(-q\) ä¸¤ç§è¡¨ç¤ºæ–¹æ³•ä¼šå¼•å…¥æ’å€¼é—®é¢˜ï¼Œéœ€è¦æ³¨æ„ã€‚</p>
</blockquote>
<p>P82</p>
<p>$$
u\gets {u}' =\begin{bmatrix}
r_{32}-r_{23}  \\
r_{13}-r_{31}  \\
r_{21}-r_{12} 
\end{bmatrix}
$$</p>
<p>$$
\text{When }  R\ne R^T \Leftrightarrow \sin \theta \ne 0\Leftrightarrow \theta \ne 0^{\circ} 
\text{ or }  180^{\circ} 
$$</p>
<p>P83</p>
<h3 id="åŸºäºç½—å¾·é‡Œæ ¼å…¬å¼æ±‚è½´è§’"><a class="header" href="#åŸºäºç½—å¾·é‡Œæ ¼å…¬å¼æ±‚è½´è§’">åŸºäºç½—å¾·é‡Œæ ¼å…¬å¼æ±‚è½´è§’</a></h3>
<p><img src="./assets/02-17.png" alt="" /></p>
<blockquote>
<p>âœ… ä» \(R\) çš„å…¬å¼ä¹Ÿèƒ½å¾—å‡ºç›¸åŒçš„ç»“è®º<br />
âœ… \(u  â†’  {u}'  â†’  \)æ—‹è½¬è§’åº¦</p>
</blockquote>
<p>P85</p>
<h3 id="æ—‹è½¬çŸ©é˜µçš„æ„ä¹‰"><a class="header" href="#æ—‹è½¬çŸ©é˜µçš„æ„ä¹‰">æ—‹è½¬çŸ©é˜µçš„æ„ä¹‰</a></h3>
<h3 id="æ—‹è½¬"><a class="header" href="#æ—‹è½¬">æ—‹è½¬</a></h3>
<p><img src="./assets/02-18.png" alt="" /></p>
<p>P86</p>
<h3 id="æ—‹è½¬--å¹³ç§»"><a class="header" href="#æ—‹è½¬--å¹³ç§»">æ—‹è½¬ + å¹³ç§»</a></h3>
<p><img src="./assets/02-19.png" alt="" /> </p>
<p>P87</p>
<h1 id="representations-of-3d-rotation"><a class="header" href="#representations-of-3d-rotation">Representations of 3D Rotation</a></h1>
<p>ã€€</p>
<p>P91</p>
<h2 id="æ—‹è½¬çŸ©é˜µ"><a class="header" href="#æ—‹è½¬çŸ©é˜µ">æ—‹è½¬çŸ©é˜µ</a></h2>
<h3 id="parameterization-of-rotation"><a class="header" href="#parameterization-of-rotation">Parameterization of Rotation</a></h3>
<p>æ—‹è½¬çŸ©é˜µæœ‰9ä¸ªå‚æ•°ï¼Œä½†å®é™…ä¸Šdegrees of freedom (DoF) = 3</p>
<blockquote>
<p>âœ… det åªæ˜¯æŠŠç©ºé—´å‡å°‘ä¸€åŠï¼Œæ²¡æœ‰é™ä½è‡ªç”±åº¦</p>
</blockquote>
<p>P93</p>
<h3 id="interpolation-1"><a class="header" href="#interpolation-1">Interpolation</a></h3>
<p>What is good interpolation?</p>
<ul>
<li>result is valid at any time \(t\)</li>
<li>Constant speed is preferred</li>
</ul>
<table><thead><tr><th></th><th>å¹³ç§»</th><th>æ—‹è½¬</th></tr></thead><tbody>
<tr><td></td><td><img src="./assets/02-20-1.png" alt="" /></td><td><img src="./assets/02-21.png" alt="" /></td></tr>
<tr><td></td><td>\(x_t=(1-t)x_0+tx_1\)<br> âœ… å¹³ç§»ä½¿ç”¨çº¿æ€§æ’å€¼</td><td>âœ… æ—‹è½¬ä¸é€‚åˆçº¿æ€§æ’å€¼ã€‚</td></tr>
<tr><td>åˆæ³•</td><td>âœ… å¯¹äºä»»æ„ \(t\), \(x_t\) ä¸€å®šæ˜¯åˆæ³•çš„ã€‚</td><td></td></tr>
<tr><td>é€Ÿåº¦å¯æ§</td><td>âœ… è¿åŠ¨çš„é€Ÿåº¦æ˜¯å¸¸æ•°ï¼Œå› æ­¤é€Ÿåº¦å¯æ§ã€‚</td><td></td></tr>
</tbody></table>
<p>P99</p>
<h3 id="ç»“è®º-1"><a class="header" href="#ç»“è®º-1">ç»“è®º</a></h3>
<ul>
<li>Easy to compose?   \(\quad \quad \quad {\color{Red} \times } \)</li>
</ul>
<blockquote>
<p>âœ… 9ä¸ªå‚æ•°æ²¡æœ‰ç›´æ¥çš„æ„ä¹‰ï¼Œä¸”ä¸ºäº†æ»¡è¶³æ­£äº¤é˜µï¼Œå‚æ•°ä¹‹é—´æ˜¯è€¦åˆçš„ã€‚</p>
</blockquote>
<ul>
<li>Easy to apply?   \(\quad \quad \quad \quad {\color{Green}  \surd }\)</li>
<li>Easy to interpolate?  \(\quad  \quad {\color{Red} \times } \)</li>
</ul>
<p>P100</p>
<h2 id="euler-angles"><a class="header" href="#euler-angles">Euler angles</a></h2>
<h3 id="basic-rotations"><a class="header" href="#basic-rotations">Basic rotations</a></h3>
<p><img src="./assets/02-22.png" alt="" /> </p>
<p>$$
R_x(\alpha )=\begin{pmatrix}
1 &amp; 0 &amp; 0 \\
0 &amp; \cos\alpha  &amp; -\sin \alpha \\
0 &amp; \sin \alpha  &amp; \cos \alpha 
\end{pmatrix}
$$</p>
<p>$$
R_y(\beta )=\begin{pmatrix}
\cos \beta &amp; 0 &amp; \sin \beta \\
0 &amp; 1  &amp; 0  \\
-\sin \beta &amp; 0   &amp; \cos \beta 
\end{pmatrix}
$$</p>
<p>$$
R_z(\gamma  )=\begin{pmatrix}
\cos \gamma &amp; -\sin \gamma &amp; 0 \\
\sin \gamma &amp; \cos \gamma  &amp; 0  \\
0 &amp; 0   &amp; 1 
\end{pmatrix}
$$</p>
<h3 id="combination-of-three-basic-rotations"><a class="header" href="#combination-of-three-basic-rotations">combination of three basic rotations</a></h3>
<p><strong>Any rotation can be represented as a combination of three basic rotations</strong></p>
<p>P102</p>
<p>Any combination of three basic rotations are allowed<br />
- Excluding those rotate twice around the same axis<br />
- XYZ, XZY, YZX, YXZ, ZYX, ZXY, XYX, XZX, YXY, YZY, ZXZ, ZYZ</p>
<p>P103</p>
<h3 id="conventions-of-euler-angles"><a class="header" href="#conventions-of-euler-angles">Conventions of Euler Angles</a></h3>
<p>intrinsic rotations: axes attached to the <strong>object</strong></p>
<p>$$
R_x(\alpha )R_y(\beta )R_z(\gamma )
$$</p>
<p>extrinsic rotations: axes fixed to the <strong>world</strong></p>
<p>$$
R_z(\gamma )R_y(\beta )R_x(\alpha )
$$</p>
<blockquote>
<p>âœ… ä½¿ç”¨æ¬§æ‹‰è§’æ—¶åº”å…ˆæ˜ç¡®æ‰€ä½¿ç”¨çš„ convetion å’Œé¡ºåºã€‚<br />
âœ… ä¸åŒçš„å•†ä¸šè½¯ä»¶å¯èƒ½æœ‰ä¸åŒçš„å†…ç½®å‚æ•°ã€‚<br />
âœ… maya å’Œ unity éƒ½æ˜¯ extrinsic.<br />
âœ… maya å¯é€‰é¡ºåºï¼ŒUnity å›ºå®š Zxy</p>
</blockquote>
<p>P104</p>
<h3 id="gimbal-lock"><a class="header" href="#gimbal-lock">Gimbal Lock</a></h3>
<p>When two local axes are driven into a parallel configuration, 
one degree of freedom is â€œlockedâ€</p>
<blockquote>
<p>âœ… å½“å…¶ä¸­ä¸¤ä¸ªè½´å…±çº¿æ—¶ï¼Œä¼šä¸¢å¤±ä¸€ä¸ªè‡ªç”±åº¦ï¼Œæ­¤æ—¶è¡¨ç¤ºä¸å”¯ä¸€ï¼ˆå¥‡å¼‚ç‚¹ï¼‰</p>
</blockquote>
<p>P105</p>
<h3 id="ç»“è®º-2"><a class="header" href="#ç»“è®º-2">ç»“è®º</a></h3>
<p><img src="./assets/02-23.png" alt="" /> </p>
<blockquote>
<p>âœ… æ’å€¼æ—¶éœ€æ³¨æ„ä½œç”¨åŸŸä¸º \([-\pi , \pi ]\)ï¼Œå¦åˆ™å®¹æ˜“å‡ºç°ç¿»è½¬ç°è±¡ã€‚</p>
</blockquote>
<p>P107</p>
<h2 id="rotation-vectors--axis-angles"><a class="header" href="#rotation-vectors--axis-angles">Rotation Vectors / Axis Angles</a></h2>
<p><img src="./assets/02-24-1.png" alt="" /> </p>
<blockquote>
<p>âœ… ç²—ä½“ \(\theta \)ï¼šè½´è§’è¡¨ç¤ºæ³•æè¿°çš„æ—‹è½¬<br />
âœ… ç»†ä½“ \(\theta \)ï¼šä»¥ \(u\) ä¸ºè½´çš„æ—‹è½¬è§’åº¦</p>
</blockquote>
<p><img src="./assets/02-24.png" alt="" /> </p>
<blockquote>
<p>âœ… åº”ç”¨æ—¶è¦å…ˆè½¬ä¸ºæ—‹è½¬çŸ©é˜µï¼Œåšæ—‹è½¬ç»„åˆæ—¶ä¹Ÿè¦å€ŸåŠ©æ—‹è½¬çŸ©é˜µ</p>
</blockquote>
<p>P110</p>
<h3 id="interpolating-rotation-vectors--axis-angles"><a class="header" href="#interpolating-rotation-vectors--axis-angles">Interpolating Rotation Vectors / Axis Angles</a></h3>
<h4 id="çº¿æ€§æ’å€¼"><a class="header" href="#çº¿æ€§æ’å€¼">çº¿æ€§æ’å€¼</a></h4>
<p>å¯ä»¥ä¿è¯æ’å€¼ç»“æœåˆæ³•ï¼Œä½†ä¸èƒ½ä¿è¯æ—‹è½¬é€Ÿåº¦æ’å®š</p>
<p><img src="./assets/02-25.png" alt="" /> </p>
<p>P111</p>
<h4 id="åŒ€é€Ÿæ’å€¼"><a class="header" href="#åŒ€é€Ÿæ’å€¼">åŒ€é€Ÿæ’å€¼</a></h4>
<p>å¯ä»¥ä¿è¯æ’å€¼ç»“æœåˆæ³•ä¸”åŒ€é€Ÿï¼Œä½†æ—‹è½¬è¾ƒå¤æ‚</p>
<p><img src="./assets/02-25-1.png" alt="" /> </p>
<blockquote>
<p>âœ… è¿™ä¸ªæ–¹æ³•æ²¡å¬æ‡‚ï¼Œå¯ä»¥å®ç°å…è®¸æ’å€¼ã€‚</p>
</blockquote>
<p>P112</p>
<h3 id="ç»“è®º-3"><a class="header" href="#ç»“è®º-3">ç»“è®º</a></h3>
<p><img src="./assets/02-25-2.png" alt="" /> </p>
<ul>
<li>Easy to compose?   \(\quad \quad {\color{Green} \surd } \quad \quad \)   But hard to manipulate</li>
<li>Easy to apply?   \(\quad \quad \quad {\color{Red} \times }  \quad \quad \)     Need to convert to matrix</li>
<li>Easy to interpolate?  \(\quad \quad {\color{Green} \surd } \quad \quad \)  Linear interpolation works, but not perfect</li>
<li>No Gimbal lock    \(\quad \quad {\color{Green} \surd } \quad \quad \)  need to deal with singularities</li>
</ul>
<p>P113</p>
<h2 id="quaternions"><a class="header" href="#quaternions">Quaternions</a></h2>
<p>P116</p>
<h3 id="å®šä¹‰-2"><a class="header" href="#å®šä¹‰-2">å®šä¹‰</a></h3>
<ul>
<li>
<p>Extending complex numbers<br />
$$
q =a+bi +cj +dk \in \mathbb{H} ,a,b,c,d\in \mathbb{R}
$$</p>
</li>
<li>
<p>\(i^2=j^2=k^2=ijk=-1\)</p>
</li>
<li>
<p>\(ij=k,ji=-k(^*\text{cross product})\)</p>
</li>
<li>
<p>\(jk=i,kj=-i\)</p>
</li>
<li>
<p>\(ki=j,ik=-j\)</p>
</li>
</ul>
<p>$$
q=w+xi+yj+zk \quad \Rightarrow  \quad  q=\begin{bmatrix}
w\\
x\\
y\\
z
\end{bmatrix}=\begin{bmatrix}
w\\
v
\end{bmatrix}
$$</p>
<p>$$
q =[w,v]^T \in \mathbb{H} ,w\in \mathbb{R},v\in \mathbb{R}^3
$$</p>
<p>$$
w =[w,0]^T : \text{ scalar quaternion }
$$</p>
<p>$$
v =[0,v]^T : \text{ pure quaternion }
$$</p>
<p>P117</p>
<h3 id="quaternion-arithmetic"><a class="header" href="#quaternion-arithmetic">Quaternion Arithmetic</a></h3>
<p>$$
q =a+bi +cj +dk \in \mathbb{H} ,a,b,c,d\in \mathbb{R}
$$</p>
<p>Conjugation:   \(\quad \quad q^*=a-bi-cj-dk\)<br />
\(<br>\)<br />
Scalar product:  \(\quad \quad tq=ta+tbi+tcj+tdk\)<br />
\(<br>\)<br />
Addition:  \(\quad \quad q_1+q_2=(a_1+a_2)+(b_1+b_2)i+(c_1+c_2)j+(d_1+d_2)k\)<br />
\(<br>\)<br />
Dot product:  \(\quad \quad q_1\cdot q_2=a_1a_2+b_1b_2+c_1c_2+d_1d_2\)<br />
\(<br>\)<br />
Norm:  \(\quad \quad ||q||=\sqrt{a^2+b^2+c^2+d^2} =\sqrt{q\cdot q}\)</p>
<p>P118</p>
<h3 id="quaternion-multiplication"><a class="header" href="#quaternion-multiplication">Quaternion Multiplication</a></h3>
<p>$$
q_1q_2=(a_1+b_1i+c_1j+d_1k)*(a_2+b_2i+c_2j+d_2k)
$$</p>
<p>$$
q_1q_2=a_1a_2-b_1b_2-c_1c_2-d_1d_2
$$</p>
<p>$$
+(b_1a_2+a_1b_2-d_1c_2+c_1d_2)i<br />
$$</p>
<p>$$
+(c_1a_2+d_1b_2+a_1c_2-b_1d_2)j<br />
$$</p>
<p>$$
+(d_1a_2-c_1b_2+b_1c_2+a_1d_2)k
$$</p>
<p>note:</p>
<ul>
<li>\(i^2=j^2=k^2=ijk=-1\)</li>
<li>\(ij=k,ji=-k (^* \text{cross product})\)</li>
<li>\(jk=i,kj=-i\)</li>
<li>\(ki=j,ik=-j\)</li>
</ul>
<blockquote>
<p>âœ… \(q_1 \cdot q_2\) å’Œ \(q_1q_2\) æ˜¯ä¸¤ç§ä¸åŒçš„è¿ç®—ã€‚</p>
</blockquote>
<p>P120</p>
<p>Conjugation:   \(\quad \quad q^*=[w,-v]^T\)<br />
\(<br>\)<br />
Scalar product:  \(\quad \quad tq=[tw,tv]^T\)<br />
\(<br>\)<br />
Addition:  \(\quad \quad q_1+q_2=[w_1+w_2,v_1+v_2]^T\)<br />
\(<br>\)<br />
Dot product:  \(\quad \quad q_1\cdot q_2=w_1w_2+v_1 \cdot v_2\)<br />
\(<br>\)<br />
Norm:  \(\quad \quad ||q||=\sqrt{w_1w_2+v_1 \cdot v_2} =\sqrt{q\cdot q}\)</p>
<p>P122</p>
<p>$$
q_1q_2=\begin{bmatrix}
w_1\\
v_1
\end{bmatrix}\begin{bmatrix}
w_2 \\
v_2
\end{bmatrix}=\begin{bmatrix}
w_1w_2-v_1\cdot v_2\\
w_1v_2+w_2v_1+v_1\times v_2
\end{bmatrix}
$$</p>
<p>Non-Commutativity: </p>
<p>$$
q_1q_2\ne q_2q_1
$$</p>
<p>Associativity:</p>
<p>$$
q_1q_2q_3=(q_1q_2)q_3=q_1(q_2q_3)
$$</p>
<p>P123</p>
<p>Conjugation:</p>
<p>$$
(q_1q_2)^\ast=q^\ast_2q^\ast_1
$$</p>
<p>Norm:</p>
<p>$$
||q||^2 = q^ \ast q =qq^\ast
$$</p>
<p>Reciprocal:</p>
<p>$$
\begin{matrix}
qq^{-1}=1  &amp; \Rightarrow &amp; q^{-1}=\frac{q^*}{||q||^2}\\
q^{-1}q=1  &amp;  &amp;
\end{matrix}
$$</p>
<p>P124</p>
<h3 id="unit-quaternions"><a class="header" href="#unit-quaternions">Unit Quaternions</a></h3>
<p>$$
\begin{matrix}
q=\begin{bmatrix}
w\\
v
\end{bmatrix} &amp;||q||=1
\end{matrix}
$$</p>
<p>For any non-zero quaternion \(\tilde{q} \):</p>
<p>$$
q=\frac{\tilde{q}}{||\tilde{q}||}
$$</p>
<p>Reciprocal:</p>
<p>$$
\begin{matrix}
q^{-1}=q^\ast =\begin{bmatrix}
w\\
-v
\end{bmatrix} &amp;\Leftrightarrow &amp; R^{-1}=R^T
\end{matrix}
$$</p>
<p>P125</p>
<table><thead><tr><th>2D</th><th>3D</th></tr></thead><tbody>
<tr><td><img src="./assets/02-26.png" alt="" /></td><td><img src="./assets/02-27.png" alt="" /></td></tr>
<tr><td>unit complex number</td><td>unit quaternion<br> âœ… æ‰€æœ‰å•ä½å››å…ƒæ•°æ„æˆ 4D ç©ºé—´ä¸Šçš„å•ä½çƒæ ¸ã€‚</td></tr>
<tr><td>\(z = \cos \theta  + i\sin \theta\)</td><td>\(q =  \begin{bmatrix} w\\v\end{bmatrix}= [\cos \frac{\theta}{2} ,   u\sin \frac{\theta}{2}] \quad \mid\mid u \mid\mid = 1\)</td></tr>
</tbody></table>
<p>same information as axis angles \((u,\theta)\) But in a different form</p>
<p>P127</p>
<h3 id="è½´è§’è¡¨ç¤º---å››å…ƒæ•°è¡¨ç¤º"><a class="header" href="#è½´è§’è¡¨ç¤º---å››å…ƒæ•°è¡¨ç¤º">è½´è§’è¡¨ç¤º -&gt; å››å…ƒæ•°è¡¨ç¤º</a></h3>
<p>Any 3D rotation \((v,\theta)\) can be represented as a <strong>unit quaternion</strong></p>
<p>$$
\begin{matrix}
\text{Angle}: &amp; \theta =2 \text{ arg } \cos w\\
\text{ Axis}:  &amp; u=\frac{v}{||v||} 
\end{matrix}
$$</p>
<p>P128</p>
<h3 id="rotation-a-vector-using-unit-quaternions"><a class="header" href="#rotation-a-vector-using-unit-quaternions">Rotation a Vector Using Unit Quaternions</a></h3>
<p>å·²ç»å‘é‡på’Œå•ä½å››å…ƒæ•°qï¼Œæ±‚pç»è¿‡qæ—‹è½¬åçš„å‘é‡ã€‚</p>
<p><img src="./assets/02-29.png" alt="" /></p>
<p>$$
\begin{matrix}
\text{Unit quaternion}: &amp; q=\begin{bmatrix}
w\\
v
\end{bmatrix}=[\cos \frac{\theta }{2} ,u\sin \frac{\theta }{2}]\\
\text{ 3D vector}:p  &amp; \text{ Rotation result }: {p}'
\end{matrix}
$$</p>
<p>Then the rotation can be applied by <strong>quaternion multiplication</strong>:</p>
<blockquote>
<p>âœ… çº¯æ–¹å‘ \(p\) å¯ç”¨å››å…ƒæ•°è¡¨ç¤ºä¸º \([0 \quad p ]\)<br />
âœ…  \({p}' = R (q) \cdot p\)</p>
</blockquote>
<p>P129</p>
<p>$$
\begin{bmatrix}
0 \\
{p}' 
\end{bmatrix}=q\begin{bmatrix}
0\\
p
\end{bmatrix}q^\ast =(-q)\begin{bmatrix}
0\\
p
\end{bmatrix}(-q)^\ast 
$$</p>
<p>\(\mathbf{q}\) <strong>and</strong> \(âˆ’\mathbf{q}\) <strong>represent the same rotation</strong></p>
<p>P131</p>
<h3 id="combination-of-rotations-1"><a class="header" href="#combination-of-rotations-1">Combination of Rotations</a></h3>
<p>è¯æ˜è¿‡ç¨‹è·³è¿‡ï¼Œç»“è®ºï¼š</p>
<p>$$
\begin{matrix}
\text{Combined rotation}: &amp; q=q_2q_1
\end{matrix}
$$</p>
<p>P133</p>
<h3 id="quaternion-interpolation"><a class="header" href="#quaternion-interpolation">Quaternion Interpolation</a></h3>
<p><img src="./assets/02-31.png" alt="" /></p>
<p>A unit hypersphere in 4D space</p>
<blockquote>
<p>âœ… å•ä½å››å…ƒæ•°è¡¨ç°å‡ºæ¥æ˜¯ 4D ç©ºé—´ä¸­çš„çƒæ ¸ï¼Œ\(q_1q_2\) æ˜¯çƒæ ¸ä¸Šçš„ä¸¤ä¸ªç‚¹ï¼Œå¸Œæœ›æ²¿çƒé¢è½¨è¿¹æ’å€¼ã€‚</p>
</blockquote>
<p>P135</p>
<h4 id="linear-interpolation"><a class="header" href="#linear-interpolation">Linear Interpolation</a></h4>
<p>$$
q_t=(1-t)q_0+tq_1
$$</p>
<p><img src="./assets/02-32.png" alt="" /></p>
<p>\(q_t\) is not a unit quaternion</p>
<p>P136</p>
<h4 id="linear-interpolation--projection"><a class="header" href="#linear-interpolation--projection">Linear Interpolation + Projection</a></h4>
<p>$$
\begin{matrix}
\tilde{q}_t=(1-t)q_0+tq_1  &amp; q_t=\frac{\tilde{q}_t }{||\tilde{q}_t||} 
\end{matrix}
$$</p>
<p><img src="./assets/02-33.png" alt="" /></p>
<p>$$
\begin{matrix}
q_t \text{ is a unit quaternion}\\
\text{Rotational speed is not constant}
\end{matrix}
$$</p>
<blockquote>
<p>âœ… å½“ \(u_0ï¼-u_1\) æ—¶ï¼Œå¯èƒ½å¾—åˆ°æŸä¸ª \(\tilde{q} _t = 0\)ï¼Œæ— æ³•å•ä½åŒ–<br />
âœ… è§£å†³æ–¹æ³•:æ ¹æ® \(u_0ï¼-u_0\)ï¼Œå…ˆæ‰¾åˆ° \(u_0\) å’Œ \(u_1\) åœ¨æ•°å€¼ä¸Šæœ€æ¥è¿‘çš„å››å…ƒæ•°è¡¨ç¤ºã€‚</p>
</blockquote>
<p>P137</p>
<h4 id="slerp-spherical-linear-interpolation"><a class="header" href="#slerp-spherical-linear-interpolation">SLERP: Spherical Linear Interpolation</a></h4>
<h5 id="æ€è€ƒ"><a class="header" href="#æ€è€ƒ">æ€è€ƒ</a></h5>
<p>$$
q_t=a(t)q_0+b(t)q_1
$$</p>
<p>å¦‚ä½•è®¾è®¡aå’Œbï¼Œè®©æ’å€¼ç»“æœé€Ÿåº¦æ’å®šï¼Ÿ</p>
<p><img src="./assets/02-34.png" alt="" /></p>
<p>$$
r=a(t)p+b(t)q
$$</p>
<h5 id="è®¡ç®—"><a class="header" href="#è®¡ç®—">è®¡ç®—</a></h5>
<p>Consider the angle \(\theta\) between \(p,q\):</p>
<p>$$
\cos \theta =p\cdot q
$$</p>
<p>We have:</p>
<p>$$
\begin{matrix}
p \cdot r=a(t)p\cdot p+b(t)q\cdot p\\
\Rightarrow \cos t \theta =a(t)+b(t)\cos \theta 
\end{matrix}
$$</p>
<p>similarly:</p>
<p>$$
\begin{matrix}
q \cdot r=a(t)q\cdot p+b(t)\\
\Rightarrow \cos (1- t) \theta =a(t)\cos\theta +b(t)<br />
\end{matrix}
$$</p>
<h5 id="ç»“è®º-4"><a class="header" href="#ç»“è®º-4">ç»“è®º</a></h5>
<p>then we haveï¼š</p>
<p>$$
a(t)=\frac{\sin [(1-t)\theta ]}{\sin \theta  } ,b(t)=\frac{\sin t \theta }{\sin \theta } 
$$</p>
<p><img src="./assets/02-35.png" alt="" /></p>
<p>P139</p>
<p>$$
q_t=\frac{\sin [(1-t)\theta ]}{\sin \theta  }q_0+\frac{\sin t \theta }{\sin \theta }q_1 
$$</p>
<p>$$
\cos \theta=q_0\cdot  q_1
$$</p>
<p>P140</p>
<h3 id="ç»“è®º-5"><a class="header" href="#ç»“è®º-5">ç»“è®º</a></h3>
<p>Rotations can be represented by <strong>unit quaternions</strong></p>
<p>Representation is not unique</p>
<p>\(q, âˆ’q\) represent the same rotation</p>
<ul>
<li>Easy to compose?   \(\quad \quad {\color{Green} \surd }\quad \quad \)     Need normalization, hard to manipulate,</li>
<li>Easy to apply?    \(\quad \quad  \quad {\color{Green} \surd }\quad \quad \)       Quaternion multiplication</li>
<li>Easy to interpolate?  \(\quad   {\color{Green} \surd }\quad \quad \)   SLERP, need to deal with singularities</li>
<li>No Gimbal lock  \(\quad \quad  \quad {\color{Green} \surd }\quad \quad \)</li>
</ul>
<hr />
<blockquote>
<p>æœ¬æ–‡å‡ºè‡ªCaterpillarStudyGroupï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>
<p>https://caterpillarstudygroup.github.io/GAMES105_mdbook/</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><p>P3</p>
<h1 id="outline-1"><a class="header" href="#outline-1">Outline</a></h1>
<ul>
<li>
<p>Character Kinematics</p>
<ul>
<li>Skeleton and forward Kinematics</li>
</ul>
</li>
<li>
<p>Inverse Kinematics</p>
<ul>
<li>IK as a optimization problem</li>
<li>Optimization approaches
<ul>
<li>Cyclic Coordinate Descent (CCD)</li>
<li>Jacobian and gradient descent method</li>
<li>Jacobian inverse method</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>P4</p>
<h1 id="character-kinematics"><a class="header" href="#character-kinematics">Character Kinematics</a></h1>
<p>the study of the motion of bodies <strong>without reference to mass or force</strong></p>
<p>P8</p>
<h2 id="joint-bone-skeleton"><a class="header" href="#joint-bone-skeleton">joint, bone, skeleton</a></h2>
<p><img src="./assets/03-01.png" alt="" /><br />
<img src="./assets/03-02.png" alt="" /></p>
<blockquote>
<p>âœ… å…³æ³¨å…³èŠ‚çš„ä½ç½®å’Œæ—‹è½¬</p>
</blockquote>
<p>P13</p>
<h2 id="kinematics-of-a-chain"><a class="header" href="#kinematics-of-a-chain">Kinematics of a Chain</a></h2>
<h3 id="é—®é¢˜æè¿°-3"><a class="header" href="#é—®é¢˜æè¿°-3">é—®é¢˜æè¿°</a></h3>
<p>è¦ä½¿æ‰‹è‡‚æ‘†æˆæŒ‡å®šçš„åŠ¨ä½œï¼Œæ¯ä¸ªå…³èŠ‚åœ¨å„è‡ªåæ ‡ç³»ä¸‹çš„æ—‹è½¬æ˜¯å¤šå°‘ï¼Ÿ</p>
<p><img src="./assets/03-03-1.png" alt="" /></p>
<p>æ±‚\(Q_0, Q_1, Q_2, Q_3, Q_4\)</p>
<p>P14</p>
<h3 id="åˆå§‹pose"><a class="header" href="#åˆå§‹pose">åˆå§‹pose</a></h3>
<p><img src="./assets/03-03.png" alt="" /></p>
<p>$$
Q_0=Q_1=Q_2=Q_3=Q_4=I
$$</p>
<blockquote>
<p>âœ… è¿™ä¸€ä¸ªå®šä¹‰äº†5ä¸ªå…³èŠ‚çš„æ‰‹è‡‚ã€‚åœ¨æ¯ä¸ªå…³èŠ‚ä¸Šç»‘ä¸Šä¸€ä¸ªåæ ‡ç³»ã€‚ </p>
</blockquote>
<p>P15</p>
<h3 id="æ—‹è½¬å…³èŠ‚4"><a class="header" href="#æ—‹è½¬å…³èŠ‚4">æ—‹è½¬å…³èŠ‚4</a></h3>
<p>æŠŠå…³èŠ‚4æ—‹è½¬R4ä»¥å</p>
<p><img src="./assets/03-04.png" alt="" /></p>
<blockquote>
<p>âœ… \(Q\)ï¼šåœ¨ä¸–ç•Œåæ ‡ç³»ä¸‹çš„æœå‘<br />
âœ… \(R\)ï¼šåœ¨å±€éƒ¨åæ ‡ç³»ä¸‹çš„æ—‹è½¬</p>
</blockquote>
<p>$$
\begin{matrix}
Q_0=I\quad\\<br />
Q_1=I\quad\\<br />
Q_2=I\quad\\<br />
Q_3=I\quad\\<br />
Q_4={\color{Red}{R_4}}
\end{matrix}
$$</p>
<p>P16</p>
<h3 id="æ—‹è½¬å…³èŠ‚3"><a class="header" href="#æ—‹è½¬å…³èŠ‚3">æ—‹è½¬å…³èŠ‚3</a></h3>
<p><img src="./assets/03-05.png" alt="" /> </p>
<p>æŠŠå…³èŠ‚3æ—‹è½¬R3ä»¥åï¼ŒQ3å’ŒQ4ä¼šåŒæ—¶å—åˆ°å½±å“</p>
<p>$$
\begin{matrix}
Q_0=I\quad\quad\\<br />
Q_1=I\quad\quad\\<br />
Q_2=I\quad\quad\\<br />
Q_3={\color{Red}{R_3}}\quad\\<br />
Q_4={\color{Red}{R_3}}R_4
\end{matrix}
$$</p>
<p>P17</p>
<h3 id="ä¾æ¬¡æ—‹è½¬å…³èŠ‚2-1-0"><a class="header" href="#ä¾æ¬¡æ—‹è½¬å…³èŠ‚2-1-0">ä¾æ¬¡æ—‹è½¬å…³èŠ‚2ï¼Œ 1ï¼Œ 0</a></h3>
<p><img src="./assets/03-08.png" alt="" /></p>
<p>$$
\begin{matrix}
Q_0={\color{Red}{R_0}}\quad \quad\quad\quad \\
Q_1={\color{Red}{R_0}}R_1 \quad\quad\quad \\
Q_3={\color{Red}{R_0}}R_1R_2R_3\quad \\
Q_4={\color{Red}{R_0}}R_1R_2R_3R_4
\end{matrix}
$$</p>
<p>P20</p>
<h3 id="ç®€åŒ–å…¬å¼ç”¨é€’æ¨çš„å½¢å¼æè¿°"><a class="header" href="#ç®€åŒ–å…¬å¼ç”¨é€’æ¨çš„å½¢å¼æè¿°">ç®€åŒ–å…¬å¼ï¼Œç”¨é€’æ¨çš„å½¢å¼æè¿°</a></h3>
<p><img src="./assets/03-09-1.png" alt="" /></p>
<p>P21</p>
<p>From rotation(local) to orientation(global)</p>
<p>$$
Q_i = Q_{i-1}R_i
$$</p>
<p>From orientation(global) to rotation(local)</p>
<p>$$
R_i = Q^T_{i-1}Q_i
$$</p>
<blockquote>
<p>âœ… è¿™äº› \(Q\) éƒ½æ˜¯å…¨å±€æ—‹è½¬ï¼Œ\(R\) æ˜¯å±€éƒ¨æ—‹è½¬ã€‚</p>
</blockquote>
<h2 id="kinematics-with-position"><a class="header" href="#kinematics-with-position">Kinematics with position</a></h2>
<p>P23</p>
<h3 id="åˆå§‹çŠ¶æ€"><a class="header" href="#åˆå§‹çŠ¶æ€">åˆå§‹çŠ¶æ€</a></h3>
<p><img src="./assets/03-11.png" alt="" /></p>
<blockquote>
<p>âœ… \( ğ’ \)ï¼šå­å…³èŠ‚ä½ç½®åœ¨çˆ¶åæ ‡ç³»ä¸‹çš„åæ ‡ã€‚</p>
</blockquote>
<p>P31</p>
<h3 id="positon-with-pose"><a class="header" href="#positon-with-pose">positon with pose</a></h3>
<p><img src="./assets/03-011.png" alt="" /></p>
<blockquote>
<p>âœ… \(p\) æ˜¯å…¨å±€ä½ç½®ï¼Œ\( ğ’ \) æ˜¯å±€éƒ¨åç§»ã€‚</p>
</blockquote>
<p>P37</p>
<h2 id="forward-kinematics-of-a-chain-summary"><a class="header" href="#forward-kinematics-of-a-chain-summary">Forward Kinematics of a Chain: Summary</a></h2>
<h3 id="position"><a class="header" href="#position">position</a></h3>
<p>Given the rotations of all joints \(R_i\), find the coordinates of \(x_0\) in the global frame \(x\):</p>
<p><img src="./assets/03-14.png" alt="" /></p>
<blockquote>
<p>âœ… \(x_0\) æ˜¯ \(R_4\) åæ ‡ç³»ä¸‹çš„ç‚¹ï¼Œæ±‚å®ƒåœ¨æŸä¸ªçˆ¶åæ ‡ç³»ä¸‹çš„ä½ç½®ã€‚<br />
âœ… \(p\)ï¼šå…³èŠ‚åœ¨å…¨å±€åæ ‡ç³»ä¸‹çš„ä½ç½®<br />
âœ… ç¬¬1æ­¥ï¼šæ ¹æ® \(R_i\) å’Œ \( ğ’ _i\) æ±‚å‡º \(Q_i\) å’Œ \(P_i\)<br />
âœ… ç¬¬2æ­¥ï¼š\(E\) å¯ä»¥æ˜¯ä»»æ„çˆ¶ç»“ç‚¹ï¼Œå…¬å¼éƒ½é€‚ç”¨</p>
</blockquote>
<p>P38</p>
<p><img src="./assets/03-15.png" alt="" /></p>
<blockquote>
<p>âœ… æ˜¯ä¸Šä¸€é¡µçš„å¦ä¸€ç§å†™æ³•ï¼Œä¸éœ€æå‰ç®—å‡ºä¸­é—´å˜é‡ã€‚</p>
</blockquote>
<p>P39</p>
<h3 id="rotation-1"><a class="header" href="#rotation-1">rotation</a></h3>
<p>Given the rotations of all joints \(R_i\), find the coordinates of \(x_0\) relative to the local frame of \(Q_k\):</p>
<p><img src="./assets/03-16.png" alt="" /></p>
<blockquote>
<p>âœ… å·²çŸ¥å…¨å±€åæ ‡ç³»ä¸‹çš„åæ ‡ï¼Œæ±‚ \(Q_k\) ä¸‹çš„åæ ‡ã€‚</p>
</blockquote>
<p>P40</p>
<p><img src="./assets/03-17.png" alt="" /></p>
<blockquote>
<p>âœ… å¯¹åº”ä¸Šä¸€é¡µçš„å¦ä¸€ç§å†™æ³•</p>
</blockquote>
<p>P41</p>
<h2 id="kinematics-of-a-character"><a class="header" href="#kinematics-of-a-character">Kinematics of a Character</a></h2>
<h3 id="éª¨éª¼çš„å‚æ•°åŒ–è¡¨ç¤º"><a class="header" href="#éª¨éª¼çš„å‚æ•°åŒ–è¡¨ç¤º">éª¨éª¼çš„å‚æ•°åŒ–è¡¨ç¤º</a></h3>
<p><img src="./assets/03-18.png" alt="" /></p>
<blockquote>
<p>âœ… æŠŠè§’è‰²å»ºæ¨¡æˆå¤šæ¡å…³èŠ‚é“¾ã€‚</p>
</blockquote>
<p>P43</p>
<p><img src="./assets/03-18-1.png" alt="" /></p>
<blockquote>
<p>âœ… ä»¥ä¸åŒå…³èŠ‚ä¸º rootï¼ŒåŒæ ·æ—‹è½¬ä¼šå¾—åˆ°ä¸åŒæ•ˆæœã€‚</p>
</blockquote>
<p>P45</p>
<h3 id="types-of-joints"><a class="header" href="#types-of-joints">Types of Joints</a></h3>
<p><img src="./assets/03-20.png" alt="" /></p>
<p>P50</p>
<table><thead><tr><th></th><th></th><th></th></tr></thead><tbody>
<tr><td><img src="./assets/03-025-2.png" alt="" /></td><td><img src="./assets/03-023.png" alt="" /></td><td>knee, elbow <br>  \({\color{Red}{1 \text{DoF}}}\)  <br> \(\theta_{\min }\le \theta\le  \theta_{\max } \) <br> hinge joint <br>  revolute joint</td></tr>
<tr><td><img src="./assets/03-025-1.png" alt="" /></td><td><img src="./assets/03-024.png" alt="" /></td><td>hip, shoulder <br>  \({\color{Red}{3 \text{DoF}}}\) <br> \(\theta_{\min }\preceq  \theta \preceq  \theta_{\max } \) <br> ball-and-socket joint</td></tr>
<tr><td></td><td><img src="./assets/03-25.png" alt="" /></td><td>æ‰‹è…•ã€‚å…¶å®æ‰‹è…•ä¸èƒ½è‡ªè½¬ã€‚<br>2 Dof</td></tr>
</tbody></table>
<blockquote>
<p>âœ… å…³èŠ‚çš„è‡ªç”±åº¦æœ€å¤šä¸º3ï¼Œå› ä¸ºä¸èƒ½è‡ªä¸»ç§»åŠ¨ã€‚Hips é™¤å¤–ã€‚
âœ… è‡ªç”±åº¦ï¼šä¸€ä¸ªç‰©ç†ç³»ç»Ÿï¼Œéœ€è¦å¤šå°‘å‚æ•°å¯ä»¥å”¯ä¸€å‡†ç¡®åœ°æè¿°å®ƒçš„çŠ¶æ€ã€‚<br />
âœ… 6 DOFï¼3 å¹³ç§» ï¼‹ 3 æ—‹è½¬ã€‚</p>
</blockquote>
<h3 id="å§¿æ€çš„å‚æ•°åŒ–è¡¨ç¤º-pose-parameters"><a class="header" href="#å§¿æ€çš„å‚æ•°åŒ–è¡¨ç¤º-pose-parameters">å§¿æ€çš„å‚æ•°åŒ–è¡¨ç¤º Pose Parameters</a></h3>
<p>P55</p>
<p>$$
(t_0,R_0,R_1,R_2\dots \dots ) 
$$</p>
<p>$$
\text{root } \mid \text{ internal joints}
$$</p>
<p>joints are typically in the order that every joint precedes its offspring</p>
<p>for \(i\) in joint_list:</p>
<p>$$
\begin{align*}
p_i= &amp; i^,\text{ s parent joint} \\
Q_i=&amp; Q_{pi}R_i \\
x_i= &amp; x_{pi} + Q_{pi}l_i
\end{align*}
$$</p>
<blockquote>
<p>âœ… ä¸€ä¸ªåŠ¨ä½œçš„å‚æ•°åŒ–è¡¨ç¤ºï¼š<br />
âœ… å…¨å±€ä½ç½®ï¼‹root æœå‘ï¼‹å„å…³èŠ‚æ—‹è½¬<br />
âœ… é€šå¸¸è¦æ±‚ï¼Œå…³èŠ‚é¡ºåºä¸ºçˆ¶åœ¨å‰å­åœ¨åï¼Œè¿™æ ·åªé¡»éå†ä¸€éå°±èƒ½å®Œæˆ FK.</p>
</blockquote>
<blockquote>
<p>â“ Q2: how should we allow stretchable bones?<br />
âœ… ç­”ï¼šå¢åŠ å‚æ•°ï¼Œ3 Dof å¢åŠ ä¸º 6 Dof.</p>
</blockquote>
<p>P58</p>
<h3 id="example-motion-data-in-a-file"><a class="header" href="#example-motion-data-in-a-file">Example: motion data in a file</a></h3>
<p>BVH files</p>
<ul>
<li>HIERARCHY: defining <strong>T-pose of</strong> the character</li>
<li>MOTION: root position and <strong>Euler angles</strong> of each joints</li>
</ul>
<p>See: <a href="https://research.cs.wisc.edu/graphics/Courses/cs-838-1999/Jeff/BVH.html">https://research.cs.wisc.edu/graphics/Courses/cs-838-1999/Jeff/BVH.html</a></p>
<p><img src="./assets/03-30-1.png" alt="" /></p>
<p><img src="./assets/03-31-1.png" alt="" /></p>
<p>P59</p>
<h1 id="inverse-kinematics-1"><a class="header" href="#inverse-kinematics-1">Inverse Kinematics</a></h1>
<blockquote>
<p>ğŸ” A. Aristidou, J. Lasenby, Y. Chrysanthou, and A. Shamir. 2018.<br />
<strong>Inverse Kinematics Techniques in Computer Graphics: A Survey.</strong><br />
Computer Graphics Forum</p>
</blockquote>
<p>P61</p>
<h2 id="forward-and-inverse-problems"><a class="header" href="#forward-and-inverse-problems">Forward and Inverse Problems</a></h2>
<p>For a system that can be described by a set of <strong>parameters</strong> \(\theta \), and a <strong>property</strong> ğ’™ of the system given by</p>
<p>$$
x=f(\theta )
$$</p>
<p><strong>Forward problem</strong>:</p>
<ul>
<li>
<p>Given \(\theta \), we need to compute \(x \)</p>
</li>
<li>
<p>Easy to compute since \(f\) is known, the result is unique</p>
</li>
<li>
<p>DoF of \( \theta \) is often much larger than that of \(x \). We cannot easily tune \(\theta \) to achieve a specific value of \(x\). </p>
</li>
</ul>
<p><strong>Inverse problem</strong>:</p>
<ul>
<li>
<p>Given \(x \), we need to find a set of valid parameters \(\theta \) such that\(x=f(\theta) \)</p>
</li>
<li>
<p>Often need to solve a difficult <strong>nonlinear</strong> equation, which can have <strong>multiple</strong> solutions</p>
</li>
<li>
<p>\(x\) is typically meaningful and can be set in intuitive ways</p>
</li>
</ul>
<p>P62</p>
<h2 id="inverse-kinematicsé—®é¢˜æè¿°"><a class="header" href="#inverse-kinematicsé—®é¢˜æè¿°">Inverse Kinematicsé—®é¢˜æè¿°</a></h2>
<p><img src="./assets/03-32.png" alt="" /></p>
<p>Given the position of the end-effector \(x\), Compute the joint rotations \(R_i\)</p>
<p>P64</p>
<blockquote>
<p>âœ… å¤§éƒ¨åˆ†æƒ…å†µä¸‹IKé—®é¢˜æ˜¯å¤šè§£é—®é¢˜</p>
</blockquote>
<p><img src="./assets/03-33.png" alt="" /></p>
<p>P68</p>
<h2 id="two-joint-ik"><a class="header" href="#two-joint-ik">two-joint IK</a></h2>
<h3 id="step-1-rotate-joint-1-such-that"><a class="header" href="#step-1-rotate-joint-1-such-that">Step 1: Rotate joint 1 such that</a></h3>
<p><img src="./assets/03-35.png" alt="" /></p>
<p>$$
||l_{ox}||=||l_{02}||
$$</p>
<blockquote>
<p>âœ… ä½¿ç”¨ä½™å¼¦å…¬å¼</p>
</blockquote>
<h3 id="step-2-rotate-joint-0-such-that"><a class="header" href="#step-2-rotate-joint-0-such-that">Step 2: Rotate joint 0 such that</a></h3>
<p><img src="./assets/03-36.png" alt="" /></p>
<p>$$
l_{ox}=l_{02}
$$</p>
<blockquote>
<p>âœ… å‰ä¹˜å¾—åˆ°æ—‹è½´ï¼Œç‚¹ä¹˜å¾—åˆ°æ—‹è½¬è§’ã€‚</p>
</blockquote>
<h3 id="step-3-rotate-joint-0-around-l_ox-if-necessary"><a class="header" href="#step-3-rotate-joint-0-around-l_ox-if-necessary">Step 3: Rotate joint 0 around \(l_{ox}\) if necessary</a></h3>
<p><img src="./assets/03-37.png" alt="" /></p>
<h2 id="multi-joint-ik"><a class="header" href="#multi-joint-ik">Multi Joint IK</a></h2>
<p>P72</p>
<p>æœºæ¢°è‡‚åœºæ™¯ï¼Œå…³èŠ‚æœ‰å¤šä¸ªï¼ŒæŒ‡å®šæœ«ç«¯ç»“ç‚¹çš„ä½ç½®å’Œæœå‘</p>
<p>$$
x=f(\theta ) \\
Q=Q(\theta )
$$</p>
<p><img src="./assets/03-38.png" alt="" /></p>
<blockquote>
<p>âœ… æ§åˆ¶æœ«ç«¯ç‚¹çš„æœå‘æ¯”è¾ƒç®€å•ï¼Œä½†æ§åˆ¶æœ«ç«¯ç‚¹çš„ä½ç½®æ¯”è¾ƒéš¾ï¼Œå› æ­¤é‡ç‚¹è€ƒè™‘å¦‚ä½•æ§åˆ¶æœ«ç«¯ç‚¹çš„ä½ç½®</p>
</blockquote>
<p>P74</p>
<h3 id="ik-as-an-optimization-problem"><a class="header" href="#ik-as-an-optimization-problem">IK as an Optimization Problem</a></h3>
<p><img src="./assets/03-39-1.png" alt="" /></p>
<p>P75</p>
<p>Find \(\theta \)  to optimize</p>
<p>$$
\min_{\theta } \frac{1}{2} ||f(\theta )-\tilde{x} ||^2_2
$$</p>
<blockquote>
<p>âœ… ç”¨è¿­ä»£çš„æ–¹æ³•ï¼Œä»å½“å‰ motion å‡ºå‘ï¼Œä¼˜åŒ–å‡ºç›®æ ‡ motion.</p>
</blockquote>
<p>P88</p>
<h3 id="ccdik"><a class="header" href="#ccdik">CCDIK</a></h3>
<h4 id="cyclic-coordinate-descent-ccd"><a class="header" href="#cyclic-coordinate-descent-ccd">Cyclic Coordinate Descent (CCD)</a></h4>
<p>Update parameters along each axis of the coordinate system</p>
<p>Iterate cyclically through all axes</p>
<p><img src="./assets/03-40.png" alt="" /></p>
<p>P90</p>
<h4 id="cyclic-coordinate-descent-ccd-ik"><a class="header" href="#cyclic-coordinate-descent-ccd-ik">Cyclic Coordinate Descent (CCD) IK</a></h4>
<blockquote>
<p>âœ… å‰ä¹˜å¾—åˆ°æ—‹è½¬è½´ï¼Œç‚¹ä¹˜å¾—åˆ°æ—‹è½¬è§’åº¦ã€‚</p>
</blockquote>
<table><thead><tr><th></th><th></th></tr></thead><tbody>
<tr><td>Rotate joint 3 such that \(ğ’_{34}\) points towards \(\tilde{x}\)</td><td><img src="./assets/03-41.png" alt="" /></td></tr>
<tr><td>Rotate joint 2 such that \(ğ’_{24}\) points towards \(\tilde{x}\)</td><td><img src="./assets/03-43.png" alt="" /></td></tr>
<tr><td>Rotate joint 1 such that \(ğ’_{14}\) points towards \(\tilde{x}\)</td><td><img src="./assets/03-44.png" alt="" /></td></tr>
<tr><td>Rotate joint 0 such that \(ğ’_{14}\) points towards \(\tilde{x}\)</td><td><img src="./assets/03-45.png" alt="" /></td></tr>
<tr><td>Rotate joint 3 such that \({l}'_{34}\) points towards \(\tilde{x}\)</td><td><img src="./assets/03-46.png" alt="" /></td></tr>
<tr><td>â€¦â€¦</td><td></td></tr>
</tbody></table>
<p>Iteratively rotation each joint to make the end-effector align with vector between the joint and the target</p>
<p>Easy to implement, very fast</p>
<p>The â€œfirstâ€ joint moves more than the others May take <strong>many iterations</strong> to <strong>converge</strong> Result can be sensitive to the <strong>initial solution</strong></p>
<blockquote>
<p>âœ… ä¸€ä¸ªåŠ¨ä½œåºåˆ—åš CCDï¼Œå¯èƒ½ç»“æœä¸ç¨³å®šï¼Œæœ‰è·³å˜ã€‚<br />
âœ… å‰é¢ä¾‹å­æ˜¯ 3210 çš„è°ƒæ•´é¡ºåºï¼Œä¹Ÿå¯ä»¥æ˜¯ 0123 çš„é¡ºåºã€‚<br />
âœ… å…ˆç§»åˆ°çš„å…³èŠ‚è°ƒæ•´å¹…åº¦ä¼šå¤§ä¸€ç‚¹ï¼Œæ‰€ä»¥ä¸€èˆ¬ä»æœ«ç«¯å¼€å§‹ã€‚</p>
</blockquote>
<p>P105</p>
<h2 id="gradient-descent"><a class="header" href="#gradient-descent">Gradient Descent</a></h2>
<p>CCDä¸‹é™æ²¡æœ‰è€ƒè™‘ç›®æ ‡å‡½æ•°çš„æ€§è´¨ï¼Œè€ƒè™‘ç›®æ ‡å‡½æ•°çš„æ€§è´¨å¯ä»¥å¾—å‡ºä¸‹é™æ›´å¿«çš„æ–¹æ³•ã€‚</p>
<blockquote>
<p>âœ… å…³äºæ¢¯åº¦ä¸‹é™æ³•è·³è¿‡ã€‚</p>
</blockquote>
<p>é’ˆå¯¹ç›®æ ‡å‡½æ•°</p>
<p>$$
\min_{\theta } \frac{1}{2} ||f(\theta )-\tilde{x} ||^2_2
$$</p>
<p>å…¶æ¢¯åº¦ä¸ºï¼š</p>
<p>$$
\begin{align*}
\nabla_\theta F(\theta ^i)= &amp; (\frac{\partial f}{\partial \theta }(\theta ^i))^T(f(\theta ^i)-\tilde{x})\\
= &amp; J^T \Delta<br />
\end{align*}
$$</p>
<blockquote>
<p>âœ… \(J\) æ˜¯ JacobiaçŸ©é˜µï¼Œ \( \Delta \) æ˜¯ä½ç½®å·®</p>
</blockquote>
<p>P106</p>
<p>å› ä¸ºæ›´æ–°å‡½æ•°ä¸ºï¼š</p>
<p>$$
\theta ^{i+1}=\theta ^i-\alpha J^T\Delta
$$</p>
<p>$$
J= \frac{\partial f}{\partial \theta }=(\frac{\partial f}{\partial \theta_0 }\frac{\partial f}{\partial \theta_1 }\dots \frac{\partial f}{\partial \theta_n } ) 
$$</p>
<p>Jæ˜¯ä¸€ä¸ª3*Nçš„çŸ©é˜µï¼ŒNä»£è¡¨å…³èŠ‚æ•°ã€‚<br />
<img src="./assets/03-46-2.png" alt="" /></p>
<p>æ€ä¹ˆè®¡ç®—Jï¼Ÿ<br />
æ–¹æ³•ä¸€ï¼šä½¿ç”¨machine learning frameworkçš„autogradåŠŸèƒ½<br />
æ–¹æ³•äºŒï¼šæœ‰é™å·®åˆ†<br />
æ–¹æ³•ä¸‰ï¼šGeometric Approach</p>
<p>P114</p>
<h3 id="geometric-approach"><a class="header" href="#geometric-approach">Geometric Approach</a></h3>
<h4 id="é—®é¢˜æè¿°-4"><a class="header" href="#é—®é¢˜æè¿°-4">é—®é¢˜æè¿°</a></h4>
<p><em>Assuming all joints are hinge joint</em><br />
æ±‚å…³èŠ‚ 1 æ—‹è½¬è½´ \(a_1\)ï¼Œå¯¹ \(x\) ä½ç§»çš„å½±å“</p>
<p><img src="./assets/03-46-1.png" alt="" /></p>
<h4 id="è®¡ç®—è¿‡ç¨‹-1"><a class="header" href="#è®¡ç®—è¿‡ç¨‹-1">è®¡ç®—è¿‡ç¨‹</a></h4>
<p>$$
{x}' -x=(\sin \delta \theta _i)a_i\times r_i+(1-\cos \delta \theta _i)a_i\times(a_i\times r_i)
$$</p>
<p>$$
\frac{ \partial f }{\partial \theta _ i} = \lim _ {\delta \theta _ i \to 0} \frac{{x}'-x }{\delta \theta _ i}= a _ i\times r _i 
$$</p>
<p>P117</p>
<h4 id="æ›´é€šç”¨çš„åœºæ™¯--ball-joints"><a class="header" href="#æ›´é€šç”¨çš„åœºæ™¯--ball-joints">æ›´é€šç”¨çš„åœºæ™¯- ball joints</a></h4>
<p>â“ How to deal with ball joints?<br />
A ball joint parameterized as Euler angles:</p>
<p>$$ 
ğ‘…_ğ‘– = ğ‘…_{ğ‘–ğ‘¥}ğ‘…_{ğ‘–ğ‘¦}ğ‘…_{ğ‘–ğ‘§}
$$</p>
<p>can be considered as a compound joint with 
three hinge joints</p>
<p><img src="./assets/03-46-4.png" alt="" /></p>
<blockquote>
<p>âœ… ä¸€ä¸ªball jointå¯ä»¥çœ‹ä½œæ˜¯3ä¸ªhint jointã€‚å› æ­¤å JçŸ©é˜µçš„3åˆ—ã€‚</p>
</blockquote>
<p>ä¹Ÿå¯ä»¥å†™æˆè¿™ç§å½¢å¼ï¼š</p>
<p>$$
\frac{ \partial f }{\partial \theta _ {i\ast } } = a _ {i\ast } \times r _ i
$$</p>
<p>få¯¹æŸä¸€ä¸ªæ¬§æ‹‰è§’çš„å¯¼æ•°ï¼Œç­‰äºè¿™ä¸ªæ¬§æ‹‰è§’çš„è½´å‰ä¹˜ä¸Šæœ«ç«¯ç‚¹åˆ°å…³èŠ‚ç‚¹çš„è·ç¦»ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªçš„æ—‹è½¬è½´aæ˜¯åœ¨ä¸–ç•Œåæ ‡ç³»ä¸‹çš„è¡¨ç¤ºï¼Œå› æ­¤è¦æœ‰ä¸€ä¸ªåæ ‡ç³»çš„è½¬æ¢ã€‚</p>
<p>$$
\begin{align*}
ğ’‚_{ğ‘–ğ‘¥} &amp; =ğ‘„_{ğ‘–âˆ’1}ğ’†_ğ‘¥  \\
ğ’‚_{ğ‘–ğ‘¦}&amp; = ğ‘„_{ğ‘–âˆ’1}ğ‘…_{ğ‘–ğ‘¥}ğ’†_ğ‘¦\\
ğ’‚_{ğ‘–ğ‘§} &amp;= ğ‘„_{ğ‘–âˆ’1}ğ‘…_{ğ‘–ğ‘¥}ğ‘…_{ğ‘–ğ‘¦}ğ’†_ğ‘§
\end{align*}
$$</p>
<blockquote>
<p>â“ é—®ï¼šCan we parameterize a ball joint using axis-angle \(\theta u\) and compute Jacobian as</p>
</blockquote>
<p>$$
\begin{matrix}
\frac{\partial f}{\partial \theta _i} =\theta u\times r_i &amp; ???
\end{matrix}
$$</p>
<blockquote>
<p>âœ… ç­”ï¼šä¸å¯ä»¥ã€‚Jacobian for axis-angle representation has a rather complicated formulationâ€¦</p>
</blockquote>
<p>P121</p>
<h4 id="jacobian-transpose--gradient-descent"><a class="header" href="#jacobian-transpose--gradient-descent">Jacobian Transpose / Gradient Descent</a></h4>
<p>First-order approach, convergence can be slow Need to re-compute Jacobian at each iteration</p>
<blockquote>
<p>âœ… æ€ä¹ˆæ±‚ \(J\)ï¼Œè¿™é‡Œè®²äº† 3 ç§æ–¹æ³•ï¼šï¼ˆ1ï¼‰backward æ¡†æ¶ï¼ˆ2ï¼‰å·®åˆ†ï¼ˆ3ï¼‰å‡ ä½•è®¡ç®—ã€‚å®é™…ä¸Šç›´æ¥ç”¨ 1 å¯ä»¥è§£å†³ï¼Œä¸éœ€è¦è‡ªå·±å»ç®—ï¼Œå› æ­¤è·³è¿‡ã€‚<br />
âœ… ç‰¹ç‚¹ï¼šï¼ˆ1ï¼‰è¿­ä»£æ¬¡æ•°æ¯” CCD å°‘ï¼ˆ2ï¼‰è®¡ç®—é‡æ¯” CCD å¤§ã€‚</p>
</blockquote>
<p>P122</p>
<blockquote>
<p>âœ… æ•°å€¼æ’å€¼ç®—æ³•è§ GAMES102.</p>
</blockquote>
<p>P124</p>
<h2 id="quadratic-programming-äºŒæ¬¡è§„åˆ’é—®é¢˜"><a class="header" href="#quadratic-programming-äºŒæ¬¡è§„åˆ’é—®é¢˜">Quadratic Programming äºŒæ¬¡è§„åˆ’é—®é¢˜</a></h2>
<blockquote>
<p>âœ… è¿™å‡ é¡µä»‹ç»äºŒæ¬¡å‡½æ•°æ±‚æå€¼çš„é—®é¢˜ã€‚</p>
</blockquote>
<p>$$
\min_{\theta } F(\theta )=\frac{1}{2} \theta ^TA\theta +b^T\theta 
$$</p>
<p>where \(A\) is positive definite:</p>
<p>$$
A=A^T,\theta ^TA\theta \ge 0 \text{ for any } \theta 
$$</p>
<p>P126</p>
<h3 id="å…¬å¼ç›´æ¥æ±‚è§£"><a class="header" href="#å…¬å¼ç›´æ¥æ±‚è§£">å…¬å¼ç›´æ¥æ±‚è§£</a></h3>
<p>$$
\begin{matrix}
\text{Gradient}: \nabla_\theta  F(\theta )=A\theta +b \\
\text{Optimality condition}: \nabla_\theta  F(\theta ^\ast )=0\\
{\color{Blue} \Downarrow } \\
\theta ^\ast =-A^{-1}b
\end{matrix}
$$</p>
<blockquote>
<p>âœ… äºŒæ¬¡å‡½æ•°çš„æå€¼ç‚¹å¯ä»¥ç›´æ¥ä»å…¬å¼æ±‚å‡ºæ¥</p>
</blockquote>
<p>P127</p>
<h3 id="gauss-newton-method"><a class="header" href="#gauss-newton-method">Gauss-Newton Method</a></h3>
<blockquote>
<p>âœ… IKé—®é¢˜ä¹Ÿå¯ä»¥è½¬åŒ–ä¸ºäºŒæ¬¡å‡½æ•°æ±‚æå€¼çš„é—®é¢˜</p>
</blockquote>
<p>$$
F(\theta )=\frac{1}{2} ||f(\theta )-\tilde{x} ||^2_2
$$</p>
<p><img src="./assets/03-47.png" alt="" /></p>
<p>Consider the first-order approximation of \(f(\theta)\) at \(\theta^0\)</p>
<blockquote>
<p>âœ… æŠŠ \(f(\theta )\) åœ¨ \(\theta ^{\circ} \) å¤„ä¸€é˜¶æ³°å‹’å±•å¼€ã€‚</p>
</blockquote>
<p>$$
\begin{align*}
f(\theta)\approx &amp; f(\theta^0) + \frac{\partial f}{\partial \theta} (\theta^0)(\theta-\theta^0) \\
= &amp; f(\theta^0)+J(\theta-\theta^0)
\end{align*}
$$</p>
<p>P128</p>
<blockquote>
<p>âœ… æŠŠå®ƒä»£å…¥ç›®æ ‡å‡½æ•°ã€‚</p>
</blockquote>
<p>\begin{align*}
f(\theta)\approx  &amp; \frac{1}{2}||f(\theta^0)+J(\theta -\theta ^0)-\tilde{x}||^2_2    \\
= &amp;\frac{1}{2} (\theta -\theta ^0)^TJ^TJ(\theta -\theta ^0)\\
&amp; +(\theta -\theta ^0)^TJ^T(f(\theta ^0)-\tilde{x})+c 
\end{align*}</p>
<p>P129</p>
<p>first-order optimality condition</p>
<blockquote>
<p>âœ… ä»¤ \((\nabla F (\theta ))^T=0\)</p>
</blockquote>
<p>$$
\begin{matrix}
f(\theta)\approx  \frac{1}{2}||f(\theta^0)+J(\theta -\theta ^0)-\tilde{x}||^2_2 \\
\Downarrow \\
(\nabla F (\theta ))^T=J^TJ(\theta-\theta^0)+J^T(f(\theta^0)-\tilde{x} )=0
\end{matrix}
$$</p>
<p>P133<br />
$$
J^TJ(\theta-\theta^0)=-J^T\Delta 
$$</p>
<h4 id="if-jtj-ä¸å¯é€†"><a class="header" href="#if-jtj-ä¸å¯é€†">if \(J^TJ\) ä¸å¯é€†</a></h4>
<blockquote>
<p>âœ… \(J\) çš„ç»´åº¦æ˜¯ \(3\times N\)ï¼Œå› æ­¤ \(J^TJ\) ä¸å¯é€†ã€‚</p>
</blockquote>
<p>\(J^TJ\) is \({\color{Red} {\text{NOT}}}\) invertible, but \(JJ^T\) can be invertible</p>
<p>P134<br />
å› æ­¤åšä»¥ä¸‹è½¬åŒ–ï¼š</p>
<p><img src="./assets/03-042.png" alt="" /></p>
<blockquote>
<p>âœ… \(\Delta\) æ˜¯å½“å‰å’Œç›®æ ‡çš„æœ«ç«¯ç‚¹ä½ç½®ä¹‹å·®ã€‚</p>
</blockquote>
<p>P135</p>
<p>$$
J(\theta-\theta^0)=\tilde{x} -f(\theta^0)
$$</p>
<p>P137</p>
<p>$$
\begin{align*}
\theta = &amp; \theta ^0-J^+\Delta \\
= &amp; \theta ^0-J^T(JJ^T)^{-1}\Delta
\end{align*}
$$</p>
<p>\(J^+\)è¡¨ç¤ºJçš„(Moore-Penrose) Pseudoinverse</p>
<p>P138</p>
<h4 id="if-jtj-å¯é€†"><a class="header" href="#if-jtj-å¯é€†">if \(J^TJ\) å¯é€†</a></h4>
<p>$$
J^TJ(\theta-\theta^0)=-J^T\Delta 
$$</p>
<p>If \(J^TJ\) is invertible, we have</p>
<p>$$
\theta = \theta^0 - (J^TJ)^{-1}J^T\Delta
$$</p>
<p>but when can \(J^TJ\) be invertible?</p>
<p>P141</p>
<blockquote>
<p>âœ… ç­”ï¼šæ”¹å˜IKçš„çº¦æŸæ¡ä»¶ï¼ˆä¾‹å¦‚å¢åŠ ä¸­é—´å…³èŠ‚çš„ä½ç½®è¦æ±‚ï¼‰å’Œè‡ªç”±åº¦ï¼ˆä¾‹å¦‚é™åˆ¶å…³èŠ‚çš„è‡ªç”±åº¦ï¼‰ï¼Œå¯æ”¹å˜ \(J\) çš„å½¢çŠ¶ä¸ºæ–¹é˜µæˆ–é«˜ç˜¦é˜µï¼Œæ­¤æ—¶ \(J^TJ\) å¯é€†ï¼Œåˆ™æ¢ä¸€ç§æ–¹å¼æ±‚é€†ã€‚</p>
</blockquote>
<p>P143</p>
<h4 id="å¯¹æ¯”"><a class="header" href="#å¯¹æ¯”">å¯¹æ¯”</a></h4>
<p><img src="./assets/03-50.png" alt="" /></p>
<blockquote>
<p>âœ… å·¦ï¼šæ¬ çº¦æŸï¼Œå³ï¼šè¿‡çº¦æŸã€‚<br />
âœ… ç”±äºè¿™ä¸ªæ–¹æ³•çš„æœ¬è´¨æ˜¯æŠŠé«˜åº¦éçº¿æ€§çš„å‡½æ•°åšäº†çº¿æ€§åŒ–ï¼Œæ‰€ä»¥åªæ˜¯åœ¨å½“å‰ä½ç½®é™„è¿‘æ‰æœ‰æ•ˆï¼Œè¿œäº†è¯¯å·®å°±ä¼šéå¸¸å¤§ã€‚å› æ­¤å¢åŠ learning rateã€‚</p>
</blockquote>
<p>P145</p>
<p>Usually faster than gradient descent/Jacobian transpose method.</p>
<p>Any problem? \(JJ^T/J^TJ\) can be (near) singular!</p>
<blockquote>
<p>âœ… å¿«ä¸€ç‚¹æ˜¯å› ä¸º \(J^ï¼‹\) æ˜¯è¿‘ä¼¼çš„ \(J\)ï¼Œè®¡ç®—é‡è¾ƒå°ï¼Œé—®é¢˜æ˜¯å¯èƒ½å¾—åˆ°ä¸€ä¸ªé”™å¾ˆè¿œçš„ \(J^ï¼‹\)ï¼Œå¯¼è‡´ç»“æœä¸ç¨³å®šã€‚</p>
</blockquote>
<p>P147</p>
<h3 id="damped-jacobian-inverse-method"><a class="header" href="#damped-jacobian-inverse-method">Damped Jacobian Inverse Method</a></h3>
<blockquote>
<p>âœ… ä¸Šä¸€é¡µçš„é—®é¢˜æ˜¯ä¼ªé€†\(J^ï¼‹\) å¼•å…¥çš„ä¸ç¨³å®šã€‚<br />
âœ… è§£å†³æ–¹æ³•ï¼šå¼• \(\lambda\) é˜»å°¼é¡¹</p>
</blockquote>
<p>$$
J^\ast =J^T(JJ^T+\lambda I)^{-1}
$$</p>
<p>$$
J^\ast =(J^TJ+\lambda I)^{-1}J^T
$$</p>
<p>P148<br />
Also called Levenberg-Marquardt algorithm</p>
<blockquote>
<p>âœ… å¼• \(\lambda\) é˜»å°¼é¡¶åï¼Œä¸¤ç§æ–¹å¼çš„è®¡ç®—ç»“æœç›¸åŒã€‚<br />
âœ… å½“ \(\lambda\) å¾ˆå¤§æ—¶ï¼Œæ­¤æ–¹æ³•ç­‰ä»·äºæ¢¯åº¦ä¸‹é™æ³•ã€‚</p>
</blockquote>
<p>P149</p>
<h4 id="lambda-çš„å‡ ä½•æ„ä¹‰"><a class="header" href="#lambda-çš„å‡ ä½•æ„ä¹‰">\(\lambda\) çš„å‡ ä½•æ„ä¹‰</a></h4>
<blockquote>
<p>âœ… ç›¸å½“äºæ­£åˆ™é¡¹
âœ… è¿›ä¸€æ­¥åœ°ï¼Œåˆ†åˆ«ç»™æ¯ä¸ªå…³èŠ‚ç§»åŠ¨æƒé‡ã€‚<br />
âœ… æƒé‡è¶Šå¤§ï¼Œç§»åŠ¨è¶Šå°ã€‚</p>
</blockquote>
<p><img src="./assets/03-51.png" alt="" /></p>
<p>P152</p>
<h2 id="character-å…¨èº«ik"><a class="header" href="#character-å…¨èº«ik">Character å…¨èº«IK</a></h2>
<p><img src="./assets/03-052.png" alt="" /></p>
<blockquote>
<p>âœ… å…¨èº« IKï¼Œä¸åŒé“¾æ¡ä¸Šéƒ½æœ‰ç›®æ ‡ç‚¹ã€‚<br />
âœ… å¯ä»¥åŒæ—¶ä¼˜åŒ–æ‰€æœ‰é“¾ï¼Œæˆ–é€‰ä¸€ä¸ªæˆ–é€‰ä¸€äº›ã€‚<br />
âœ… IK è¦æ›´æ–°å“ªå…³èŠ‚ä¹Ÿå¯ä»¥è‡ªç”±è®¾å®šã€‚</p>
</blockquote>
<p>P156</p>
<h1 id="æ€»ç»“-2"><a class="header" href="#æ€»ç»“-2">æ€»ç»“</a></h1>
<blockquote>
<p>âœ… IKé—®é¢˜å¯ä»¥ä½¿ç”¨ä¼˜åŒ–æ–¹æ³•ï¼Œä¸åŒä¼˜åŒ–æ–¹æ³•å¯¹åº”ä¸åŒ IK æ–¹æ³•ï¼Œä¾‹å¦‚ï¼š<br />
CCD â†’ CCDIK<br />
æ¢¯åº¦ä¸‹é™æ³• â†’ Jacobian transpose<br />
Gaussian â†’ Jacobian Inverse<br />
âœ… IKé—®é¢˜å¯ä»¥ä½¿ç”¨å¯å‘å¼æ–¹æ³•ï¼Œä¾‹å¦‚FABRIK
Andreas Aristidou and Joan Lasenby. 2011.<br />
ğŸ” <strong>FABRIK: A fast, iterative solver for the Inverse Kinematics problem.</strong><br />
<em>Graphical Models</em></p>
</blockquote>
<p>P158</p>
<blockquote>
<p>âœ… Slerp ç»“åˆ Sbline.<br />
âœ… 50 fps â†’ 60 fpsï¼šå…ˆæ’å€¼ï¼Œå†é‡‡æ ·<br />
âœ… æƒ¯æ€§æ’å€¼ï¼šUE åŸºäº SPD æ±‚çº¦æŸæ¥åš IK<br />
âœ… å‚è€ƒ Darel Holden åšå®¢</p>
</blockquote>
<hr />
<blockquote>
<p>æœ¬æ–‡å‡ºè‡ªCaterpillarStudyGroupï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>
<p>https://caterpillarstudygroup.github.io/GAMES105_mdbook/</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><p>P3</p>
<h1 id="outline-2"><a class="header" href="#outline-2">Outline</a></h1>
<ul>
<li>
<p>Character Kinematics (cont.)</p>
<ul>
<li>Motion Retargeting</li>
<li>Full-body IK</li>
</ul>
</li>
<li>
<p>Keyframe Animation</p>
<ul>
<li>Interpolation and splines</li>
</ul>
</li>
</ul>
<p>P4</p>
<h2 id="recap-character-kinematics"><a class="header" href="#recap-character-kinematics">Recap: Character Kinematics</a></h2>
<p><img src="./assets/04-01.png" alt="" /></p>
<p>P15</p>
<h1 id="reference-pose"><a class="header" href="#reference-pose">Reference Pose</a></h1>
<p>{ \(ğ‘…_ğ‘– = ğ¼\) }<br />
The pose with zero / identity rotation Bind pose / Reference pose</p>
<blockquote>
<p>â— reference poseä¸ä¸€å®šæ˜¯Tposeã€‚</p>
</blockquote>
<p>P16</p>
<h2 id="t-pose-a-pose"><a class="header" href="#t-pose-a-pose">T-Pose? A-Pose?</a></h2>
<p><img src="./assets/04-04.png" alt="" /></p>
<p><img src="./assets/04-05.png" alt="" /></p>
<blockquote>
<p>âœ… å¸¸è§çš„reference poseä¸€èˆ¬ä¸ºAposeæˆ–è€…Tposeã€‚<br />
âœ… å¯¹äºéª¨éª¼åŠ¨ç”»æ¥è®²ï¼Œ\(A\) æˆ– \(T\) éƒ½ä¸€æ ·ã€‚<br />
âœ… å¯¹äºéª¼éª¼ç»‘å®šä¸è’™çš®æ¥è®²ï¼Œæ›´å€¾å‘äº\(A\)ã€‚å› ä¸º \(A\) çš„è‚©è†€æ˜¯è‡ªç„¶çŠ¶æ€ã€‚</p>
</blockquote>
<p>P19</p>
<h2 id="ç‰¹æ®Šçš„reference-pose"><a class="header" href="#ç‰¹æ®Šçš„reference-pose">ç‰¹æ®Šçš„reference pose</a></h2>
<table><thead><tr><th></th><th></th><th></th></tr></thead><tbody>
<tr><td><img src="./assets/04-06.png" alt="" /></td><td><img src="./assets/04-07.png" alt="" /></td><td><img src="./assets/04-08.png" alt="" /> <br> âœ… è¿™ä¸ªåŠ¨ä½œè·Ÿå»ºæ¨¡å¸ˆå»ºæ¨¡æ—¶çš„åŠ¨ä½œé•œåƒæ“ä½œæœ‰å…³ã€‚</td></tr>
<tr><td></td><td></td><td></td></tr>
</tbody></table>
<p>P23</p>
<h2 id="ä¸åŒreference-poseä¼šå¼•å…¥çš„é—®é¢˜"><a class="header" href="#ä¸åŒreference-poseä¼šå¼•å…¥çš„é—®é¢˜">ä¸åŒreference poseä¼šå¼•å…¥çš„é—®é¢˜</a></h2>
<p><img src="./assets/04-09.png" alt="" /></p>
<blockquote>
<p>âœ… ç›¸åŒçš„å§¿æ€å‚æ•°æ”¾åœ¨ä¸åŒçš„å‚è€ƒå§¿æ€ä¸‹å‘ˆç°å‡ºçš„å§¿æ€ä¸åŒã€‚
âœ… è§£å†³æ–¹æ³•ï¼šRetargeting</p>
</blockquote>
<p>P29</p>
<h1 id="retargeting-between-reference-poses"><a class="header" href="#retargeting-between-reference-poses"><strong>Retargeting</strong> between reference poses</a></h1>
<p><img src="./assets/04-10.png" alt="" /></p>
<blockquote>
<p>âœ… è®©ä¸åŒå‚è€ƒå§¿æ€çš„è§’è‰²åšå‡ºåŒæ ·çš„åŠ¨ä½œï¼Œæ ¹æ® \(R_A\) æ±‚ \(R_B\).<br />
âœ… é‡å®šå‘è¿˜æœ‰å…¶å®ƒé—®é¢˜ï¼Œä¾‹å¦‚å…³èŠ‚é•¿åº¦ã€ç©¿æ¨¡ã€‚</p>
</blockquote>
<p>P33</p>
<h2 id="retargeting-for-a-single-object"><a class="header" href="#retargeting-for-a-single-object">Retargeting for a single object</a></h2>
<h3 id="é—®é¢˜åˆ†æ"><a class="header" href="#é—®é¢˜åˆ†æ">é—®é¢˜åˆ†æ</a></h3>
<p><img src="./assets/04-12.png" alt="" /></p>
<h3 id="å…¬å¼æ¨å¯¼"><a class="header" href="#å…¬å¼æ¨å¯¼">å…¬å¼æ¨å¯¼</a></h3>
<p><img src="./assets/04-13.png" alt="" /></p>
<blockquote>
<p>âœ… æŠŠ B å…ˆè½¬åˆ° A çš„å§¿æ€ï¼Œå†åšæŒ‡å®šåŠ¨ä½œã€‚</p>
</blockquote>
<p>P45</p>
<h2 id="retargeting-for-a-chain-of-links"><a class="header" href="#retargeting-for-a-chain-of-links">Retargeting for a chain of links</a></h2>
<h3 id="é—®é¢˜åˆ†æ-1"><a class="header" href="#é—®é¢˜åˆ†æ-1">é—®é¢˜åˆ†æ</a></h3>
<p><img src="./assets/04-14.png" alt="" /></p>
<blockquote>
<p>âœ… ä¸¤ä¸ªå…³èŠ‚çš„åœºæ™¯</p>
</blockquote>
<h3 id="å…¬å¼æ¨å¯¼-1"><a class="header" href="#å…¬å¼æ¨å¯¼-1">å…¬å¼æ¨å¯¼</a></h3>
<p>P49</p>
<p><img src="./assets/04-15.png" alt="" /></p>
<h3 id="ç»“è®º-6"><a class="header" href="#ç»“è®º-6">ç»“è®º</a></h3>
<p>P51</p>
<p><img src="./assets/04-16.png" alt="" /></p>
<p>P52</p>
<h2 id="retargeting-between-reference-poses-1"><a class="header" href="#retargeting-between-reference-poses-1"><strong>Retargeting</strong> between reference poses</a></h2>
<h3 id="é—®é¢˜åˆ†æ-2"><a class="header" href="#é—®é¢˜åˆ†æ-2">é—®é¢˜åˆ†æ</a></h3>
<p><img src="./assets/04-17.png" alt="" /></p>
<p>P53</p>
<h3 id="ç»“è®º-7"><a class="header" href="#ç»“è®º-7">ç»“è®º</a></h3>
<p><img src="./assets/04-18.png" alt="" /></p>
<p>P101</p>
<h1 id="keyframe-animation-and-interpolation"><a class="header" href="#keyframe-animation-and-interpolation">Keyframe Animation and Interpolation</a></h1>
<blockquote>
<p>âœ… Keyframe Animationè·³è¿‡</p>
</blockquote>
<p>P106</p>
<h2 id="interpolation-2"><a class="header" href="#interpolation-2">Interpolation</a></h2>
<ul>
<li>Given a set of data pairs \(D=\){\((x_i,y_i)\mid i=0,\dots ,N\)} find a function \(f(x)\) such that</li>
</ul>
<p>P107</p>
<p><img src="./assets/04-26.png" alt="" /></p>
<p>å¸¸è§çš„å·®å€¼æ–¹æ³•æœ‰Linear Interpolationã€Polynomial Interpolationç­‰ã€‚è¯¦è§GAMES102ã€‚</p>
<p>P114</p>
<h2 id="smoothness"><a class="header" href="#smoothness">Smoothness</a></h2>
<p><img src="./assets/04-28.png" alt="" /></p>
<h2 id="interpolation-of-rotations"><a class="header" href="#interpolation-of-rotations">Interpolation of Rotations</a></h2>
<p>P154</p>
<p><img src="./assets/04-30.png" alt="" /></p>
<p>P157<br />
SLERP for Quaternions</p>
<p>$$
q_t=\frac{\sin[(1-t)\theta ]}{\sin \theta } q_0 + \frac{\sin t \theta }{\sin \theta }q_1
$$</p>
<p>$$
\cos \theta = q_0 \cdot q_1
$$</p>
<p>Constant rotational speed, but only â€œlinearâ€ interpolation</p>
<p>P158</p>
<blockquote>
<p>ğŸ” Animating rotation with quaternion curves.<br />
Ken Shoemake. 1985<br />
<em>SIGGRAPH Computer Graphics,</em></p>
</blockquote>
<hr />
<blockquote>
<p>æœ¬æ–‡å‡ºè‡ªCaterpillarStudyGroupï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>
<p>https://caterpillarstudygroup.github.io/GAMES105_mdbook/</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><p>P2</p>
<h1 id="outline-3"><a class="header" href="#outline-3">Outline</a></h1>
<ul>
<li>
<p>Motion Capture</p>
<ul>
<li>History and modern mocap systems</li>
</ul>
</li>
<li>
<p>Motion Synthesis</p>
<ul>
<li>Motion retargeting</li>
<li>Motion transition</li>
<li>Motion graph</li>
</ul>
</li>
</ul>
<p>P3</p>
<h1 id="motion-capture-1"><a class="header" href="#motion-capture-1">Motion Capture</a></h1>
<p>How to get motion data?</p>
<blockquote>
<p>âœ… åŠ¨ç”»å¸ˆåˆ¶ä½œï¼Œå…‰å­¦åŠ¨æ•ã€è§†è§‰åŠ¨æ•ï¼Œå¤–éª¨éª¼åŠ¨æ•ï¼Œæƒ¯æ€§ä¼ æ„Ÿå™¨ï¼ŒåŠ¨ä½œä¼°è®¡ã€‚</p>
</blockquote>
<p>P29</p>
<h1 id="motion-synthesis"><a class="header" href="#motion-synthesis">Motion Synthesis</a></h1>
<p>How to use motion data?</p>
<p>P31</p>
<p><img src="./assets/05-02.png" alt="" /></p>
<p>P32</p>
<h2 id="motion-retargeting-1"><a class="header" href="#motion-retargeting-1">Motion Retargeting</a></h2>
<h3 id="retargetingè¦è§£å†³çš„é—®é¢˜"><a class="header" href="#retargetingè¦è§£å†³çš„é—®é¢˜">Retargetingè¦è§£å†³çš„é—®é¢˜</a></h3>
<ul>
<li>Retarget a motion to drive a character with
<ul>
<li>Different number of bones</li>
<li>Different bone names</li>
<li>Different reference pose</li>
<li>Different bone ratios</li>
<li>Different skeletal structure</li>
<li>â€¦â€¦</li>
</ul>
</li>
</ul>
<p>P34</p>
<h3 id="a-possible-retargeting-pipeline"><a class="header" href="#a-possible-retargeting-pipeline">A possible retargeting pipeline</a></h3>
<ul>
<li>Map bone names</li>
<li>Scale translations</li>
<li>Copy or retarget joint rotations to fix reference pose</li>
<li>Postprocessing with IK
<ul>
<li>Foot-skating</li>
<li>Self penetration</li>
</ul>
</li>
<li>â€¦â€¦</li>
</ul>
<p><img src="./assets/05-03.png" alt="" /></p>
<p><img src="./assets/05-04.png" alt="" /></p>
<p>P38</p>
<h2 id="motion-transition"><a class="header" href="#motion-transition">Motion Transition</a></h2>
<blockquote>
<p>âœ… æœ‰ä¸€æ®µèµ°è·¯æ•°æ®å’Œè·‘æ­¥æ•°æ®ï¼Œå¦‚ä½•å®ç°äººç”±èµ°åˆ°è·‘çš„è¿‡ç¨‹ã€‚</p>
</blockquote>
<h3 id="æ–¹æ³•ä¸€"><a class="header" href="#æ–¹æ³•ä¸€">æ–¹æ³•ä¸€</a></h3>
<table><thead><tr><th></th><th></th></tr></thead><tbody>
<tr><td><img src="./assets/05-05.png" alt="" /></td><td>âœ…ï¼ˆ1ï¼‰æ‰¾åˆ°ä¸¤ä¸ª motion ä¸­ç›¸ä¼¼çš„ä¸€å¸§ã€‚</td></tr>
<tr><td><img src="./assets/05-06.png" alt="" /></td><td>âœ…ï¼ˆ2ï¼‰ä¸¤å¸§åœ¨æ—¶é—´ä¸Šå¯¹é½</td></tr>
<tr><td><img src="./assets/05-07.png" alt="" /></td><td>âœ…ï¼ˆ3ï¼‰æ”¾åˆ°è¿™ä¸€å¸§æ—¶åŠ¨ä½œåˆ‡æ¢ã€‚</td></tr>
</tbody></table>
<blockquote>
<p>âœ… ç¼ºç‚¹ï¼šä¼šæœ‰æ˜æ˜¾é—´æ–­ã€‚</p>
</blockquote>
<h3 id="æ–¹æ³•äºŒ"><a class="header" href="#æ–¹æ³•äºŒ">æ–¹æ³•äºŒ</a></h3>
<table><thead><tr><th></th><th></th></tr></thead><tbody>
<tr><td><img src="./assets/05-08.png" alt="" /></td><td>âœ… æ”¹è¿›ï¼šè€ƒè™‘å‰åå¸§ï¼Œå¹¶åšæ’å€¼ã€‚</td></tr>
<tr><td><img src="./assets/05-09.png" alt="" /></td><td></td></tr>
</tbody></table>
<p>P46</p>
<p>$$
p(t)=(1-\phi (t))p_0(i)+\phi (t)p_1(i)
$$</p>
<blockquote>
<p>âœ… ä¸ä¸€å®šéè¦çº¿æ€§æ’å€¼ï¼Œå®šä¹‰ \(\phi (t)\)ï¼Œæˆ–å…¶å®ƒæ··åˆç­–ç•¥<br />
âœ… å¯èƒ½å­˜åœ¨çš„é—®é¢˜ï¼šï¼ˆ1ï¼‰çªç„¶è½¬å‘ï¼ˆ2ï¼‰æ»‘æ­¥<br />
âœ… å½“èµ°å’Œè·‘åˆ†åˆ«æ˜¯æœä¸åŒæ–¹æ³•æ—¶ä¼šå‡ºç°ä»¥ä¸Šé—®é¢˜ã€‚<br />
âœ… è§£å†³æ–¹æ³•ï¼šæ’å€¼ä¹‹å‰åŠ¨ä½œå¯¹é½</p>
</blockquote>
<p>P55</p>
<h3 id="facing-frame"><a class="header" href="#facing-frame">â€œFacing Frameâ€</a></h3>
<h4 id="å®šä¹‰åæ ‡ç³»"><a class="header" href="#å®šä¹‰åæ ‡ç³»">å®šä¹‰åæ ‡ç³»</a></h4>
<p>æ¯ä¸ªè§’è‰²æœ‰è‡ªå·±çš„è§’è‰²åæ ‡ç³»ï¼Œå®šä¹‰ä¸ºï¼š<br />
A special coordinate system that moves horizontally with the character with one axis pointing to the â€œfacing directionâ€ of the character</p>
<blockquote>
<p>âœ… åŸç‚¹ï¼šHip åœ¨åœ°é¢ä¸Šçš„æŠ•å½±<br />
âœ… åæ ‡è½´ï¼šå‚è€ƒå§¿æ€ä¸‹ \(y\) up \(z\) forward.ä¸”æ—‹è½¬å’Œå¹³ç§»éƒ½å—åˆ°é™åˆ¶ã€‚</p>
</blockquote>
<p><img src="./assets/05-10.png" alt="" /></p>
<p>$$
\begin{align*}
R &amp; = \theta e_y \\
t &amp; = (t_x,0,t_z)
\end{align*}
$$</p>
<blockquote>
<p>âœ… ä¹Ÿå¯ä»¥ä¸ºä¸åŒçš„çš„åœºæ™¯å®šä¹‰ä¸åŒçš„ \(R\) ï¼Œä¾‹å¦‚ä¸Šä¸‹åŠèº«çš„ \(y\) è½´æ—‹è½¬æ–¹å‘ä¸åŒã€‚</p>
</blockquote>
<ul>
<li>Possible definitions of \(R\)
<ul>
<li>\(R\) is the <strong>y-rotation</strong> that aligns the z-axis of the global frame to the heading direction</li>
<li>\(R\) is the <strong>y-rotation</strong> that aligns x-axis of the global frame to the average direction of the vectors between shoulders and hips</li>
<li>Decomposition root rotation as \(R_0=R_yR_{xz}\)</li>
</ul>
</li>
</ul>
<p>P58</p>
<h4 id="åŠ¨ä½œåˆ†è§£"><a class="header" href="#åŠ¨ä½œåˆ†è§£">åŠ¨ä½œåˆ†è§£</a></h4>
<p><img src="./assets/05-11-1.png" alt="" /></p>
<blockquote>
<p>âœ… æŠŠ \(R\) åˆ†è§£ä¸º \(R_y\) å’Œ \(R_{xz}\)ï¼Œæ±‚ \(R_y\)<br />
âœ… \({R}' \) èƒ½å¤ŸæŠŠ local y-axis è½¬åˆ° global y-axis çš„çŸ©é˜µã€‚</p>
</blockquote>
<p>P62</p>
<h4 id="åŠ¨ä½œåˆæˆ"><a class="header" href="#åŠ¨ä½œåˆæˆ">åŠ¨ä½œåˆæˆ</a></h4>
<ul>
<li>How to compute this transformation?</li>
</ul>
<p><img src="./assets/05-12.png" alt="" /></p>
<blockquote>
<p>âœ… ä¸¤ä¸ªåæ ‡ç³»çš„è½¬æ¢ã€‚</p>
</blockquote>
<p>P68</p>
<h2 id="path-fitting"><a class="header" href="#path-fitting">Path Fitting</a></h2>
<p><img src="./assets/05-13.png" alt="" /> </p>
<blockquote>
<p>ğŸ‘† è®©è§’è‰²è·Ÿç€è½¨è¿¹ç§»åŠ¨ã€‚</p>
</blockquote>
<p>P69</p>
<h2 id="motion-composition"><a class="header" href="#motion-composition">Motion Composition</a></h2>
<p>Computationally generating motions according to<br />
- User control<br />
- Objects in the same environment<br />
- Movements of other characters<br />
- â€¦â€¦</p>
<p>P70</p>
<h3 id="motion-graphs-1"><a class="header" href="#motion-graphs-1">Motion Graphs</a></h3>
<p><img src="./assets/05-14.png" alt="" /><br />
<img src="./assets/05-15.png" alt="" /></p>
<blockquote>
<p>ğŸ‘† åŠ¨ä½œå›¾çš„æœ¬è´¨æ˜¯çŠ¶æ€æœºã€‚</p>
</blockquote>
<p>P72</p>
<h4 id="segment-motion-data"><a class="header" href="#segment-motion-data">Segment Motion Data</a></h4>
<p><img src="./assets/05-16.png" alt="" /> </p>
<blockquote>
<p>âœ… ä¸€æ®µåŠ¨æ•æ•°æ®ï¼Œå¦‚ä½•åšåˆ†å‰²ï¼Œå¦‚ä½•ç¡®å®šå“ªäº›ç‚¹å¯ä»¥è¿åˆ°ä¸€èµ·ã€‚<br />
âœ… Distance å¯ä»¥æœ‰å¤šç§å®šä¹‰æ–¹å¼ã€‚<br />
âœ… æ ¹æ®å›¾ç¡®å®šåˆ†æ®µä¸è¿æ¥ã€‚</p>
</blockquote>
<p>P73</p>
<h4 id="å»ºç«‹åŠ¨ä½œè½¬ç§»å…³ç³»"><a class="header" href="#å»ºç«‹åŠ¨ä½œè½¬ç§»å…³ç³»">å»ºç«‹åŠ¨ä½œè½¬ç§»å…³ç³»</a></h4>
<p><img src="./assets/05-17.png" alt="" /></p>
<ul>
<li>Distance map
<ul>
<li>Each pixel represents the difference between a pair of poses</li>
<li>Local minima are potential transition point</li>
</ul>
</li>
</ul>
<blockquote>
<p>ğŸ” <strong>Motion graphs</strong>
Lucas Kovar, Michael Gleicher, and FrÃ©dÃ©ric Pighin. 2002.<br />
<em>ACM Trans. Graph</em>. 21, 3 (July 2002),</p>
</blockquote>
<p>P74</p>
<h4 id="motion-synthesis-1"><a class="header" href="#motion-synthesis-1">Motion Synthesis</a></h4>
<ul>
<li>State-machines
<ul>
<li>Nodes represent motion clips</li>
<li>Edges represent potential transitions</li>
<li>Transitions are triggered when necessary
<ul>
<li>User input</li>
<li>Clip end</li>
</ul>
</li>
<li>Check immediate connections for the next clip
<ul>
<li>May need deeper search</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="./assets/05-18.png" alt="" /> </p>
<p>P75</p>
<h4 id="interactive-animation-pipeline"><a class="header" href="#interactive-animation-pipeline">Interactive Animation Pipeline</a></h4>
<p><img src="./assets/05-19.png" alt="" /></p>
<blockquote>
<p>âœ… ä¼˜ç‚¹ï¼šæ ¹æ®è·¯çº¿ä»åŠ¨ä½œåº“ä¸­é€‰æ‹©æœ€åˆé€‚çš„åŠ¨ä½œï¼Œè€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨è·¯çº¿ï¼Œå› æ­¤å‡å°‘æ»‘æ­¥ã€‚<br />
âœ… ç¼ºç‚¹ï¼š(1) åŠ¨ä½œå¤šæ—¶åŠ¨ä½œå¤æ‚ã€‚<br />
(2) ä¸€ä¸ªç‰‡æ–­æ’­å®Œå†åˆ‡åŠ¨ä½œï¼Œå“åº”è¾ƒæ…¢ã€‚<br />
(3) éœ€è¦æå‰è§„åˆ’å¥½åŠ¨æ•åŠ¨ä½œã€‚<br />
âœ… å¦‚æœæ•°æ®é›†é‡Œæ²¡æœ‰æƒ³è¦çš„å§¿æ€ï¼Œå¯ä»¥ç»“åˆ IK.</p>
</blockquote>
<p>P78</p>
<h3 id="motion-matching"><a class="header" href="#motion-matching">Motion Matching?</a></h3>
<ul>
<li>Clip â†’ Pose</li>
<li>Short clip â†’ â€œRawâ€ and long motion data</li>
</ul>
<blockquote>
<p>âœ… åˆ‡æ¢ç²’åº¦æ›´ç»†ï¼š1å¸§ or 0.1 sï¼<br />
âœ… çµæ´»æ€§æå‡ï¼Œå¯æ§æ€§æ¬ ç¼ºã€‚</p>
</blockquote>
<hr />
<blockquote>
<p>æœ¬æ–‡å‡ºè‡ªCaterpillarStudyGroupï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>
<p>https://caterpillarstudygroup.github.io/GAMES105_mdbook/</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><p>P1</p>
<blockquote>
<p>âœ… åŸºäºæ•°æ®ï¼šå¯¹ç°æœ‰æ•°æ®è¿›è¡Œè¿æ¥é‡ç»„ã€‚<br />
âœ… åŸºäºå­¦ä¹ ï¼šå¯¹æ•°æ®å¤„ç†ï¼Œæ”¾å…¥æ¨¡å‹ï¼Œå†ç”Ÿæˆæ•°æ®ã€‚</p>
</blockquote>
<p>P2</p>
<h1 id="outline-4"><a class="header" href="#outline-4">Outline</a></h1>
<ul>
<li>Recap: interactive character animation
<ul>
<li>Motion Graphs</li>
<li>Motion Matching</li>
</ul>
</li>
<li>Statistical Models of Human Motion
<ul>
<li>Principal Component Analysis</li>
<li>Gaussian Models</li>
</ul>
</li>
</ul>
<p>P3</p>
<h1 id="recap-interactive-animation"><a class="header" href="#recap-interactive-animation">Recap: Interactive Animation</a></h1>
<p>How to make a character respond to user command?</p>
<p><img src="./assets/06-01.png" alt="" /></p>
<p>P9</p>
<h2 id="motion-graphs-2"><a class="header" href="#motion-graphs-2">Motion Graphs</a></h2>
<p><img src="./assets/06-02.png" alt="" /></p>
<blockquote>
<p>âœ… æ£€æµ‹åˆ°ç”¨æˆ·è¾“å…¥åï¼š</p>
<ol>
<li>æŠŠå½“å‰ç‰‡æ®µæ’­å®Œï¼ˆå“åº”æ…¢ï¼‰</li>
<li>æ‰€æœ‰ä¸‹ä¸€ç‰‡æ–­ä¸å½“å‰çŠ¶æ€è¿›è¡Œåæ ‡ç³»å¯¹é½</li>
<li>æ ¹æ®å½“å‰çŠ¶æ€å’Œé¢„æœŸè½¨è¿¹ï¼Œé€‰æ‹©ä¸‹ä¸€ä¸ªç‰‡æ–­</li>
<li>æ’­æ”¾å¯¹é½åçš„ä¸‹ä¸€ç‰‡æ–­</li>
</ol>
<p>âœ… å¯ä»¥ç»“åˆè·¯å¾„è§„åˆ’ç®—ï¼Œå®ç°ä¸€äº›æ™ºèƒ½è§’è‰²ã€‚Motion Graph åªæ˜¯ä¸€ä¸ªåº•å±‚æ•°æ®ç»“æ„ã€‚</p>
</blockquote>
<p>P14</p>
<h2 id="motion-fields"><a class="header" href="#motion-fields">Motion Fields</a></h2>
<table><thead><tr><th></th><th></th></tr></thead><tbody>
<tr><td>Motion Graphs / State Machines</td><td>Motion Fields / Motion Matching</td></tr>
<tr><td><img src="./assets/06-03.png" alt="" /></td><td><img src="./assets/06-04.png" alt="" /></td></tr>
</tbody></table>
<blockquote>
<p>âœ… Motion Matching æ˜¯å°† Motion Fields ç®€åŒ–ä»¥ååŠ ä¸€äº›æ¯”è¾ƒå¥½çš„å·¥ç¨‹å®è·µã€‚</p>
</blockquote>
<p>P17</p>
<h3 id="æ„å»º-motion-fields"><a class="header" href="#æ„å»º-motion-fields">æ„å»º Motion Fields</a></h3>
<p><img src="./assets/06-05.png" alt="" /></p>
<blockquote>
<p>âœ… æ¯æ¡é“¾è·¯ä»£è¡¨ä¸€ä¸ªåŠ¨ä½œï¼Œç°åœˆä»£è¡¨åŠ¨ä½œé‡Œçš„ä¸€å¸§ï¼Œæ•´ä½“æ„æˆä¸€ä¸ªå¾ˆå¤§çš„ Field.</p>
</blockquote>
<p>P20</p>
<h3 id="åœ¨motion-fieldsä¸­é€‰æ‹©pose"><a class="header" href="#åœ¨motion-fieldsä¸­é€‰æ‹©pose">åœ¨Motion Fieldsä¸­é€‰æ‹©pose</a></h3>
<p><img src="./assets/06-06.png" alt="" /></p>
<blockquote>
<p>âœ… æ¯ä¸€å¸§æœ‰ä¸€äº›æœ€è¿‘é‚»ï¼Œå®ƒä»¬æ¥è‡ªä¸åŒåŠ¨ä½œï¼Œæœ‰ä¸åŒçš„çŠ¶æ€ã€‚<br />
âœ… ç»¿è‰²ä»£è¡¨å‘å³ï¼ŒæŒ‘å‡ºå¯¹åº”å¸§ã€‚åšæ··åˆã€‚</p>
</blockquote>
<p>P23</p>
<h3 id="å¯¹poseçš„æ··åˆ"><a class="header" href="#å¯¹poseçš„æ··åˆ">å¯¹poseçš„æ··åˆ</a></h3>
<p><img src="./assets/06-07.png" alt="" /></p>
<p><img src="./assets/06-08.png" alt="" /></p>
<blockquote>
<p>âœ… æ ¹æ®ç”¨æˆ·è¾“å…¥è®¾ç½®ä¸åŒæƒé‡ï¼Œä¼šå¾—åˆ°ä¸åŒç»“æœ<br />
âœ… ä¼˜ç‚¹ï¼š(1) è‡ªç”±æ§åˆ¶ï¼ˆ2ï¼‰æ”¯æŒå¤–åŠ›ï¼Œå¯ç»“æœç‰©ç†ä»¿çœŸï¼ˆ3ï¼‰ä¸éœ€è¦ä½¿é¦–å°¾å¸§ç›¸ä¼¼çš„é¢„å¤„ç†ã€‚<br />
âœ… ç¼ºç‚¹ï¼šéœ€è¦è®¾è®¡ä¸€äº›è§„åˆ™æ¥è®¡ç®—æœ€è¿‘é‚»çš„æ··åˆã€‚<br />
âœ… è§£å†³æ–¹æ³•ï¼šå¼ºåŒ–å­¦ä¹ </p>
</blockquote>
<p>P24</p>
<h3 id="pipeline"><a class="header" href="#pipeline">Pipeline</a></h3>
<p><img src="./assets/06-09.png" alt="" /></p>
<blockquote>
<p>âœ… æ ¹æ®ç”¨æˆ·è¾“å…¥è®¾è®¡é‚»å±€çš„æƒé‡ï¼Œè¿™ä¸€æ­¥éš¾ä»¥å·¥ä¸šåŒ–ã€‚<br />
âœ… è®ºæ–‡ä½¿ç”¨å¼ºåŒ–å­¦ä¹ æ¥è§£å†³ï¼Œè¿™æ ·å¢åŠ äº†è®­ç»ƒçš„éš¾åº¦ã€‚</p>
</blockquote>
<p>P31</p>
<h2 id="motion-matching-1"><a class="header" href="#motion-matching-1">Motion Matching</a></h2>
<p><img src="./assets/06-10.png" alt="" /></p>
<p>P32</p>
<blockquote>
<p>âœ… ç®€åŒ–ä¸€ï¼šåªæ‰¾ä¸€ä¸ªæœ€è¿‘é‚»ï¼Œä¸éœ€è¦ blend. ç„¶åç”¨å¹³æ»‘è§£å†³è·³å˜é—®é¢˜ã€‚</p>
</blockquote>
<p>P34</p>
<h3 id="è·ç¦»è¡¡é‡å‡½æ•°"><a class="header" href="#è·ç¦»è¡¡é‡å‡½æ•°">è·ç¦»è¡¡é‡å‡½æ•°</a></h3>
<p>We need a distance function / metric to define the nearest neighbor</p>
<p>$$
\text{next-pose } = \min_{i \in\text{ Dataset}} ||x_{\text{curr}}-x_i||
$$</p>
<p>$$
x: \text{feature vector}
$$</p>
<blockquote>
<p>âœ… Motion Matching ä¸­è·ç¦»å‡½æ•°çš„è®¾è®¡å¾ˆé‡è¦ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šå½±å“ç®—æ³•çš„æ•ˆæœã€‚<br />
âœ… è¿™ä¸ªè·ç¦»å®šä¹‰å¯ä»¥æ˜¯ç‰¹å¾ç›¸å…³çš„ã€‚</p>
</blockquote>
<p>A possible set of feature vectors:</p>
<ul>
<li>root linear/angular velocity</li>
<li>position of end effectors w.r.t. root joint</li>
<li>linear/angular velocity of end effectors w.r.t. root joint</li>
<li><strong>future</strong> heading position/orientation (e.g. in 0.5s, 1.0s, 1.5s, etc.)</li>
<li>foot contacts</li>
<li>â€¦â€¦</li>
</ul>
<p>P36</p>
<h3 id="åŠ¨ä½œå¹³æ»‘"><a class="header" href="#åŠ¨ä½œå¹³æ»‘">åŠ¨ä½œå¹³æ»‘</a></h3>
<p>We need a smooth motion</p>
<ul>
<li>Only do the search every few frames</li>
<li>Smoothly blend current pose to the target pose
<ul>
<li>Inertialized blending (ref. <a href="https://www.theorangeduck.com/page/spring-roll-call">https://www.theorangeduck.com/page/spring-roll-call</a> by Daniel Holden)</li>
</ul>
</li>
</ul>
<h3 id="æœç´¢æ•ˆç‡"><a class="header" href="#æœç´¢æ•ˆç‡">æœç´¢æ•ˆç‡</a></h3>
<p>We need a good performance</p>
<ul>
<li>An efficient data structure for searchingï¼Œä¾‹å¦‚ e.g. KD-tree</li>
</ul>
<h3 id="æ•°æ®é›†"><a class="header" href="#æ•°æ®é›†">æ•°æ®é›†</a></h3>
<p>A efficient datasetï¼Œä¾‹å¦‚â€œDance cardâ€</p>
<p><img src="./assets/06-11-1.png" alt="" /></p>
<blockquote>
<p>âœ… ä¿è¯æ‰€ä½¿ç”¨çš„åŠ¨ä½œé›†èƒ½å¤Ÿè¦†ç›–åˆ°ç›®æ ‡ã€‚<br />
âœ… ä¼˜ç‚¹ï¼š(1) å®ç°ç®€å•  (2) æ§åˆ¶çµæ´»  (3) å¯ç»“åˆç‰©ç†ä»¿çœŸã€‚<br />
âœ… ç¼ºç‚¹ï¼š(1) ä¸èƒ½è§£å†³æ»‘æ­¥</p>
</blockquote>
<p>P39</p>
<h1 id="statistical-models-of-human-motion"><a class="header" href="#statistical-models-of-human-motion">Statistical Models of Human Motion</a></h1>
<blockquote>
<p>âœ… æ ¹æ®å·²æœ‰æ•°æ®ï¼Œå¯¹â€œåŠ¨ä½œè‡ªç„¶â€å»ºæ¨¡ã€‚<br />
âœ… æˆ–æ‰¾åˆ°ä¸€ä¸ªæ¨¡å‹ï¼Œå‘Šè¯‰æˆ‘ä»¬ä»€ä¹ˆæ˜¯è‡ªç„¶å§¿æ€ã€‚</p>
</blockquote>
<p>P43<br />
å› ä¸ºç”±äºä»¥ä¸‹åŸå› ï¼Œ â€œè‡ªç„¶çš„åŠ¨ä½œâ€å®é™…ä¸Šæ˜¯å¤Ÿæˆé«˜ç»´çš„åŠ¨ä½œå‚æ•°ç©ºé—´çš„æµå½¢æ›²é¢ã€‚</p>
<ul>
<li>Coordinated arm/leg movement</li>
<li>Musculoskeletal structure</li>
<li>Laws of physics</li>
<li>â€¦â€¦</li>
</ul>
<p>P45</p>
<h2 id="principal-component-analysis-pca"><a class="header" href="#principal-component-analysis-pca">Principal Component Analysis (PCA)</a></h2>
<ul>
<li>A technique for
<ul>
<li>finding out the correlations among dimensions</li>
<li>dimensionality reduction</li>
</ul>
</li>
</ul>
<blockquote>
<p>âœ… PCA ç»†èŠ‚è·³è¿‡ã€‚ç›®çš„ï¼šé™ç»´ï¼ŒæŠ“ä½ä¸»è¦ç‰¹å¾ã€‚</p>
</blockquote>
<p>P65</p>
<p>a pose \(x\) with smaller \(\sum _k\frac{((x-\bar{x})\cdot u_k)^2 }{\sigma ^2_k}\) is more likely to be a good pose</p>
<p><img src="./assets/06-12.png" alt="" /></p>
<blockquote>
<p>âœ… å¯ä½œä¸ºåŠ¨ä½œç”Ÿæˆçš„å…ˆéªŒï¼Œå‘Šè¯‰æˆ‘ä¸€ä¸ªåŠ¨ä½œæ˜¯å¦åˆç†ã€‚<br />
âœ… \(M_k\) å’Œ \(\sigma_k\) åˆ†åˆ«æ˜¯ \(k\) ç»´ä¸Šçš„å‡å€¼å’Œæ–¹å·®ã€‚</p>
</blockquote>
<p>P66</p>
<h2 id="character-ik-with-a-motion-prior"><a class="header" href="#character-ik-with-a-motion-prior">Character IK with a Motion Prior</a></h2>
<h3 id="æ­£åˆ™åŒ–å…ˆéªŒ"><a class="header" href="#æ­£åˆ™åŒ–å…ˆéªŒ">æ­£åˆ™åŒ–å…ˆéªŒ</a></h3>
<p>$$
F(\theta )=\frac{1}{2} \sum_{i}^{} ||f_i(\theta )-\tilde{x} _i||^2_2+\frac{\lambda }{2}||\theta ||^2_2 
$$</p>
<p>$$
\theta=(t_0,R_0,R_1,R_2\dots  \dots )
$$</p>
<blockquote>
<p>âœ… æ­£åˆ™é¡¹ä»£è¡¨ä¸»è§‚å…ˆéªŒ: \(\theta \) å°æ›´æœ‰å¯èƒ½æ˜¯åˆç†åŠ¨ä½œã€‚</p>
</blockquote>
<p>P68</p>
<h3 id="pcaå…ˆéªŒ"><a class="header" href="#pcaå…ˆéªŒ">PCAå…ˆéªŒ</a></h3>
<p>$$
F(\theta )=\frac{1}{2} \sum_{i}^{} ||f_i(\theta )-\tilde{x} _i||^2_2
$$</p>
<p>$$
+\frac{w }{2}\sum_{k}^{}(\frac{(\theta -\bar{\theta })\cdot u_k }{\sigma _k} )^2
$$</p>
<blockquote>
<p>âœ… æŠŠ P65 æ–¹æ³•åº”ç”¨åˆ° IK æ¥åˆ¤æ–­åŠ¨ä½œå¥½åçš„å®ä¾‹ã€‚<br />
âœ… æ”¹è¿›ä¸ºåŸºäºç»Ÿè®¡çš„å…ˆéªŒã€‚</p>
</blockquote>
<p>P71</p>
<h2 id="data-distribution"><a class="header" href="#data-distribution">Data Distribution</a></h2>
<p>\(p(x)\) : probability that \(x\) is a natural pose</p>
<blockquote>
<p>âœ… å‡è®¾å­˜åœ¨è¿™æ ·ä¸€ä¸ªåˆ†å¸ƒï¼Œä½†ä¸çŸ¥é“åˆ†å¸ƒçš„å…·ä½“å½¢å¼ï¼Œè¦ä¼°è®¡è¿™æ ·çš„åˆ†å¸ƒ<br />
âœ…ï¼ˆ1ï¼‰ä»åˆ†å¸ƒä¸­é‡‡æ ·ï¼Œä¾‹å¦‚ï¼šåŠ¨æ•<br />
âœ…ï¼ˆ2ï¼‰é€šè¿‡å„ç§æ¨¡å‹æŠŠåˆ†å¸ƒä¼°è®¡å‡ºæ¥ï¼Œå³ä»æ•°æ®ä¸­ä¼°è®¡å‡ºæ¨¡å‹å‚æ•°ã€‚</p>
</blockquote>
<p>P75</p>
<h2 id="gaussian-distribution"><a class="header" href="#gaussian-distribution">Gaussian Distribution</a></h2>
<blockquote>
<p>âœ… å‡è®¾åˆ†å¸ƒå°±æ˜¯é«˜æ–¯åˆ†å¸ƒ</p>
</blockquote>
<p><img src="./assets/06-19-1.png" alt="" /></p>
<p>é€šè¿‡Maximum Likelihood Estimators (MLEï¼Œæœ€å¤§ä¼¼ç„¶ä¼°è®¡)å¾—åˆ°:</p>
<p>$$
\begin{align*}
\bar{x}  &amp;= \frac{1}{N} \sum_{i}^{} x_i \\
\Sigma  &amp;  =\frac{1}{N} X^TX
\end{align*}
$$</p>
<p>P76</p>
<h3 id="pca-å¯ä»¥çœ‹ä½œä¸€ç§é«˜æ–¯åˆ†å¸ƒ"><a class="header" href="#pca-å¯ä»¥çœ‹ä½œä¸€ç§é«˜æ–¯åˆ†å¸ƒ">PCA å¯ä»¥çœ‹ä½œä¸€ç§é«˜æ–¯åˆ†å¸ƒã€‚</a></h3>
<p>$$
\sum =X^TX=U\begin{bmatrix}
\sigma ^2_1 &amp;  &amp;  &amp; \\
&amp; \sigma ^2_2 &amp;  &amp; \\
&amp;  &amp; \ddots  &amp; \\
&amp;  &amp;  &amp;\sigma ^2_N
\end{bmatrix}U^T
$$</p>
<p>$$
x-\bar{x} =\sum_{k=1}^{n} w_ku_k
$$</p>
<blockquote>
<p>âœ… PCA åˆ†è§£å¯ä»¥çœ‹ä½œæ˜¯åæ ‡è½¬æ¢æˆ–å˜é‡ä»£æ¢ã€‚</p>
</blockquote>
<p>P77</p>
<p><img src="./assets/06-13.png" alt="" /></p>
<p>P78</p>
<h2 id="character-ik-with-a-motion-prior-1"><a class="header" href="#character-ik-with-a-motion-prior-1">Character IK with a Motion Prior</a></h2>
<p>$$
F(\theta )=\frac{1}{2} \sum_{i} ||f_i(\theta )-\tilde{x} _i||^2_2+\frac{w}{2}\sum_k(\frac{(\theta -\bar{\theta })\cdot u_k }{\sigma _k} )^2 
$$</p>
<p>P79</p>
<p>$$
F(\theta )=\frac{1}{2} \sum_{i}^{} ||f_i(\theta )-\tilde{x} _i||^2_2-w \log \prod_k e^{-\frac{1}{2}(\frac{(\theta -\bar{\theta })\cdot u_k }{\sigma _k} )^2 }
$$</p>
<p>P80</p>
<p>$$
F(\theta )=\frac{1}{2} \sum_{i}^{} ||f_i(\theta )-\tilde{x} _i||^2_2-w \log p(\theta )<br />
$$</p>
<p>$$
\theta=(t_0,R_0,R_1,R_2\dots \dots )
$$</p>
<blockquote>
<p>âœ… ç¬¬ä¸€é¡¹ï¼šç¬¦åˆç›®æ ‡ã€‚ç¬¬äºŒé¡¹ï¼šåŠ¨ä½œåˆç†ã€‚</p>
</blockquote>
<p>P81</p>
<h3 id="motion-synthesis-with-a-motion-prior"><a class="header" href="#motion-synthesis-with-a-motion-prior">Motion Synthesis with a Motion Prior</a></h3>
<p>Given a motion prior \(p(x)\) learned from a set of data points \(D \)= {\(x_i\)}, Synthesize a motion \(x\) that minimize the objective</p>
<p>$$
f(x)=f(x)-w \log p(x )
$$</p>
<p>Note: \(x\) can represent a pose \(\theta\)<br />
\(\quad\quad\) or a motion clip â†’ a sequence of poses {\( \theta t\)}<br />
\(\quad\quad\) or any features of a motion â†’ e.g. \(w_k\) in PCA</p>
<blockquote>
<p>âœ… \(x\) å¯ä»¥ä¸å±€é™äº \(\theta \)ã€è€Œæ˜¯ä»»ä½•ä¸€ä¸ªå¯ä»¥æè¿° motion çš„é‡ã€‚<br />
âœ… \(f(x)\) ä»£è¡¨ç›®æ ‡ï¼Œç›®æ ‡ä¹Ÿä¸å±€é™äº IKï¼Œä¹Ÿå¯ä»¥æ˜¯Keyframesã€User controlã€Environment constraintsç­‰<br />
âœ… ä½†â€œè®¤ä¸ºåŠ¨ä½œç¬¦åˆé«˜æ–¯åˆ†å¸ƒâ€ä»ç„¶æ˜¯ä¸€ä¸ªéå¸¸å—é™çº¦æŸï¼Œéš¾ä»¥ç”¨äºå¤æ‚çš„åŠ¨ä½œ</p>
</blockquote>
<p>P83</p>
<h3 id="ç›¸å…³å·¥ä½œ"><a class="header" href="#ç›¸å…³å·¥ä½œ">ç›¸å…³å·¥ä½œ</a></h3>
<table><thead><tr><th></th><th></th></tr></thead><tbody>
<tr><td><img src="./assets/06-14.png" alt="" /></td><td></td></tr>
<tr><td><img src="./assets/06-15.png" alt="" /></td><td>âœ… ä½¿ç”¨é«˜æ–¯æ··åˆæ¨¡å‹ï¼Œç”¨äºåŠ¨ä½œç¼–è¾‘ã€‚<br> âœ… \(x\) ä¸å±€é™äºå•å¸§åŠ¨ä½œï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªåºåˆ—ã€‚</td></tr>
<tr><td>Min et al. 2009</td><td>âœ… è§†é¢‘åŠ¨æ•æ˜¯æ¬ çº¦æŸé—®é¢˜ï¼Œä½†å¯ä»¥é€šè¿‡åˆ†å¸ƒè¿‡æ»¤æ‰ä¸åˆç†çš„ç»“æœã€‚</td></tr>
<tr><td><img src="./assets/06-16.png" alt="" /></td><td>âœ… ç¼ºç‚¹ï¼šå®ç°éº»çƒ¦ï¼Œå¾ˆå¤šè¶…å‚ã€‚</td></tr>
<tr><td><img src="./assets/06-22.png" alt="" /></td><td>[Starke et al 2020, Local Motion Phases for Learning Multi-Contact Character Movements]</td></tr>
<tr><td><img src="./assets/06-23.png" alt="" /></td><td>[Henter et al. 2020, MoGlow: Probabilistic and Controllable Motion Synthesis Using Normalising Flows]</td></tr>
<tr><td><img src="./assets/06-24.png" alt="" /></td><td>[Lee et al 2019, Interactive Character Animation by Learning Multi-Objective Control]</td></tr>
<tr><td><img src="./assets/06-25.png" alt="" /></td><td>[Holden et al 2020, Learned Motion Matching]<br> âœ… ç”¨ DL ä»£æ›¿å¤æ‚çš„æ¨¡å‹ï¼Œæ¥ä¼°è®¡åŠ¨ä½œå…ˆéªŒã€‚</td></tr>
</tbody></table>
<hr />
<blockquote>
<p>æœ¬æ–‡å‡ºè‡ªCaterpillarStudyGroupï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>
<p>https://caterpillarstudygroup.github.io/GAMES105_mdbook/</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><p>P2</p>
<h1 id="outline-5"><a class="header" href="#outline-5">Outline</a></h1>
<ul>
<li>Learning-based Character Animation (cont.)
<ul>
<li>Motion Models</li>
<li>Autoregressive models: PFNN</li>
<li>Generative models</li>
</ul>
</li>
</ul>
<p>P4</p>
<h1 id="learning-motion-models"><a class="header" href="#learning-motion-models">Learning Motion Models</a></h1>
<h2 id="é—®é¢˜çš„æ•°å­¦å»ºæ¨¡"><a class="header" href="#é—®é¢˜çš„æ•°å­¦å»ºæ¨¡">é—®é¢˜çš„æ•°å­¦å»ºæ¨¡</a></h2>
<p>\(p(x)\): probability that ğ’™ is a natural motion</p>
<p>ç”±äº \(p(x)\) æ— æ³•ç”±è®¡ç®—å¾—å‡ºï¼Œæ‰€ä»¥ä»æ•°æ®å»å­¦ã€‚æ•°æ®å³ a set of example motions {\(x_i\)}âˆ¼ \(p(x)\) </p>
<p>P5</p>
<h3 id="æ•°å­¦æ¨¡å‹1"><a class="header" href="#æ•°å­¦æ¨¡å‹1">æ•°å­¦æ¨¡å‹1</a></h3>
<p><img src="./assets/06a-01.png" alt="" /></p>
<blockquote>
<p>âœ… ä¸€ä¸ªposeå¯ä»¥ç”¨æ¯ä¸ªå…³èŠ‚çš„ä½ç½®è¡¨ç¤ºï¼Œä¹Ÿå¯ä»¥ç”¨æ¯ä¸ªå…³èŠ‚çš„æ—‹è½¬è¡¨ç¤ºã€‚å¦‚æœç”¨ä½ç½®çº¦æŸï¼Œæœ€åéœ€è¦é€šè¿‡IKå˜æˆæ—‹è½¬çš„çº¦æŸã€‚å¦‚æœç”¨æ—‹è½¬çº¦æŸï¼Œå°±éš¾ä»¥åšåˆ°éœ€è¦çº¦æŸä½ç½®çš„æ•ˆæœã€‚<br />
âœ… P(X)åˆ¤æ–­æ•´ä¸ªåºåˆ—æ‰€æœ‰poseçš„è”åˆåˆ†å¸ƒæ˜¯å¦åˆç†ã€‚</p>
</blockquote>
<p>P7</p>
<h3 id="æ•°å­¦æ¨¡å‹2"><a class="header" href="#æ•°å­¦æ¨¡å‹2">æ•°å­¦æ¨¡å‹2</a></h3>
<p>$$
p(X\mid z)=p(x_1,\dots ,x_T\mid z)
$$</p>
<p>$$
\begin{align*}
ğ‘§: &amp; \text{ control parameters} \\
&amp; \text{ latent variables} \\
&amp; â€¦â€¦ 
\end{align*}
$$</p>
<blockquote>
<p>âœ… å¯¹åŠ¨ä½œåºåˆ—çš„è¦æ±‚ï¼Œé™¤äº†åŠ¨ä½œåˆç†ï¼Œè¿˜è¦ç¬¦åˆç”¨æˆ·æœŸå¾…ï¼Œç”¨æˆ·è¦æ±‚å¯ä»¥æ˜¯æ˜¾å¼çš„ï¼Œä¾‹å¦‚å¾€å·¦èµ°ï¼›ä¹Ÿå¯ä»¥æ˜¯éšå¼çš„ï¼Œä¾‹å¦‚ä»¥è€äººçš„é£æ ¼èµ°ã€‚\(z\) ä»£è¡¨ç”¨æˆ·æ¡ä»¶ã€‚<br />
âœ… P(X|z)åˆ¤æ–­åœ¨æ¡ä»¶zä¸‹æ•´ä¸ªåºåˆ—æ‰€æœ‰poseçš„è”åˆåˆ†å¸ƒæ˜¯å¦åˆç†ã€‚</p>
</blockquote>
<p>P8</p>
<p>$$
(x_1,\dots ,x_T)=f(z)
$$</p>
<p>$$
\begin{align*}
ğ‘§: &amp; \text{ control parameters} \\
&amp; \text{ latent variables} \\
&amp; â€¦â€¦ 
\end{align*}
$$</p>
<blockquote>
<p>âœ… å¦‚æœæ¦‚ç‡åˆ†å¸ƒæ˜¯æ­£ç¡®çš„ï¼ŒåŸºäºè¿™ä¸ªåˆ†å¸ƒé‡‡æ ·èƒ½å¾—åˆ°ä¸€ä¸ªåˆç†çš„åŠ¨ä½œï¼Œä¸”æ»¡è¶³å‰ææ¡ä»¶ã€‚</p>
</blockquote>
<p>P14</p>
<h3 id="æ•°å­¦æ¨¡å‹3"><a class="header" href="#æ•°å­¦æ¨¡å‹3">æ•°å­¦æ¨¡å‹3</a></h3>
<p>$$
p(X\mid z)=p(x_1,\dots ,x_T\mid z)
$$</p>
<p>$$
=p(x_1)\prod_{t}^{} p(x_t\mid x_{t-1},\dots ,x_1;z)
$$</p>
<p>\(^\ast \) The chain rule of conditional probabilities:</p>
<p>$$
\begin{align*}
p(x_1,x_2,x_3) &amp; = p(x_2,x_3 \mid x_1)p(x_1) \\
&amp; = p(x_3 \mid x_2, x_1)p( x_2 \mid x_1)p(x_1)
\end{align*}
$$</p>
<blockquote>
<p>âœ… åºåˆ—åˆç† ï¼ å·²çŸ¥åºåˆ—ä¸­çš„å‰ \(t-1\) å¸§æ—¶ç¬¬ \(t\) å¸§åº”å½“åˆç†ã€‚</p>
</blockquote>
<p>P15<br />
é‡‡æ ·è¿‡ç¨‹ä¸ºï¼š</p>
<p>$$
x_t=f(x_{t-1},x_{t-2},\dots x_1;z)
$$</p>
<p>P17</p>
<h3 id="æ•°å­¦æ¨¡å‹4"><a class="header" href="#æ•°å­¦æ¨¡å‹4">æ•°å­¦æ¨¡å‹4</a></h3>
<blockquote>
<p>âœ… å‡è®¾åŠ¨ä½œå…·æœ‰Markov æ€§ï¼ˆæ— è®°å¿†æ€§ï¼‰ </p>
</blockquote>
<p>$$
x_t=f(x_{t-1};z)
$$</p>
<p>Markov Property</p>
<blockquote>
<p>âœ… \(x_t\) åªå— \(x_{t-1}\) å½±å“ï¼Œä¸ \(t-1\) ä¹‹å‰çš„åŠ¨ä½œæ— å…³ã€‚</p>
</blockquote>
<p>P18</p>
<h3 id="two-perspectives-on-a-motion-sequence"><a class="header" href="#two-perspectives-on-a-motion-sequence">Two Perspectives on a Motion Sequence</a></h3>
<table><thead><tr><th>æ•°å­¦æ¨¡å‹3</th><th>æ•°å­¦æ¨¡å‹4</th></tr></thead><tbody>
<tr><td><img src="./assets/06a-03.png" alt="" /></td><td><img src="./assets/06a-04.png" alt="" /></td></tr>
<tr><td><img src="./assets/06a-05.png" alt="" /></td><td><img src="./assets/06a-06.png" alt="" /></td></tr>
<tr><td>âœ… æ— äº¤äº’æ— å®æ—¶é€šå¸¸ç”¨å‰è€…</td><td>âœ… æ¸¸æˆé‡Œé¢é€šå¸¸ç”¨åè€…</td></tr>
<tr><td>âœ… å·¦ï¼šç›´æ¥ç”Ÿæˆæ‰€æœ‰åŠ¨ä½œã€‚</td><td>âœ… å³ï¼šä¸€å¸§ä¸€å¸§åœ°ç”Ÿæˆã€‚</td></tr>
<tr><td></td><td>âœ… å³æ— æ³•è€ƒè™‘æœªæ¥ï¼Œä¸èƒ½æ ¹æ®å°†è¦å‘ç”Ÿçš„äº‹æƒ…è°ƒæ•´å½“å‰çš„åŠ¨ä½œã€‚ï¼ˆè‡ªå›å½’ï¼‰</td></tr>
</tbody></table>
<p>P25</p>
<h2 id="æ•°å­¦æ¨¡å‹"><a class="header" href="#æ•°å­¦æ¨¡å‹">æ•°å­¦æ¨¡å‹</a></h2>
<p>$$
x_t=f(x_{t-1})
$$</p>
<p><img src="./assets/06a-07.png" alt="" /></p>
<blockquote>
<p>âœ… ç”±äºåªå’Œä¸Šä¸€å¸§ç›¸å…³ï¼ŒäºŒå…ƒç»„ \(ï¼ˆx_{t-1}ï¼Œx_tï¼‰\) æ„æˆäº†ä¸€ä¸ªæ•°æ®ï¼Œå¸Œæœ›ä»é‡Œé¢å­¦åˆ°ä¸€äº›ä¿¡æ¯ã€‚<br />
âœ… Neural Network ç›¸å…³éƒ¨åˆ†è·³è¿‡ã€‚<br />
âœ… å½“å‰å…ˆä¸è€ƒè™‘ \(z\)<br />
âœ… å¯ä»¥æŠŠå®ƒå½“ä½œä¼˜åŒ–é—®é¢˜æ¥è§£ã€‚</p>
</blockquote>
<p>P40</p>
<h2 id="ambiguity-issue"><a class="header" href="#ambiguity-issue">Ambiguity Issue</a></h2>
<p>$$
x_t=f(x_{t-1})
$$</p>
<p><img src="./assets/06a-08.png" alt="" /></p>
<blockquote>
<p>âœ… ä½†æ˜¯ \(x_t\) å’Œ \(x_{t-1}\) çš„å…³ç³»æ˜¯æœ‰æ­§ä¹‰æ€§çš„ï¼Œæœ€åå­¦åˆ°ä¸€ä¸ªå¹³å‡çš„ \(x_t\).<br />
âœ… å› ä¸º\(x_{t-1}\)ä¸\(x_t\)ä¸æ˜¯ä¸€å¯¹ä¸€çš„mappingå…³ç³»ã€‚</p>
</blockquote>
<p>P41</p>
<h2 id="hidden-variables"><a class="header" href="#hidden-variables">Hidden Variables</a></h2>
<p>$$
x_t=f(x_{t-1};z)
$$</p>
<p><img src="./assets/06a-09.png" alt="" /></p>
<blockquote>
<p>âœ… éœ€è¦åŠ å…¥ä¸€ä¸ªé¢å¤–çš„å˜é‡ï¼Œå¯ä»¥æ¥è‡ªç”¨æˆ·è¾“å…¥æˆ–å…ˆéªŒä¿¡æ¯ã€‚å…³é”®æ˜¯æ€ä¹ˆæ‰¾åˆ° \(z\)ï¼Œä½¿å­¦ä¹ æ¯”è¾ƒæœ‰æ•ˆã€‚</p>
</blockquote>
<table><thead><tr><th>ID</th><th>Year</th><th>Name</th><th>Note</th><th>Tags</th><th>Link</th></tr></thead><tbody>
<tr><td>113</td><td>2017</td><td>Phasefunctioned neural networks for character control</td><td>PFNN</td><td></td><td><a href="https://caterpillarstudygroup.github.io/ReadPapers/113.html">link</a></td></tr>
</tbody></table>
<p>P55</p>
<h3 id="ç›¸å…³å·¥ä½œ-1"><a class="header" href="#ç›¸å…³å·¥ä½œ-1">ç›¸å…³å·¥ä½œ</a></h3>
<table><thead><tr><th></th><th></th></tr></thead><tbody>
<tr><td><img src="./assets/06a-21.png" alt="" /></td><td>*SIGGRAPH 2018 <br> âœ… è®ºæ–‡ä¸€ï¼šé™¤è§’è‰²å§¿æ€ï¼Œè¿˜è€ƒè™‘è„šçš„é€Ÿåº¦ã€‚</td></tr>
<tr><td><img src="./assets/06a-22.png" alt="" /></td><td>*SIGGRAPH 2020 <br> âœ… è®ºæ–‡äºŒï¼šæŠŠä¸¤ä¸ªè„šæ‹†å¼€ï¼Œå¹¶è€ƒè™‘æ‰‹ï¼Œåˆ†åˆ«å®šä¹‰ç›¸ä½å‡½æ•°ã€‚</td></tr>
<tr><td><img src="./assets/06a-023.png" alt="" /></td><td>*SIGGRAPH 2022 <br> âœ… è®ºæ–‡ä¸‰ï¼šä»æ•°æ®ä¸­è‡ªåŠ¨å­¦åˆ°ç›¸ä½å‡½æ•°çš„ç»„åˆã€‚</td></tr>
</tbody></table>
<p>P57</p>
<h1 id="generative-models"><a class="header" href="#generative-models">Generative Models</a></h1>
<p><img src="./assets/06a-24.png" alt="" /></p>
<blockquote>
<p>âœ… ä¸å­¦ä¸¤å¸§å…³ç³»ï¼Œè€Œæ˜¯ç›´æ¥å­¦æ¦‚ç‡å¯†åº¦å‡½æ•°ã€‚<br />
âœ… éš¾ç‚¹ï¼š(1) çœŸå® PDF å¯èƒ½éå¸¸å¤æ‚ (2) ä»ä¸€ä¸ª PDF ä¸­é‡‡æ ·ä¹Ÿå¾ˆéš¾ã€‚<br />
âœ… PDF çš„ä½œç”¨æ˜¯åˆ¤æ–­åŠ¨ä½œæ˜¯ä¸æ˜¯çœŸçš„ã€‚</p>
</blockquote>
<p>P60</p>
<h2 id="å¸¸è§å¥—è·¯"><a class="header" href="#å¸¸è§å¥—è·¯">å¸¸è§å¥—è·¯</a></h2>
<table><thead><tr><th></th><th></th><th></th></tr></thead><tbody>
<tr><td>Generative Models</td><td>âœ… ä¸€èˆ¬ç”Ÿæˆå¼æ¨¡å‹æ˜¯è¿™æ ·çš„å½¢å¼ï¼šä»ä¸€ä¸ªç®€å•çš„ PDFï¼Œé€šè¿‡ \(f(z)\)ï¼Œæ˜ å°„åˆ° \(p(x)\). <br> âœ… å…³é”®æ˜¯ \(f(z)\) è¦å­¦å¥½ã€‚</td><td><img src="./assets/06a-025.png" alt="" /></td></tr>
<tr><td>Variational Autoencoders</td><td>âœ… VAEï¼šå·²çŸ¥ä¸€äº›çœŸå®æ•°æ®é‡‡æ ·ï¼Œç”¨ Encoder ç¼–ç åˆ°ç®€å•åˆ†å¸ƒä¸Šçš„ç‚¹ï¼Œå†ç”¨Decoder å˜å›åŸåˆ†å¸ƒä¸Šçš„ç‚¹ã€‚<br> âœ… control VAE æ˜¯ VAEï¼‹æ§åˆ¶ï¼‹ç‰©ç†ä»¿çœŸ</td><td><img src="./assets/06a-25.png" alt="" /></td></tr>
<tr><td>Generative Adversarial Network</td><td>âœ… GANï¼šæ—  Encoderï¼Œå¢åŠ ä¸€ä¸ªåˆ¤åˆ«å™¨ã€‚ <br> âœ… ASEã€AMP æ˜¯ GAN çš„æ§åˆ¶ç‰ˆæœ¬ã€‚ <br> âœ… RL ä¸ç»“åˆç‰©ç†éš¾ä»¥ workï¼Œå› ä¸ºéš¾ä»¥å®šä¹‰ reward.</td><td><img src="./assets/06a-26.png" alt="" /></td></tr>
<tr><td>Normalizing Flows</td><td>âœ… æ ‡å‡†åŒ–æµï¼šç±»ä¼¼ VAEï¼Œä½¿ç”¨ä¸€ä¸ªå¯é€†å‡½æ•°ã€‚</td><td><img src="./assets/06a-27.png" alt="" /></td></tr>
<tr><td>Diffusion Models</td><td>âœ… æ‰©æ•£æ¨¡å‹ï¼šå¤šæ¬¡ç¼–ç ä¸è§£ç ã€‚  <br> âœ… ä¸€ä¸ªåŠ¨ä½œåºåˆ—ç›¸å½“äºéšç©ºé—´é‡Œçš„ä¸€æ¡è½¨è¿¹ã€‚</td><td><img src="./assets/06a-28.png" alt="" /></td></tr>
</tbody></table>
<p>P62</p>
<h2 id="ç›¸å…³å·¥ä½œ-2"><a class="header" href="#ç›¸å…³å·¥ä½œ-2">ç›¸å…³å·¥ä½œ</a></h2>
<table><thead><tr><th></th><th></th></tr></thead><tbody>
<tr><td><img src="./assets/06a-29.png" alt="" /></td><td>[Ling et al. 2021 Character Controllers Using Motion <strong>VAEs</strong>]</td></tr>
<tr><td><img src="./assets/06a-30.png" alt="" /></td><td>[Henter et al. 2020, MoGlow: Probabilistic and Controllable Motion Synthesis Using <strong>Normalising Flows</strong>]<br>âœ… åˆ©ç”¨ RL ç­‰æ–¹æ³•ï¼Œåœ¨ lalent code ä¸Šç”Ÿæˆè½¨è¿¹ï¼Œå†æŠŠè½¨è¿¹è½¬åˆ°åŠ¨ä½œç©ºé—´ã€‚</td></tr>
<tr><td><img src="./assets/06a-31.png" alt="" /></td><td>[Zhang et al. 2022, <strong>arXiv</strong>, MotionDiffuse: Text-Driven Human Motion Generation with <strong>Diffusion Model</strong>]</td></tr>
<tr><td><img src="./assets/06a-32.png" alt="" /></td><td>[Tevet et al. 2022, <strong>arXiv</strong>, MDM: Human Motion <strong>Diffusion Model</strong>]</td></tr>
<tr><td></td><td>Ganimatorï¼šå°æ ·æœ¬ç”Ÿæˆ</td></tr>
</tbody></table>
<hr />
<blockquote>
<p>æœ¬æ–‡å‡ºè‡ªCaterpillarStudyGroupï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>
<p>https://caterpillarstudygroup.github.io/GAMES105_mdbook/</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><p>P2</p>
<h1 id="outline-6"><a class="header" href="#outline-6">Outline</a></h1>
<ul>
<li>
<p>Skinning</p>
<ul>
<li>Linear Blend Skinning (LBS)</li>
<li>Dual Quaternion Skinning (DQS)</li>
<li>Blendshapes</li>
</ul>
</li>
<li>
<p>Examples:</p>
<ul>
<li>The SMPL model</li>
<li>Facial Animation</li>
</ul>
</li>
</ul>
<blockquote>
<p>ğŸ” SIGGRAPH ç»å…¸çš„è’™çš®è¯¾ç¨‹ã€‚<br />
Many images are from: <a href="https://skinning.org/">https://skinning.org/</a><br />
<em>Alec Jacobson, Zhigang Deng, Ladislav Kavan, and J. P. Lewis. 2014</em>.<br />
<strong>Skinning: real-time shape deformation</strong>.<br />
<em>In ACM SIGGRAPH 2014 Courses (SIGGRAPH '14)</em></p>
</blockquote>
<p>P7</p>
<h1 id="skinning-deformation"><a class="header" href="#skinning-deformation">Skinning Deformation</a></h1>
<h2 id="ç»‘å®šä¸è’™çš®æ¦‚å¿µ"><a class="header" href="#ç»‘å®šä¸è’™çš®æ¦‚å¿µ">ç»‘å®šä¸è’™çš®æ¦‚å¿µ</a></h2>
<blockquote>
<p>âœ… Riggingï¼šåˆ›å»ºè„¸éƒ¨æ§åˆ¶å™¨æˆ–èº«ä½“éª¨éª¼ã€‚é»„è‰²ä¸ºåœ¨ Mesh é¡¶ç‚¹å†…æ”¾ç½®çš„éª¨éª¼ã€‚<br />
âœ… Sinningï¼šè®©æ§åˆ¶å™¨å¸¦åŠ¨çš®è‚¤è¿åŠ¨ã€‚æˆ–è®© Mesh é¡¶ç‚¹è·Ÿç€éª¨éª¼è¿åŠ¨ã€‚</p>
</blockquote>
<p><img src="./assets/07-01.png" alt="" /></p>
<p><img src="./assets/07-02.png" alt="" /></p>
<p>P12</p>
<h2 id="skinning-deformation-1"><a class="header" href="#skinning-deformation-1">Skinning Deformation</a></h2>
<h3 id="è®¡ç®—æ–¹å¼ä¸€"><a class="header" href="#è®¡ç®—æ–¹å¼ä¸€">è®¡ç®—æ–¹å¼ä¸€</a></h3>
<p><img src="./assets/07-03.png" alt="" /></p>
<blockquote>
<p>âœ… éª¨éª¼è¿åŠ¨çš„æ—‹è½¬å’Œå¹³ç§»åˆ†åˆ«ä¸º \(R\) å’Œ \(t\)ï¼Œå…³èŠ‚çš„ä½ç½®å’Œæœå‘åˆ™å˜æˆäº† \({Q}'\) å’Œ \({o}'\).<br />
âœ… æ±‚ \(x\) çš„æ–°ä½ç½® \({x}'\). æœ¬è´¨ä¸Šå°±æ˜¯åæ ‡ç³»å˜æ¢ï¼šä¸–ç•Œåæ ‡ç³» â†’ \({o}\) åæ ‡ç³» â†’ \({o}'\) åæ ‡ç³» â†’ ä¸–ç•Œåæ ‡ç³»</p>
</blockquote>
<p>P13</p>
<h3 id="è®¡ç®—æ–¹å¼äºŒ"><a class="header" href="#è®¡ç®—æ–¹å¼äºŒ">è®¡ç®—æ–¹å¼äºŒ</a></h3>
<p><img src="./assets/07-04.png" alt="" /> </p>
<blockquote>
<p>âœ… \(r\) ä¸º \(x\) åœ¨éª¨éª¼åæ ‡çš„è¡¨è¾¾ï¼Œç”¨ \(r\) è®¡ç®—æ›´ç®€æ´ã€‚ </p>
</blockquote>
<p>P16</p>
<h2 id="bind-pose"><a class="header" href="#bind-pose">Bind Pose</a></h2>
<p><img src="./assets/07-06.png" alt="" /></p>
<blockquote>
<p>âœ… å½“éª¨éª¼å‚è€ƒå§¿æ€ä¸ Mesh å‚è€ƒå§¿æ€ä¸ä¸€è‡´æ—¶ï¼Œéœ€è¦å…ˆæ—‹è½¬éª¨éª¼åˆ° Mesh å§¿æ€ã€‚</p>
</blockquote>
<p>P20</p>
<h2 id="skinning-deformation---2-joints"><a class="header" href="#skinning-deformation---2-joints">Skinning Deformation - 2 joints</a></h2>
<p><img src="./assets/07-08.png" alt="" /></p>
<p>$$
r_2=Q^T_2(x-o_2)   \quad \quad  r_1=Q^T_1(x-o_1)
$$</p>
<blockquote>
<p>âœ… å¤šéª¨éª¼åœºæ™¯ï¼Œ\(x\) åœ¨å…³èŠ‚ \(O_1\) å’Œ \(O_2\) ä¸‹åˆ†åˆ« \(r_1\) å’Œ \(r_2\) ä¸¤ç§è¡¨è¾¾ã€‚</p>
</blockquote>
<p>P23<br />
<img src="./assets/07-09.png" alt="" /></p>
<blockquote>
<p>âœ… å¾—åˆ°çš„æ—‹è½¬åè¡¨è¾¾åˆ†åˆ«ä¸º \({x}'_1\) å’Œ \({x}'_2\)ï¼Œé€šè¿‡æƒé‡å¯¹å®ƒä»¬ç»“åˆã€‚</p>
</blockquote>
<p>P29<br />
<img src="./assets/07-10.png" alt="" /></p>
<blockquote>
<p>âœ… åŒæ—¶è€ƒè™‘æ‰€æœ‰ Mesh é¡¶ç‚¹å’Œæ‰€æœ‰å…³èŠ‚ã€‚</p>
</blockquote>
<p>P31</p>
<h2 id="linear-blend-skinning-lbs"><a class="header" href="#linear-blend-skinning-lbs">Linear Blend Skinning (LBS)</a></h2>
<p>$$
{x}'_ i= \sum_ {j=1} ^ {m} w _ {ij}({Q}'_ jr_{ij}+{o}'_j)
$$</p>
<ul>
<li>Used widely in industry</li>
<li>Efficient and GPU-friendly
<ul>
<li>Games like it</li>
</ul>
</li>
</ul>
<blockquote>
<p>âœ… Bind Poseï¼šè®©éª¨éª¼ä¸ Mesh å¯¹é½ï¼Œä¸º Bind Poseï¼<br />
âœ… Bind Pose æƒ…å†µä¸‹ Motion ä¸ä¸€å®šä¸ºé›¶ã€‚</p>
</blockquote>
<p>P33</p>
<h2 id="automatic-skinning"><a class="header" href="#automatic-skinning">Automatic Skinning?</a></h2>
<table><thead><tr><th></th></tr></thead><tbody>
<tr><td><img src="./assets/07-11.png" alt="" /></td></tr>
<tr><td><img src="./assets/07-12.png" alt="" /></td></tr>
</tbody></table>
<p>Pinocchio [Baran et al., 2007]</p>
<p>P37</p>
<h2 id="linear-blend-skinning-lbs-1"><a class="header" href="#linear-blend-skinning-lbs-1">Linear Blend Skinning (LBS)</a></h2>
<p><img src="./assets/07-13.png" alt="" /></p>
<blockquote>
<p>âœ… å…¬å¼ç¬¬ä¸€é¡¹å¯¹ \(R_j\) æ‰€åŠ æƒï¼Œæ‰€å¾—åˆ°çš„å¾ˆæœ‰å¯èƒ½ä¸å†æ˜¯æ—‹è½¬çŸ©é˜µã€‚</p>
</blockquote>
<p>å­˜åœ¨çš„é—®é¢˜ï¼š Candy-Wrapper Artifact</p>
<p><img src="./assets/07-14.png" alt="" /></p>
<p>P40</p>
<h2 id="advanced-skinning-methods"><a class="header" href="#advanced-skinning-methods">Advanced Skinning Methods</a></h2>
<ul>
<li>
<p>Multi-linear Skinning (we will not cover this)</p>
<ul>
<li>Multi-weight enveloping [Wang and Phillips 2002]</li>
<li>Animation Space [Merry et al. 2006]</li>
<li>â€¦â€¦</li>
</ul>
</li>
<li>
<p>Nonlinear Skinning</p>
<ul>
<li>Dual-quaternion Skinning (DQS)</li>
</ul>
</li>
</ul>
<p><img src="./assets/07-15.png" alt="" /></p>
<blockquote>
<p>âœ… DQï¼šå¯¹å¶å››å…ƒæ•°ã€‚</p>
</blockquote>
<p>P41</p>
<h2 id="non-linear-skinning"><a class="header" href="#non-linear-skinning">Non-linear Skinning</a></h2>
<p><img src="./assets/07-16.png" alt="" /></p>
<h3 id="quaternions-and-slerp"><a class="header" href="#quaternions-and-slerp">quaternions and SLERP</a></h3>
<p>Can we use quaternions and SLERP?</p>
<p>P42</p>
<p><img src="./assets/07-16-1.png" alt="" /></p>
<blockquote>
<p>âœ… ä¸è¡Œã€‚åŸå› ï¼šç¬¬ä¸€é¡¹ä¸ç¬¬äºŒé¡¹å¿…é¡»è¦é…åˆå¥½ï¼Œå¦åˆ™ä¼šä¹±æ‰ã€‚</p>
</blockquote>
<p>P43</p>
<h3 id="ä»å…¬å¼è§’åº¦æ¥è§£é‡Šä¸è¡Œçš„åŸå› "><a class="header" href="#ä»å…¬å¼è§’åº¦æ¥è§£é‡Šä¸è¡Œçš„åŸå› ">ä»å…¬å¼è§’åº¦æ¥è§£é‡Šä¸è¡Œçš„åŸå› </a></h3>
<p>$$
{x}' _ i = ( \sum _ {j=1}^{m} w _ {ij} R _ j) x _ i+ \sum _ {j=1}^{m}w _ {ij}t_ j
$$</p>
<p>$$
R \in SO(3)
$$</p>
<p>$$
T_j=\begin{bmatrix}
R_j &amp; t_j\\
0 &amp;1
\end{bmatrix} \in SE(3)
$$</p>
<blockquote>
<p>âœ… \(T_j\) æ„æˆä¸€ä¸ªåˆšæ€§å˜æ¢ç¾¤ã€‚</p>
</blockquote>
<p>P46</p>
<h3 id="interpolation-in-ğ‘†ğ‘‚3"><a class="header" href="#interpolation-in-ğ‘†ğ‘‚3">Interpolation in ğ‘†ğ‘‚(3)</a></h3>
<p><img src="./assets/07-17.png" alt="" /></p>
<blockquote>
<p>âœ… çº¿æ€§æ’å€¼å’Œ SLERP æ’å€¼ SO(3) ä¸Šã€‚</p>
</blockquote>
<p>P49</p>
<h3 id="interpolation-in-ğ‘†ğ¸3"><a class="header" href="#interpolation-in-ğ‘†ğ¸3">Interpolation in ğ‘†ğ¸(3)</a></h3>
<p><img src="./assets/07-18.png" alt="" /></p>
<blockquote>
<p>âœ… SEï¼ˆ3ï¼‰ä¸Šçš„çº¿æ€§æ’å€¼ï¼Œæ’å€¼åˆ°ä¸€ä¸ªé€€åŒ–çš„ç‚¹ã€‚</p>
</blockquote>
<p>P51</p>
<h3 id="intrinsic-blending"><a class="header" href="#intrinsic-blending">Intrinsic Blending</a></h3>
<p><img src="./assets/07-19.png" alt="" /></p>
<p>P52</p>
<h2 id="dual-quaternion-skinning-dqs"><a class="header" href="#dual-quaternion-skinning-dqs">Dual-Quaternion Skinning (DQS)</a></h2>
<ul>
<li>Approximation of intrinsic averages in SE(3)</li>
</ul>
<p>Ladislav Kavan, Steven Collins, Jiri Zara, Carol Oâ€˜Sullivan. <strong>Geometric Skinning with</strong><br />
<strong>Approximate Dual Quaternion Blending</strong>, ACM Transaction on Graphics, 27(4), 2008.</p>
<blockquote>
<p>âœ… æŠŠæ—‹è½¬ ï¼‹ å¹³ç§»çš„åˆšæ€§å˜æ¢è¡¨è¾¾ä¸ºå¯¹å¶å››å…ƒæ•°ã€‚</p>
</blockquote>
<p>P54</p>
<h3 id="dual-numbers"><a class="header" href="#dual-numbers">Dual Numbers</a></h3>
<p><img src="./assets/07-20.png" alt="" /></p>
<p>P55</p>
<h3 id="dual-quaternion"><a class="header" href="#dual-quaternion">Dual Quaternion</a></h3>
<ul>
<li>Dual quaternion</li>
</ul>
<p>$$
\hat{q} =q_0 + \varepsilon q_\varepsilon
$$</p>
<p>$$
\text{where } \varepsilon^2=0
$$</p>
<p>A good note of dual-quaternion:<br />
<a href="https://faculty.sites.iastate.edu/jia/files/inline-files/dual-quaternion.pdf">https://faculty.sites.iastate.edu/jia/files/inline-files/dual-quaternion.pdf</a></p>
<p>P56</p>
<h3 id="dual-quaternion-1"><a class="header" href="#dual-quaternion-1">Dual Quaternion</a></h3>
<ul>
<li>Scalar Multiplication</li>
</ul>
<p>$$
s\hat{q}=sq_r+sq_\varepsilon\varepsilon
$$</p>
<ul>
<li>Addition</li>
</ul>
<p>$$
\hat{q} _ 1 + \hat{q} _2=q _ {r1}+ q _ {r2} + \varepsilon (q _ {\varepsilon 1} + q _ {\varepsilon 2})
$$</p>
<ul>
<li>Multiplication</li>
</ul>
<p>$$
\hat{q} _ 1 \hat{q} _ 2 = q _ {r1} q _ {r2} + \varepsilon (q _ {r1} q _ {\varepsilon 2} + q _ {r2} q _ {\varepsilon 1})
$$</p>
<p>P57</p>
<h3 id="dual-quaternion-2"><a class="header" href="#dual-quaternion-2">Dual Quaternion</a></h3>
<ul>
<li>Dual quaternion</li>
</ul>
<p>$$
\hat{q}=q_0+\varepsilon q_\varepsilon
$$</p>
<ul>
<li>Conjugation</li>
</ul>
<p>$$
\mathrm{I}:\hat{q}^* =q ^ * _ 0+\varepsilon q ^ * _ \varepsilon
$$</p>
<p>$$
\mathrm{II}:\hat{q}^ {\circ}  =q _ 0 - \varepsilon q _ \varepsilon 
$$</p>
<p>$$
\mathrm{III}: \hat{q} ^ \star    = q ^ * _ 0 - \varepsilon q ^ *_ \varepsilon 
$$</p>
<p>$$
\quad \quad \quad \quad = ({\hat{q} ^ *}) ^ {\circ} = (\hat{q} ^ {\circ}) ^ *
$$</p>
<p>$$
(\hat{q} _1\hat{q}_2)^\times =\hat{q} _1 ^\times \hat{q}_2^\times
$$</p>
<ul>
<li>Norm</li>
</ul>
<p>$$
||\hat{q}||=\sqrt{\hat{q}^*\hat{q}} =||q_0||+\frac{\varepsilon (q_0\cdot q_\varepsilon) }{||q_0||} 
$$</p>
<p>P58</p>
<h3 id="dual-quaternion-3"><a class="header" href="#dual-quaternion-3">Dual Quaternion</a></h3>
<ul>
<li>Unit dual quaternion: \(||\hat{q}||=1\), which requires:</li>
</ul>
<p>$$
||q_0||=1
$$</p>
<p>$$
q_0 \cdot q_\varepsilon=0
$$</p>
<p>P59</p>
<h3 id="dual-quaternion--rigid-transformation"><a class="header" href="#dual-quaternion--rigid-transformation">Dual Quaternion â‡” Rigid Transformation</a></h3>
<ul>
<li>Like quaternion, any rigid transformation \(T \in SE(3)\) can be converted <strong>into a unit dual quaternion</strong></li>
</ul>
<p>$$
Tx=Rx+t
$$</p>
<p>$$
T=[R\mid t]\to \hat{q} =q_0+\varepsilon q_\varepsilon 
$$</p>
<p>$$
\begin{matrix}
q_0=r \quad &amp; \text{ quaternion of } R \quad \quad\quad\quad\\
q_\varepsilon =\frac{1}{2} tr &amp; \text{ pure quaternion } t = (0,t)
\end{matrix}
$$</p>
<blockquote>
<p>âœ… æŠŠä¸€ä¸ªåˆšæ€§å˜æ¢è¡¨ç¤ºä¸ºå¯¹å¶å››å…ƒæ•°ã€‚</p>
</blockquote>
<p>P60</p>
<h3 id="dual-quaternion--rigid-transformation-1"><a class="header" href="#dual-quaternion--rigid-transformation-1">Dual Quaternion â‡” Rigid Transformation</a></h3>
<ul>
<li>Transform a vector \(v\) using unit dual quaternion</li>
</ul>
<p>$$
{\hat{v} }' =\hat{q} \hat{v} \hat{q} ^\star 
$$</p>
<p>where</p>
<p>$$
\begin{align*}
\hat{v} &amp; = 1+\varepsilon (0,v) \\
&amp; =(1,0,0,0)+\varepsilon (0,v_x,v_y,v_z)
\end{align*}
$$</p>
<p>$$
\quad
$$</p>
<p>$$
\mathrm{III}: \hat{q} ^ \star    = q ^ * _ 0 - \varepsilon q ^ *_ \varepsilon 
$$</p>
<p>$$
\quad \quad \quad \quad = ({\hat{q} ^ *}) ^ {\circ} = (\hat{q} ^ {\circ}) ^ *
$$</p>
<p>P61</p>
<h3 id="dual-quaternion--rigid-transformation-2"><a class="header" href="#dual-quaternion--rigid-transformation-2">Dual Quaternion â‡” Rigid Transformation</a></h3>
<ul>
<li>Like quaternion, any rigid transformation \(T \in SE(3)\) can be converted <strong>into a unit dual quaternion</strong></li>
</ul>
<p>$$
T=[R\mid t]\to \hat{q} =q_0+\varepsilon q_\varepsilon 
$$</p>
<p>$$
\begin{matrix}
q_0=r \quad \\
q_\varepsilon =\frac{1}{2} tr 
\end{matrix}
$$</p>
<p>\(\hat{q}\) and \(-\hat{q}\) represent the same transformation
\(\hat{Q}\) is a <strong>double cover</strong> of \(SE(3)\)</p>
<p>P62</p>
<h2 id="double-cover-visualized"><a class="header" href="#double-cover-visualized">Double Cover Visualized</a></h2>
<p><img src="./assets/07-21.png" alt="" /></p>
<p>P63</p>
<h2 id="interpolating-dual-quaternion"><a class="header" href="#interpolating-dual-quaternion">Interpolating Dual-Quaternion</a></h2>
<p><img src="./assets/07-22.png" alt="" /></p>
<p>P64</p>
<h2 id="dual-quaternion-linear-blending-dlb"><a class="header" href="#dual-quaternion-linear-blending-dlb">Dual-Quaternion Linear Blending (DLB)</a></h2>
<p><img src="./assets/07-022.png" alt="" /></p>
<p>P65</p>
<h2 id="dual-quaternion-skinning-dqs-1"><a class="header" href="#dual-quaternion-skinning-dqs-1">Dual-Quaternion Skinning (DQS)</a></h2>
<p><img src="./assets/07-23.png" alt="" /></p>
<p>P66</p>
<h2 id="budging-artifact-of-dqs"><a class="header" href="#budging-artifact-of-dqs">Budging Artifact of DQS</a></h2>
<p><img src="./assets/07-24.png" alt="" /></p>
<blockquote>
<p>âœ… è¶Šå¾€å³è’™çš®æƒé‡è¶Šå…‰æ»‘ã€‚<br />
âœ… DQBS ä¹Ÿæœ‰æ¯”è¾ƒä¸¥é‡çš„ artifacts.</p>
</blockquote>
<p>P67</p>
<h2 id="how-to-correct-lbs"><a class="header" href="#how-to-correct-lbs">How to Correct LBS?</a></h2>
<p><img src="./assets/07-25.png" alt="" /></p>
<blockquote>
<p>âœ… LBS çš„å¤©ç„¶ç¼ºé™·</p>
</blockquote>
<p>P69</p>
<h2 id="how-to-correct-lbs-1"><a class="header" href="#how-to-correct-lbs-1">How to Correct LBS?</a></h2>
<p><img src="./assets/07-26.png" alt="" /></p>
<p>P74</p>
<h2 id="scattered-data-interpolation"><a class="header" href="#scattered-data-interpolation">Scattered Data Interpolation</a></h2>
<p><img src="./assets/07-27.png" alt="" /></p>
<p>P76</p>
<h2 id="scattered-data-interpolation-1"><a class="header" href="#scattered-data-interpolation-1">Scattered Data Interpolation</a></h2>
<ul>
<li>Linear
<ul>
<li>Least squares</li>
</ul>
</li>
<li>Splines</li>
<li>Inverse distance weighting</li>
<li>Gaussian process</li>
<li>Radial Basis Function</li>
<li>â€¦â€¦</li>
</ul>
<p><img src="./assets/07-28.png" alt="" /></p>
<p>P81</p>
<h2 id="radial-basis-function-rbf-interpolation"><a class="header" href="#radial-basis-function-rbf-interpolation">Radial Basis Function (RBF) Interpolation</a></h2>
<p>$$
y=\sum_{i=1}^{k} w_i\varphi (||x-x_i||)
$$</p>
<p><img src="./assets/07-29.png" alt="" /></p>
<p>P83</p>
<h2 id="radial-basis-function-rbf-interpolation-1"><a class="header" href="#radial-basis-function-rbf-interpolation-1">Radial Basis Function (RBF) Interpolation</a></h2>
<p>$$
y=\sum_{i=1}^{k} w_i\varphi (||x-x_i||)
$$</p>
<p>How to compute \(w_i\) ? We need \(f(x_i)=y_i\)</p>
<p>$$
\begin{bmatrix}<br />
R_{1,1} &amp; R_{1,2} &amp; \cdots &amp; R_{1,K} \\<br />
R_{2,1} &amp; R_{2,2} &amp;   &amp; \vdots \\<br />
\vdots &amp;   &amp; \ddots &amp; \vdots \\<br />
R_{K,1} &amp; \cdots &amp; \cdots &amp; R_{K,K}<br />
\end{bmatrix} \begin{bmatrix}
w_1\\
w_2 \\
\vdots\\
w_K
\end{bmatrix}=\begin{bmatrix}
y_1\\
y_2 \\
\vdots\\
y_K
\end{bmatrix}
$$</p>
<p>$$
R_{i,j}=\varphi (||x_i-x_j||)
$$</p>
<p><img src="./assets/07-30.png" alt="" /></p>
<p>P84</p>
<h2 id="radial-basis-function-rbf"><a class="header" href="#radial-basis-function-rbf">Radial Basis Function (RBF)</a></h2>
<p>$$
y=\sum_{i=1}^{k} w_i\varphi (||x-x_i||)
$$</p>
<ul>
<li>Gaussian:</li>
</ul>
<p>$$
\varphi (r)=e^{-(r/c)^2}
$$</p>
<ul>
<li>Inverse multiquadric:</li>
</ul>
<p>$$
\varphi (r)=\frac{1}{\sqrt{r^2+c^2} } 
$$</p>
<ul>
<li>Thin plate spline:</li>
</ul>
<p>$$<br />
\varphi (r)=r^2 \log r
$$</p>
<ul>
<li>Polyharmonic splines:</li>
</ul>
<p>$$
\varphi (r)=\begin{cases}
r^k,k=2n+1\\
\\<br />
r^k \log r,k=2n
\end{cases}
$$</p>
<p>P85</p>
<h2 id="pose-space-deformation"><a class="header" href="#pose-space-deformation">Pose Space Deformation</a></h2>
<p>$$
{x}' =\sum_{j=1}^{m} w_iT_j (x+\delta (x,\theta ))
$$</p>
<ul>
<li>\({x}'= SKIN(PSD(x))\)</li>
<li>ğ‘ƒğ‘†ğ· is implemented as RBF interpolation</li>
<li>Example shapes can be created manually
<ul>
<li>Or by 3D scanning real people â†’ the SMPL model</li>
</ul>
</li>
</ul>
<p>J. P. Lewis, Matt Cordner, and Nickson Fong. 2000. <strong>Pose space deformation: a unified approach to shape</strong></p>
<p><strong>interpolation and skeleton-driven deformation</strong>. In <em>Proceedings of the 27th annual conference on Computer</em></p>
<p><em>graphics and interactive techniques</em> (SIGGRAPH â€™00), ACM Press/Addison-Wesley Publishing Co., USA, 165â€“172.</p>
<p>P86</p>
<h2 id="pose-space-deformation-1"><a class="header" href="#pose-space-deformation-1">Pose Space Deformation</a></h2>
<p><img src="./assets/07-31.png" alt="" /></p>
<p>P87</p>
<h2 id="issues"><a class="header" href="#issues">Issues</a></h2>
<ul>
<li>Per-shape or per-vertex interpolation
<ul>
<li>Should we interpolate a shape as a whole?</li>
</ul>
</li>
<li>Local or global interpolation?
<ul>
<li>Should a vertex be affected by all joints?</li>
</ul>
</li>
<li>Interpolation algorithm?
<ul>
<li>Is RBF the only choice?</li>
</ul>
</li>
</ul>
<p>SIGGRAPH Course 2014 â€” Skinning: Real-time Shape Deformation</p>
<p>P88</p>
<h2 id="example-based-skinning-ebs-vs-skeleton-subspace-deformation-ssd"><a class="header" href="#example-based-skinning-ebs-vs-skeleton-subspace-deformation-ssd">Example-based Skinning (EBS) vs. Skeleton Subspace Deformation (SSD)</a></h2>
<p>\(^\ast \)EBS: PSD<br />
\(\quad\)</p>
<ul>
<li>Good: Easy to control</li>
<li>Good: Good quality</li>
<li>Good: <strong>Pose-dependent details</strong> (e.g. bulging muscle and extruding veins)</li>
</ul>
<p>\(\quad\)</p>
<ul>
<li>Bad: Creating examples can be cumbersome</li>
<li>Bad: Extra storage for examples</li>
<li>Bad: Interpolation needs careful tuning</li>
</ul>
<p>\(\quad\)</p>
<p>\(^\ast \)SSD: LBS, DQS, etc.<br />
\(\quad\)</p>
<ul>
<li>Good: Easy to implement</li>
<li>Good: Fast and GPU friendly</li>
</ul>
<p>\(\quad\)</p>
<ul>
<li>Bad: Various artifacts</li>
<li>Bad: Skinning weights needs careful tuning</li>
<li>Bad: Hard to create pose-dependent details</li>
</ul>
<p>P89</p>
<h2 id="example-smpl-model"><a class="header" href="#example-smpl-model">Example: SMPL Model</a></h2>
<ul>
<li>A widely adopted human model in ML/CV</li>
<li>Learned on real scan data</li>
<li>Combines SSD and EBS techniques</li>
</ul>
<p><img src="./assets/07-32.png" alt="" /></p>
<p>P92</p>
<h2 id="recall-principal-component-analysis-pca"><a class="header" href="#recall-principal-component-analysis-pca">Recall: Principal Component Analysis (PCA)</a></h2>
<ul>
<li>Given a dataset {\(x_i\)}, \(x_i \in \mathbb{R} ^N\), then PCA gives</li>
</ul>
<p>$$
x_i=\bar{x}+\sum_{k=1}^{n} w_{i,k}u_k
$$</p>
<ul>
<li>\(u_k\) is the \(k\)-th principal component
<ul>
<li>A direction in \( \mathbb{R} ^N\) along which the rojection of {\(x_i\)} has the \(k\)-th maximal <strong>variance</strong></li>
</ul>
</li>
<li>\(w_{i,k}=(x_i-\bar{x})\cdot u_k\) is the score of \(x_i\) on \(u_k\)</li>
</ul>
<p>P93</p>
<h2 id="recall-principal-component-analysis-pca-1"><a class="header" href="#recall-principal-component-analysis-pca-1">Recall: Principal Component Analysis (PCA)</a></h2>
<p>â€¢ Given a dataset  {\(x_i\)}, \(x_i \in \mathbb{R} ^N\), the PCA can be computed by apply <strong>eigen decomposition</strong> on the covariance matrix</p>
<p>$$
\sum =X^TX=U\begin{bmatrix}
\sigma ^2_1 &amp;  &amp;  &amp; \\
&amp; \sigma ^2_2 &amp;  &amp; \\
&amp;  &amp; \ddots  &amp; \\
&amp;  &amp;  \sigma ^2_N
\end{bmatrix}U^T
$$</p>
<ul>
<li>
<p>\(X=[x_0-\bar{x}, x_1-\bar{x},\dots ,x_N-\bar{x}]^T\)</p>
</li>
<li>
<p>\(\sigma _i\ge \sigma _j\ge 0\) when \(i&lt; j\), corresponds to the Explained Variance</p>
</li>
<li>
<p>\(U=[u_1,u_2,\dots,u_N]\)</p>
</li>
</ul>
<p><img src="./assets/07-007.png" alt="" /></p>
<p>P94</p>
<h2 id="pca-over-body-shapes"><a class="header" href="#pca-over-body-shapes">PCA over Body Shapes</a></h2>
<p><img src="./assets/07-33.png" alt="" /></p>
<p>P95</p>
<h2 id="smpl-model-body-shape"><a class="header" href="#smpl-model-body-shape">SMPL Model: Body Shape</a></h2>
<p><img src="./assets/07-34.png" alt="" /></p>
<p>P96</p>
<h2 id="smpl-model-pose-blend-shapes"><a class="header" href="#smpl-model-pose-blend-shapes">SMPL Model: Pose Blend Shapes</a></h2>
<p><img src="./assets/07-35.png" alt="" /></p>
<p>P97</p>
<h2 id="smpl-model-deformation"><a class="header" href="#smpl-model-deformation">SMPL Model: Deformation</a></h2>
<p>$$
T(\beta ,\theta )=\bar{T} + \sum _ {m=1}^{|\beta |} \beta _ m S_ n + \sum _ {n=1}^{|\theta |}\theta _np_n
$$</p>
<p>$$
x=SKIN(T(\beta ,\theta ),\theta ,w)
$$</p>
<p>$$
SKIN:\text{LBS, DQS, etc}\dots 
$$</p>
<p><img src="./assets/07-36.png" alt="" /></p>
<p>[SMPL: A Skinned Multi-Person Linear Model]</p>
<p>P99</p>
<h2 id="facial-animation"><a class="header" href="#facial-animation">Facial Animation</a></h2>
<p><img src="./assets/07-37.png" alt="" /></p>
<p>P101</p>
<h2 id="facial-animation-1"><a class="header" href="#facial-animation-1">Facial Animation</a></h2>
<p><img src="./assets/07-38.png" alt="" /></p>
<blockquote>
<p>âœ… \(B_j\) ä¸ ID æ— å…³ï¼Œèƒ½åšå‡ºå·®ä¸å¤šçš„æ•ˆæœã€‚<br />
âœ… è¦æ›´ç²¾ç»†çš„æ•ˆæœï¼Œå¯ä»¥å®šä¹‰ä¸ ID ç›¸å…³çš„ \(B_j\).</p>
</blockquote>
<p>P102</p>
<h2 id="facial-blendshapes"><a class="header" href="#facial-blendshapes">Facial Blendshapes</a></h2>
<p><img src="./assets/07-39.png" alt="" /></p>
<p>P103</p>
<h2 id="a-typical-set-of-blendshapes-arkit"><a class="header" href="#a-typical-set-of-blendshapes-arkit">A Typical Set of Blendshapes (ARKit)</a></h2>
<p><img src="./assets/07-40.png" alt="" /></p>
<p>P104</p>
<h2 id="blendshapes-vs-example-based-skinning"><a class="header" href="#blendshapes-vs-example-based-skinning">Blendshapes vs. Example-based Skinning</a></h2>
<p><img src="./assets/07-41.png" alt="" /></p>
<p><img src="./assets/07-42.png" alt="" /></p>
<p><img src="./assets/07-43.png" alt="" /></p>
<blockquote>
<p>âœ… å‡ ç§ä¸åŒçš„è¡¨æƒ…åŸºæ··åˆæ–¹å¼ã€‚<br />
âœ… ç¬¬äºŒç§ï¼Œç›´æ¥åœ¨å‡ ä¸ªè„¸ä¹‹é—´åšæ··åˆï¼Œé€‚ç”¨äºæ•°æ®å°‘çš„æƒ…å†µã€‚</p>
</blockquote>
<p>P105</p>
<h2 id="morphable-face-models"><a class="header" href="#morphable-face-models">Morphable Face Models</a></h2>
<p><img src="./assets/07-44.png" alt="" /><br />
<img src="./assets/07-45.png" alt="" /></p>
<p>Egger et al. 2020. <strong>3D Morphable Face Models - Past, Present, and Future</strong>. <em>ACM Trans. Graph</em>. 39, 5 (June 2020), 157:1-157:38.</p>
<blockquote>
<p>âœ… ç¬¬ä¸€é¡¹ï¼šå¹³å‡è„¸ã€‚ç¬¬äºŒé¡¹ï¼šPCA. ç¬¬ä¸‰é¡¹ï¼šè¡¨æƒ…åŸºã€‚<br />
âœ… \(B_i^{ID}\) é€šå¸¸ç”± PCA å¾—åˆ°ã€‚<br />
âœ… åŸºäºè„¸éƒ¨è‚Œè‚‰çš„ç‰©ç†ä»¿çœŸã€‚</p>
</blockquote>
<p>P107</p>
<h2 id="how-to-animate-a-face"><a class="header" href="#how-to-animate-a-face">How to Animate a Face?</a></h2>
<p><img src="./assets/07-47.png" alt="" /></p>
<p>P110</p>
<h2 id="face-tracking"><a class="header" href="#face-tracking">Face Tracking</a></h2>
<p><img src="./assets/07-48.png" alt="" /></p>
<blockquote>
<p>âœ… ç”¨ä¸€ä¸ªè§†é¢‘äººè„¸é©±åŠ¨ 3D äººè„¸ã€‚<br />
âœ… äººè„¸ \(\overset{â‘ }{\rightarrow} \) ç‰¹å¾ç‚¹  \(\overset{â‘¡}{\rightarrow} \) è¡¨æƒ…å‚æ•°<br />
âœ… 1ã€æå–    \(\quad\)   2ã€IKï¼</p>
</blockquote>
<hr />
<blockquote>
<p>æœ¬æ–‡å‡ºè‡ªCaterpillarStudyGroupï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>
<p>https://caterpillarstudygroup.github.io/GAMES105_mdbook/</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><p>P4</p>
<h1 id="physics-based-character-animation"><a class="header" href="#physics-based-character-animation">Physics-based Character Animation</a></h1>
<p>[ControlVAE â€“ Yao et al. 2022]</p>
<blockquote>
<p>âœ… ç‰©ç†æ–¹æ³•çš„éš¾ç‚¹ï¼š<br />
âœ… (1) ä»¿çœŸï¼šåœ¨è®¡ç®—æœºä¸­æ¨¡æ‹Ÿå‡ºçœŸå®ä¸–ç•Œçš„è¿è¡Œæ–¹å¼ã€‚<br />
âœ… (2) æ§åˆ¶ï¼šç”Ÿæˆè§’è‰²çš„åŠ¨ä½œï¼Œæ¥åšå‡ºå“åº”ã€‚</p>
</blockquote>
<p>P5</p>
<h1 id="outline-7"><a class="header" href="#outline-7">Outline</a></h1>
<ul>
<li>Simulation Basis
<ul>
<li>Numerical Integration: Euler methods</li>
</ul>
</li>
<li>Equations of Rigid Bodies
<ul>
<li>Rigid Body Kinematics</li>
<li>Newton-Euler equations</li>
</ul>
</li>
<li>Articulated Rigid Bodies
<ul>
<li>Joints and constraints</li>
</ul>
</li>
<li>Contact Models
<ul>
<li>Penalty-based contact</li>
<li>Constraint-based contact</li>
</ul>
</li>
</ul>
<p><a href="https://www.cs.cmu.edu/%7Ebaraff/sigcourse/">https://www.cs.cmu.edu/~baraff/sigcourse/</a></p>
<blockquote>
<p>âœ… è§’è‰²ç‰©ä½“åŠ¨ç”»é€šå¸¸ä¸å…³å¿ƒä»¿çœŸæ€ä¹ˆå®ç°ã€‚<br />
âœ… ä½†ä¹Ÿå¯ä»¥æŠŠä»¿çœŸå½“æˆç™½ç›’ï¼Œç”¨æ¨¡å‹çš„æ–¹æ³•æ¥å®ç°ã€‚<br />
âœ… ç²’å­è¿åŠ¨æ¨¡æ‹Ÿçš„éƒ¨åˆ†è·³è¿‡ã€‚P6-P22<br />
âœ… å¼¹ç°§æ¨¡æ‹Ÿè·³è¿‡ã€‚P23-P27<br />
âœ… åˆšä½“æ¨¡æ‹Ÿè·³è¿‡ã€‚P28-P56</p>
</blockquote>
<p>P57</p>
<h1 id="kinematics-vs-dynamics"><a class="header" href="#kinematics-vs-dynamics">Kinematics vs. Dynamics</a></h1>
<p><img src="./assets/08-01.png" alt="" /></p>
<blockquote>
<p>âœ… è¿åŠ¨å­¦ä¸åŠ¨åŠ›å­¦ï¼Œä¸»è¦åŒºåˆ«åœ¨äºæœ‰æ²¡æœ‰è€ƒè™‘è§’è‰²è´¨é‡ã€‚å› ä¸ºè´¨é‡ä»£è¡¨æƒ¯æ€§ï¼Œæœ‰æƒ¯æ€§å°±ä¸èƒ½ç¬ç§»ã€‚<br />
âœ… åŠ¨åŠ›å­¦åŸºæœ¬æ¦‚å¿µè·³è¿‡ã€‚P58-P89</p>
</blockquote>
<p>P91</p>
<h1 id="articulated-rigid-bodies"><a class="header" href="#articulated-rigid-bodies">Articulated Rigid Bodies</a></h1>
<h2 id="a-system-with-two-links"><a class="header" href="#a-system-with-two-links">A System with Two Links</a></h2>
<p><img src="./assets/08-02.png" alt="" /></p>
<blockquote>
<p>âœ… ä¸¤ä¸ªåˆšä½“çš„åœºæ™¯ï¼Œå¦‚æœä¸¤ä¸ªåˆšä½“ç‹¬ç«‹ï¼Œå¯ä»¥ä»¥çŸ©é˜µçš„æ–¹å¼æ‰©å±•ã€‚<br />
âœ… ç‰©ä½“åœ¨åŠ›çš„ä½œç”¨ä¸‹çš„ç‰©ç†çŠ¶æ€çš„æ›´æ–°å…¬å¼ï¼è§ GAMES 103ï¼<br />
âœ… æ¯ä¸€è¡Œæ˜¯ç‹¬ç«‹çš„ï¼Œè”ç«‹èµ·æ¥ä¸ºæ–¹ç¨‹ç»„ã€‚</p>
</blockquote>
<p>ä»¥ä¸Šå…¬å¼ä¼šç®€åŒ–ä¸ºï¼š</p>
<p>$$
M\dot{v} +C(x,v)=f
$$</p>
<blockquote>
<p>âœ… ç¬¬äºŒé¡¹æ˜¯å…³äºxå’Œvçš„å‡½æ•°ï¼Œxä½“ç°åœ¨\(\omega\)ï¼Œvä½“ç°åœ¨Iã€‚</p>
</blockquote>
<p>P93</p>
<blockquote>
<p>âœ… ç»“æœæ˜¯ä¸¤ä¸ªç‰©ä½“ä¼šåˆ†å¼€ã€‚</p>
</blockquote>
<p><img src="./assets/08-03.png" alt="" /></p>
<p>P95</p>
<h2 id="a-system-with-two-links-and-a-joint"><a class="header" href="#a-system-with-two-links-and-a-joint">A System with Two Links and a Joint</a></h2>
<p><img src="./assets/08-04.png" alt="" /></p>
<p>$$
M\dot{v} +C(x,v)=f+f_J
$$</p>
<blockquote>
<p>âœ… ä¸¤ä¸ªç‰©ä½“ä¸­é—´æœ‰ä¸€ä¸ªå…³èŠ‚ï¼Œçº¦æŸä¸¤ä¸ªç‰©ä½“ä¸èƒ½åˆ†å¼€ã€‚<br />
âœ… é€šè¿‡æ—‹è½¬åŠ›\(f_J\)çš„æ–¹æ³•æ¥ä¿è¯çº¦æŸï¼Œä½† \(f_J\) æ˜¯æœªçŸ¥çš„ã€‚</p>
</blockquote>
<p>P97</p>
<h3 id="constraintsç®€åŒ–é—®é¢˜åˆ†æ"><a class="header" href="#constraintsç®€åŒ–é—®é¢˜åˆ†æ">Constraintsç®€åŒ–é—®é¢˜åˆ†æ</a></h3>
<h4 id="é—®é¢˜æè¿°-5"><a class="header" href="#é—®é¢˜æè¿°-5">é—®é¢˜æè¿°</a></h4>
<blockquote>
<p>âœ… å‡è®¾æœ‰ä¸€çº¦æŸï¼šå°çƒå¿…é¡»æŒ‰è½¨é“è¡Œè¿›ã€‚</p>
</blockquote>
<p><img src="./assets/08-05-1.png" alt="" /></p>
<h4 id="å°çƒé€Ÿåº¦åˆ†æ"><a class="header" href="#å°çƒé€Ÿåº¦åˆ†æ">å°çƒé€Ÿåº¦åˆ†æ</a></h4>
<blockquote>
<p>âœ… æ ¹æ®å·²çŸ¥æ¡ä»¶ï¼Œå¯ä»¥è¿›è¡Œä»¥ä¸‹åˆ†æï¼šç”±äºæ¯ä¸€æ—¶åˆ»éƒ½æ»¡è¶³ï¼Œå¯¹æ—¶é—´æ±‚å¯¼ï¼Œå¯¼æ•°ä¸ºé›¶ã€‚</p>
</blockquote>
<p><img src="./assets/08-05-2.png" alt="" /></p>
<p>å› æ­¤å¾—åˆ°çº¦æŸä¸ºï¼šå¦‚æœè¦æ±‚å°çƒæŒ‰ç…§è½¨é“è¿è¡Œï¼Œå…¶é€Ÿåº¦å¿…é¡»æ»¡è¶³ä»¥ä¸‹å…¬å¼ã€‚</p>
<p>P98 </p>
<p><img src="./assets/08-5.png" alt="" /></p>
<h4 id="å°çƒçš„çº¦æŸåŠ›åˆ†æ"><a class="header" href="#å°çƒçš„çº¦æŸåŠ›åˆ†æ">å°çƒçš„çº¦æŸåŠ›åˆ†æ</a></h4>
<p>P99</p>
<blockquote>
<p>âœ… ä¸ºäº†è®©å°çƒæ»¡è¶³çº¦æŸï¼Œéœ€ç»™å°çƒä¸€ä¸ªçº¦æŸåŠ›ã€‚ </p>
</blockquote>
<p><img src="./assets/08-06.png" alt="" /></p>
<p>\(^\ast \) Constraint is passive No energy gain or loss!!!</p>
<p>$$
f_c\cdot v=0
$$</p>
<blockquote>
<p>âœ… çº¦æŸåŠ›ä¸åº”äº§ç”Ÿèƒ½é‡ï¼Œå³åŠ›ä¸è¿åŠ¨æ–¹å‘å‚ç›´ã€‚</p>
</blockquote>
<p>P100</p>
<p><img src="./assets/08-07.png" alt="" /></p>
<blockquote>
<p>âœ… ç»“åˆæ˜¯ä¸€é¡µçš„ç»“è®ºå¯çŸ¥ï¼š\(f_c\) ä¸ \(J\) åŒæ–¹å‘ï¼Œä½†å¤§å°æœªçŸ¥ã€‚<br />
âœ… \(f_c\) å¤§å°ä»¥å½“å‰çŠ¶æ€å’Œå¤–åŠ›æƒ…å†µè®¡ç®—è€Œå¾—ã€‚</p>
</blockquote>
<p>P101</p>
<h4 id="å°çƒçš„æ•´ä½“å—åŠ›åˆ†æ"><a class="header" href="#å°çƒçš„æ•´ä½“å—åŠ›åˆ†æ">å°çƒçš„æ•´ä½“å—åŠ›åˆ†æ</a></h4>
<blockquote>
<p>âœ… å¯¹å°çƒåšå—åŠ›åˆ†æï¼Œå—åˆ°å¤–åŠ› \(f\) å’Œçº¦æŸåŠ› \(f_c\)ï¼<br />
âœ… å‡è®¾ \(Mï¼Œxï¼Œvï¼f\) å·²çŸ¥ï¼Œæ±‚ \(f_c\) ï¼Œä½¿å¾—å°çƒæ²¿è½¨è¿¹ç§»åŠ¨ã€‚</p>
</blockquote>
<p><img src="./assets/08-08.png" alt="" /></p>
<p>$$
\begin{align*}
M\dot{v} &amp; =f+J^T\lambda  \\
Jv&amp;=0
\end{align*}
$$</p>
<blockquote>
<p>âœ… å…¬å¼ 1ï¼š\(fï¼am\)ï¼å…¬å¼ 2ï¼šå‰é¢æ¨å¯¼å¾—å‡ºã€‚æŠŠä¸¤ä¸ªå…¬å¼ç¦»æ•£åŒ–ã€‚<br />
âœ… å› ä¸ºå…¬å¼ 2 åªçº¦æŸäº†é€Ÿåº¦æ²¡æœ‰çº¦æŸä½ç½®ã€‚ç¦»æ•£åŒ–åå¯¹åŸå…¬å¼åªæ˜¯è¿‘ä¼¼ï¼Œä¼šæœ‰è¯¯å·®ï¼Œå¯¼åˆ°å°çƒè¿œç¦»æ›²çº¿ã€‚</p>
</blockquote>
<p>$$
\begin{align*}
M\frac{v_{n+1}-v_n}{h}  &amp; =f+J^T\lambda  \\
Jv_{n+1}&amp;=0
\end{align*}
$$</p>
<blockquote>
<p>âœ… å¾—å‡ºæœªçŸ¥æ•°ä¸º\(\lambda\)å’Œ\(v_{n+1}\)çš„è”ç«‹æ–¹ç¨‹ç»„ï¼Œæ±‚è§£æ–¹ç¨‹ç»„ã€‚<br />
âœ… è§£æ–¹ç¨‹ç»„ä¸éš¾ï¼Œä½†å­˜åœ¨å°çƒåç¦»è½¨é“çš„é—®é¢˜ã€‚</p>
</blockquote>
<p>P103</p>
<blockquote>
<p>âœ… å½“ç‰©ä½“åç¦»è½¨é“ï¼Œè¦æœ‰æ‹‰å›æ¥çš„é€Ÿåº¦ã€‚å› æ­¤å…¬å¼2æ”¹ä¸ºï¼š</p>
</blockquote>
<p>$$
Jv_{n+1}=\alpha \frac{C-g(x_n)}{h} 
$$</p>
<p>Correction of numerical errors<br />
ğ›¼: error reduction parameter (ERP)</p>
<p>P104</p>
<h4 id="æ–¹ç¨‹ç»„æ±‚è§£"><a class="header" href="#æ–¹ç¨‹ç»„æ±‚è§£">æ–¹ç¨‹ç»„æ±‚è§£</a></h4>
<p><img src="./assets/08-09.png" alt="" /></p>
<blockquote>
<p>âœ… æŠŠERPç®€å†™ä¸º \(b\).<br />
âœ… ä¸ºäº†é˜²æ­¢çŸ©é˜µä¸å¯é€†ï¼Œå¢åŠ  \(\beta I\).ï¼ˆå¸¸è§æŠ€å·§ï¼‰<br />
âœ… è§£ \(\lambda\) éœ€è¦å…ˆæ±‚é€†ã€‚</p>
</blockquote>
<p>P105</p>
<h3 id="joint-constraint"><a class="header" href="#joint-constraint">Joint Constraint</a></h3>
<h4 id="çº¦æŸæ–¹ç¨‹"><a class="header" href="#çº¦æŸæ–¹ç¨‹">çº¦æŸæ–¹ç¨‹</a></h4>
<blockquote>
<p>âœ… å‰é¢æ˜¯çº¦æŸåº”ç”¨çš„ç®€å•ä¾‹å­ï¼ŒçœŸæ­£çš„é—®é¢˜æ˜¯å¦‚ä½•æŠŠçº¦æŸåº”ç”¨åˆ°ä¸¤ä¸ªç‰©ä½“çš„è¿æ¥çº¦æŸä¸Šã€‚</p>
</blockquote>
<p><img src="./assets/08-10.png" alt="" /></p>
<blockquote>
<p>âœ… å› æ­¤è®¾è®¡çº¦æŸï¼šä» \(x_1\) æ±‚ \(x_J\)ä½ç½® å’Œä» \(x_2\) æ±‚ \(x_J\)ä½ç½®æ‰€å¾—ç»“æœåº”è¯¥ç›¸åŒã€‚</p>
</blockquote>
<p>$$
x_1+R_1r_1=x_J=x_2+R_2r_2
$$</p>
<p>å¯¹\(dt\)æ±‚å¯¼ï¼š</p>
<p>$$
v_1+\omega _1\times r_1=v_2+\omega _2\times r_2
$$</p>
<p>P106</p>
<blockquote>
<p>âœ… æ•´ç†å¾—çŸ©é˜µå½¢å¼ï¼Œå¾—ï¼š</p>
</blockquote>
<p>$$
\begin{bmatrix}
I_3 &amp; -[r_1] _ \times  &amp; -I_3 &amp; [r_2] _ \times 
\end{bmatrix}\begin{bmatrix}
v_1 \\
w_1 \\
v_2 \\
w_2
\end{bmatrix}=0
$$</p>
<blockquote>
<p>âœ… çŸ©é˜µä¹˜æ³•ç¬¬ä¸€é¡¹ä¸º \(J\)ï¼Œç¬¬äºŒé¡¹ä¸º \(v\). è¿›ä¸€æ­¥ç®€åŒ–ä¸ºï¼š</p>
</blockquote>
<p>$$
Jv=0
$$</p>
<p>P107</p>
<h4 id="è¿åŠ¨æ–¹ç¨‹çº¦æŸæ–¹ç¨‹"><a class="header" href="#è¿åŠ¨æ–¹ç¨‹çº¦æŸæ–¹ç¨‹">è¿åŠ¨æ–¹ç¨‹+çº¦æŸæ–¹ç¨‹</a></h4>
<p>$$
\begin{align*}
M\dot{v} +C(x,v)&amp; =f+J^T\lambda  \\
Jv&amp;=0
\end{align*}
$$</p>
<blockquote>
<p>âœ… å…¬å¼ 1ï¼šè¿åŠ¨æ–¹ç¨‹ã€‚å…¬å¼ 2ï¼šçº¦æŸæ–¹ç¨‹ã€‚<br />
âœ… è¿åŠ¨æ–¹ç¨‹ä¸çº¦æŸæ–¹ç¨‹è”ç«‹ã€‚</p>
</blockquote>
<p>P109</p>
<h4 id="different-types-of-joints"><a class="header" href="#different-types-of-joints">Different Types of Joints</a></h4>
<blockquote>
<p>âœ… å‰é¢æè¿°çš„æ˜¯ Ball Jointçš„çº¦æŸã€‚</p>
</blockquote>
<p><img src="./assets/08-11.png" alt="" /></p>
<blockquote>
<p>âœ… Hinge çº¦æŸï¼šé™¤äº†ä½ç½®è¿˜æœ‰è§’é€Ÿåº¦çº¦æŸï¼Œåœ¨æŸä¸ªè½´ä¸Šçš„è§’é€Ÿåº¦åº”å½“ä¸€è‡´ã€‚Universal ç±»ä¼¼ã€‚</p>
</blockquote>
<p>P110</p>
<h2 id="a-system-with-many-links-joints"><a class="header" href="#a-system-with-many-links-joints">A System with Many Links Joints</a></h2>
<p><img src="./assets/08-12.png" alt="" /></p>
<blockquote>
<p>âœ… åˆ†æ®µå¤šåˆšä½“åœ¨å…¬å¼ä¸Šæ²¡æœ‰æœ¬è´¨åŒºåˆ«ï¼Œåªæ˜¯çŸ©é˜µæ›´å¤§ä¸€ç‚¹ã€‚</p>
</blockquote>
<p>P111</p>
<h1 id="contacts"><a class="header" href="#contacts">Contacts</a></h1>
<blockquote>
<p>âœ… å¦‚ä½•å¤„ç†ä¸åœ°é¢çš„æ¥è§¦ï¼Œè®©äººç«™åœ¨åœ°é¢ä¸Šã€‚</p>
</blockquote>
<p><img src="./assets/08-13.png" alt="" /></p>
<blockquote>
<p>âœ… è¦è§£å†³çš„é—®é¢˜ï¼š(1) åœ°é¢æ¥è§¦æ£€æµ‹ (2) å¦‚ä½•å¯¹ç¢°æ’ç‚¹æ–½åŠ åŠ›ï¼Œä½¿ç‰©ä½“å‡ºæ¥ã€‚</p>
</blockquote>
<p>P114</p>
<h2 id="penalty-based-contact-model"><a class="header" href="#penalty-based-contact-model">Penalty-based Contact Model</a></h2>
<h3 id="baseline"><a class="header" href="#baseline">Baseline</a></h3>
<p><img src="./assets/08-14.png" alt="" /></p>
<p>$$
f_n=-k_pd-k_dv_{c,\perp }
$$</p>
<blockquote>
<p>âœ… ç±»ä¼¼å¼¹ç°§å½¢å¼ï¼Œé™·å…¥è¶Šæ·±ï¼ŒåŠ›è¶Šå¤§ã€‚<br />
âœ… ç¬¬äºŒé¡¹ï¼šä¸ºäº†é˜²æ­¢è½åœ°å¼¹é£ï¼Œå¢åŠ é˜»å°¼é¡¹ã€‚<br />
âœ… æ•ˆæœï¼šä¼šæœ‰ä¸€äº›é™·å…¥ï¼Œä½†ä¸ä¼šé™·å…¥å¤ªå¤š</p>
</blockquote>
<p>P115</p>
<h3 id="è€ƒè™‘æ‘©æ“¦åŠ›"><a class="header" href="#è€ƒè™‘æ‘©æ“¦åŠ›">è€ƒè™‘æ‘©æ“¦åŠ›</a></h3>
<p><img src="./assets/08-15.png" alt="" /></p>
<blockquote>
<p>âœ… å—åŠ›åˆ†æï¼šæ”¯æŒåŠ›ï¼ŒåŠ¨æ‘©æ“¦åŠ›ã€‚<br />
âœ… åŠ¨æ‘©æ“¦åŠ›ï¼Œå¤§å°ï¼æ”¯æŒåŠ› x æ‘©æ“¦ç³»æ•°ï¼Œæ–¹å‘ä¸è¿åŠ¨æ–¹å‘ç›¸å</p>
</blockquote>
<p>$$
\begin{align*}
f_t&amp;=-\mu f_n\frac{v_{c,\parallel }}{||v_{c,\parallel }||} 
\end{align*}
$$</p>
<blockquote>
<p>âœ… ä¸€èˆ¬ä¸æ¨¡æ‹Ÿé™æ‘©æ“¦åŠ›</p>
</blockquote>
<p>P116</p>
<h3 id="å­˜åœ¨çš„é—®é¢˜"><a class="header" href="#å­˜åœ¨çš„é—®é¢˜">å­˜åœ¨çš„é—®é¢˜</a></h3>
<blockquote>
<p>âœ… å­˜åœ¨çš„é—®é¢˜ï¼š\(K_p\) å¿…é¡»å¾ˆå¤§ï¼Œå¦åˆ™è„šé™·åœ°æ˜æ˜¾ï¼Œæ­¥é•¿å¿…é¡»éå¸¸å°ï¼Œå¦åˆ™ä¸ç¨³å®šã€‚</p>
</blockquote>
<p>P118</p>
<h2 id="contact-as-a-constraint"><a class="header" href="#contact-as-a-constraint">Contact as a Constraint</a></h2>
<blockquote>
<p>âœ… å¦ä¸€ç§æ–¹æ³•ï¼ŒæŠŠæ¥è§¦å»ºæ¨¡ä¸ºçº¦æŸã€‚</p>
</blockquote>
<h3 id="æ¥è§¦ç‚¹çŠ¶æ€åˆ†æ"><a class="header" href="#æ¥è§¦ç‚¹çŠ¶æ€åˆ†æ">æ¥è§¦ç‚¹çŠ¶æ€åˆ†æ</a></h3>
<p><img src="./assets/08-17.png" alt="" /></p>
<p>$$
x_c  =x+r_c \quad\quad\quad\quad\quad\quad
$$</p>
<p>$$
v_c  =v+\omega \times r_c=J_c \begin{bmatrix}
v\\
w
\end{bmatrix}
$$</p>
<p>$$
v_{c,\perp } =v+\omega \times r_c=J_{c,\perp  }\begin{bmatrix}
v \\
\omega 
\end{bmatrix}
$$</p>
<p>P120</p>
<h3 id="æ¥è§¦ç‚¹çº¦æŸåˆ†æ"><a class="header" href="#æ¥è§¦ç‚¹çº¦æŸåˆ†æ">æ¥è§¦ç‚¹çº¦æŸåˆ†æ</a></h3>
<p><img src="./assets/08-19.png" alt="" /></p>
<p>$$
v_c\perp \lambda =0
$$</p>
<blockquote>
<p>âœ… çº¦æŸ 1ï¼šç‚¹åœ¨ç«–ç›´æ–¹å‘çš„é€Ÿåº¦å¿…é¡»å¤§äº 0ï¼Œå³åªèƒ½å‘ä¸Šç§»åŠ¨ã€‚<br />
âœ… çº¦æŸ 2ï¼šåŠ›çš„å¤§å°ä¹Ÿå¤§äº 0ï¼åªèƒ½æ¨ï¼Œä¸èƒ½æ‹‰ã€‚<br />
âœ… çº¦æŸ 3ï¼šåŠ›å’Œé€Ÿåº¦åªèƒ½æœ‰ä¸€ä¸ªä¸ä¸ºé›¶ï¼Œå¦åˆ™ä¼šåšåŠŸã€‚åˆåœ¨ä¸€èµ·ç§°ä¸ºçº¿æ€§äº’è¡¥æ–¹ç¨‹ï¼Œæ˜¯é€šå¸¸ç¢°æ’å»ºæ¨¡æ–¹å¼ã€‚<br />
âœ… è¿™ä¸ªæ–¹ç¨‹æ¯”è¾ƒéš¾è§£ï¼Œä¾‹å¦‚ ODE</p>
</blockquote>
<p>è¿™ç±»é—®é¢˜è¢«ç§°ä¸ºï¼š(Mixed) Linear Complementary Problem (LCP)<br />
è§£LCPçš„æ–¹æ³•æœ‰ï¼š<br />
e.g. Lemke's algorithm â€“ a simplex algorithm</p>
<p>P122</p>
<h3 id="è€ƒè™‘æ‘©æ“¦åŠ›çš„çº¦æŸé—®é¢˜"><a class="header" href="#è€ƒè™‘æ‘©æ“¦åŠ›çš„çº¦æŸé—®é¢˜">è€ƒè™‘æ‘©æ“¦åŠ›çš„çº¦æŸé—®é¢˜</a></h3>
<p>How to deal the friction?</p>
<blockquote>
<p>ğŸ” Fast contact force computation for nonpenetrating rigid bodies.<br />
David Baraff. SIGGRAPH â€™94<br />
âœ… å¿«é€Ÿå®ç°é™æ‘©æ“¦çº¦æŸçš„å»ºæ¨¡ã€‚</p>
</blockquote>
<p>P123</p>
<h1 id="simulation-of-a-rigid-body-system"><a class="header" href="#simulation-of-a-rigid-body-system">Simulation of a Rigid Body System</a></h1>
<p><img src="./assets/08-18.png" alt="" /></p>
<blockquote>
<p>âœ… æŠŠäººç®€åŒ–ä¸ºåˆ†æ®µåˆšä½“ã€‚æ•´ä½“è¿‡ç¨‹ä¸ºï¼š<br />
âœ… (1) é»„ï¼šè®¡ç®—å½“å‰çŠ¶æ€ã€‚<br />
âœ… (2) ç»¿ï¼šè®¡ç®—çº¦æŸï¼Œæ±‚è§£ï¼Œè§£å‡ºä¸‹ä¸€æ—¶åˆ»çš„é€Ÿåº¦ã€‚<br />
âœ… (3) è“ï¼šæ›´æ–°ä¸‹ä¸€æ—¶åˆ»çš„é‡ï¼ˆç§¯åˆ†ï¼‰ã€‚<br />
âœ… ç¼ºå°‘éƒ¨åˆ†ï¼šä¸»åŠ¨åŠ› \(f\) æ¨åŠ¨è§’è‰²äº§ç”Ÿè¿åŠ¨ã€‚</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><p>P2</p>
<h1 id="outline-8"><a class="header" href="#outline-8">Outline</a></h1>
<ul>
<li>
<p>Simulating &amp; Actuating Characters</p>
<ul>
<li>Joint torques</li>
</ul>
</li>
<li>
<p>PD (Proportional-Derivative) control</p>
</li>
</ul>
<blockquote>
<p>âœ… åœ¨ä»¿çœŸåŸºç¡€ä¹‹ä¸Šï¼Œå¦‚ä½•é©±åŠ¨è§’è‰²åŠ¨ç”»ï¼Œå¦‚ä½•åŠ¨å¾—æ›´å¥½ï¼Œæ›´çœŸå®ã€‚<br />
âœ…ï¼ˆ1ï¼‰æ§åˆ¶åŠ›å¦‚ä½•æ–½åŠ åˆ°è§’è‰²èº«ä¸Š<br />
âœ…ï¼ˆ2ï¼‰å¦‚ä½•è®¡ç®—æ§åˆ¶åŠ›</p>
</blockquote>
<p>P4</p>
<h1 id="recap"><a class="header" href="#recap">Recap</a></h1>
<h2 id="dynamics-of-a-point-mass"><a class="header" href="#dynamics-of-a-point-mass">Dynamics of a Point Mass</a></h2>
<p><img src="./assets/09-01.png" alt="" /></p>
<p>P10</p>
<h2 id="rigid-body-dynamics"><a class="header" href="#rigid-body-dynamics">Rigid Body Dynamics</a></h2>
<p><img src="./assets/09-02.png" alt="" /></p>
<p>$$
\begin{bmatrix}
mI_3 &amp; 0\\
0 &amp; I
\end{bmatrix}\begin{bmatrix}
\dot{v}  \\
\dot{\omega }
\end{bmatrix}+\begin{bmatrix}
0\\
\omega \times I\omega 
\end{bmatrix}=\begin{bmatrix}
f \\
\tau 
\end{bmatrix}
$$</p>
<p>P12</p>
<p>Masses: \(m,I\)<br />
Kinematics:  \(x,v,R,\omega \)</p>
<p>Geometry:<br />
â€¢ Box, Sphere, Capsule, Mesh, â€¦<br />
â€¢ Collision detection<br />
â€¢ Compute \(m,I\)</p>
<blockquote>
<p>âœ… åœ¨ç‰©ç†å¼•æ“é‡Œé¢å®šä¹‰ä¸€ä¸ªåˆšä½“ï¼Œéœ€è¦æä¾›è¿™äº›å‚æ•°ã€‚</p>
</blockquote>
<p>P14</p>
<h2 id="dynamics-of-articulated-rigid-bodies"><a class="header" href="#dynamics-of-articulated-rigid-bodies">Dynamics of Articulated Rigid Bodies</a></h2>
<p><img src="./assets/09-04.png" alt="" /></p>
<blockquote>
<p>âœ… ä¸¤ä¸ªç‹¬ç«‹åˆšä½“ï¼Œå’Œä¸€ä¸ªä¸è®©å®ƒä»¬æ–­å¼€çš„çº¦æŸã€‚</p>
</blockquote>
<p>P15</p>
<p>$$
M\dot{v} +C(x,v)  =f+J^T\lambda
$$</p>
<p>P16</p>
<h2 id="simulation-of-a-rigid-body-system-1"><a class="header" href="#simulation-of-a-rigid-body-system-1">Simulation of a Rigid Body System</a></h2>
<p><img src="./assets/09-05.png" alt="" /></p>
<h1 id="simulating--actuating-characters"><a class="header" href="#simulating--actuating-characters">Simulating &amp; Actuating Characters</a></h1>
<p>P17</p>
<h2 id="defining-a-simulated-character"><a class="header" href="#defining-a-simulated-character">Defining a Simulated Character</a></h2>
<p>Rigid bodies:</p>
<ul>
<li>\(m_i,I_i,x_i,R_i\)</li>
<li>Geometries</li>
</ul>
<p>Joints:</p>
<ul>
<li>Position</li>
<li>Type</li>
</ul>
<blockquote>
<p>âœ… TypeæŒ‡å…³èŠ‚çš„ç±»å‹ï¼Œä¾‹å¦‚ Hintã€Universalç­‰ã€‚å®ƒå†³å®šäº†çº¦æŸæ–¹ç¨‹ã€‚</p>
</blockquote>
<ul>
<li>Bodies</li>
</ul>
<blockquote>
<p>âœ… å…³èŠ‚çš„æ•°é‡æ¯”åˆšä½“çš„æ•°é‡å°‘1</p>
</blockquote>
<p><img src="./assets/09-06.png" alt="" /></p>
<blockquote>
<p>âœ… ä»¿çœŸè¿‡ç¨‹ä¸­é€šå¸¸ä½¿ç”¨ç®€å•å‡ ä½•ä½“ä»£æ›¿ Mesh. ä¸ºäº†ä¾¿äºç¢°æ’æ£€æµ‹çš„è®¡ç®—ï¼Œä»¥åŠè¾¨åˆ«é‡Œå¤–ã€‚</p>
</blockquote>
<p>P19</p>
<h2 id="simulating-a-character-pipeline"><a class="header" href="#simulating-a-character-pipeline">Simulating a Character Pipeline</a></h2>
<p><img src="./assets/09-07.png" alt="" /></p>
<blockquote>
<p>âœ… è¿™ä¸ªä»¿çœŸæµç¨‹æ˜¯ ragdoll æ•ˆæœã€‚</p>
</blockquote>
<p>P22</p>
<h2 id="actuating-a-rigid-body"><a class="header" href="#actuating-a-rigid-body">Actuating a Rigid Body</a></h2>
<blockquote>
<p>âœ… æƒ³è®©è§’è‰²åšæŒ‡å®šåŠ¨ä½œï¼Œä¸èƒ½ç›´æ¥ä¿®æ”¹å…¶çŠ¶æ€ï¼Œè€Œæ˜¯æ§åˆ¶åŠ›å½±å“çŠ¶æ€ã€‚</p>
</blockquote>
<table><thead><tr><th></th><th></th></tr></thead><tbody>
<tr><td>åŠ›åŠ åœ¨è´¨å¿ƒä¸Š</td><td><img src="./assets/09-08.png" alt="" /></td></tr>
<tr><td>âœ… åœ¨ç‰©ä½“è¾¹ç¼˜æ—‹åŠ åŠ›ï¼Œç­‰ä»·äºåœ¨è´¨å¿ƒæ—‹åŠ åŠ›ï¼Œå¹¶æ—‹åŠ ä¸€ä¸ªå¯¼è‡´æ—‹è½¬çš„åŠ›çŸ©ã€‚</td><td><img src="./assets/09-09.png" alt="" /><br><img src="./assets/09-10.png" alt="" /></td></tr>
<tr><td>âœ… åœ¨è´¨å¿ƒä¸Šæ–½åŠ ä¸€ä¸ªåŠ›çŸ©ï¼Œç­‰ä»·äºæ–½åŠ ä¸€å¯¹å¤§å°ç›¸åŒæ–¹å‘ç›¸åçš„åŠ›ã€‚åœ¨è´¨å¿ƒå¤„çš„åˆåŠ›ä¸ºé›¶ï¼Œä¸ä¼šäº§ç”Ÿä½ç§»ï¼Œåªä¼šäº§ç”Ÿæ—‹è½¬ã€‚<br> âœ… åŠ›çŸ©åªæ˜¯æ•°å­¦ä¸Šçš„æ¦‚å¿µã€‚</td><td><img src="./assets/09-11.png" alt="" /></td></tr>
</tbody></table>
<p>P26</p>
<h2 id="actuating-articulated-rigid-bodies"><a class="header" href="#actuating-articulated-rigid-bodies">Actuating Articulated Rigid Bodies</a></h2>
<table><thead><tr><th></th><th></th></tr></thead><tbody>
<tr><td>âœ… ä¸ºäº†é©±åŠ¨è§’è‰²ï¼Œå¯ä»¥å•ç‹¬å¯¹æ¯ä¸ªåˆšä½“æ–½åŠ åŠ›æˆ–åŠ›çŸ©ã€‚</td><td><img src="./assets/09-12.png" alt="" /></td></tr>
<tr><td>âœ… ä¹Ÿå¯ä»¥åœ¨å…³èŠ‚ä¸Šæ–½åŠ åŠ›çŸ©ã€‚</td><td><img src="./assets/09-13.png" alt="" /></td></tr>
</tbody></table>
<p>P29</p>
<h2 id="joint-torques"><a class="header" href="#joint-torques">Joint Torques</a></h2>
<p>What is a joint torque?<br />
How is a joint torque applied?</p>
<blockquote>
<p>âœ… å›é¡¾å‰é¢å…¬å¼ï¼ŒåŠ›å’ŒåŠ›çŸ©éƒ½æ˜¯æ–½åŠ åœ¨åˆšä½“ä¸Šçš„ï¼Œå¦‚ä½•æ–½åŠ åœ¨å…³èŠ‚ä¸Š?</p>
</blockquote>
<p>P33</p>
<h3 id="ä»€ä¹ˆæ˜¯joint-torques"><a class="header" href="#ä»€ä¹ˆæ˜¯joint-torques">ä»€ä¹ˆæ˜¯Joint Torques</a></h3>
<blockquote>
<p>âœ… å…³èŠ‚ä¸Šçš„åŠ›çŸ©ï¼Œå¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªåˆšä½“å¯¹å¦ä¸€ä¸ªåˆšä½“åœ¨å…³èŠ‚å¤„æ–½åŠ çš„æˆå¯¹çš„åŠ›ï¼Œå…¶åˆåŠ›ä¸ºé›¶ï¼Œä½†å¯ä»¥è½¬åŒ–ä¸ºå¯¹å¦ä¸€åˆšä½“çš„åŠ›çŸ©ã€‚</p>
</blockquote>
<p><img src="./assets/09-014.png" alt="" /></p>
<p>$$
\sum_{i}^{} f_i=0
$$</p>
<blockquote>
<p>âœ… æ¯ä¸ªåŠ›éƒ½ä¼šå¯¹å…¶ä¸­ä¸€ä¸ªåˆšä½“çš„è´¨å¿ƒä¸Šäº§ç”ŸåŠ›çŸ©ã€‚</p>
</blockquote>
<p>$$
\tau _1= \sum _ {i}^{} (r_1+r_i) \times f_i=r_1 \times \sum _ {i}^{}f_i + \sum _ {i}^{}r_i \times f_i
$$</p>
<p>P34<br />
ç”±äº</p>
<p>$$
\sum _ {i}^{}  f_i=0
$$</p>
<p>å¾—ï¼š </p>
<p>$$
\tau _1= \sum _ {i}^{} r_i \times f_i \quad \quad \quad \quad \tau _2= -\sum _ {i}^{} r_i \times f_i
$$</p>
<blockquote>
<p>âœ… å¦ä¸€ä¸ªæ–¹å‘åŒç†ã€‚<br />
âœ… åŠ›çŸ©è·Ÿå…³èŠ‚çš„å†…ç½®æ²¡æœ‰å…³ç³»ã€‚</p>
</blockquote>
<p>P36<br />
ç»“è®ºï¼š</p>
<p><img src="./assets/09-16.png" alt="" /></p>
<blockquote>
<p>âœ… åœ¨å…³èŠ‚ä¸Šæ–½åŠ åŠ›çŸ© \( \tau\) ç­‰ä»·äºåœ¨ä¸€ä¸ªåˆšä½“ä¸Šæ–½åŠ  \( \tau\)ï¼Œåœ¨å¦ä¸€ä¸ªåˆšä½“ä¸Šæ–½åŠ  \(- \tau\).</p>
</blockquote>
<p>P38</p>
<h3 id="æ€æ ·æ–½åŠ joint-torques"><a class="header" href="#æ€æ ·æ–½åŠ joint-torques">æ€æ ·æ–½åŠ Joint Torques</a></h3>
<p>Applying a joint torque \( \tau\):</p>
<ul>
<li>Add \( \tau\) to one attached body</li>
<li>Add \( -\tau\) to the other attached body</li>
</ul>
<p>$$
M\begin{bmatrix}
\dot{v}_1 \\
\dot{\omega }_1 \\
\dot{v}_2\\
\dot{\omega }_2 
\end{bmatrix} + \begin{bmatrix}
0\\
\omega_1 \times I_1 \omega _1\\
0\\
\omega_2 \times I_2 \omega _2
\end{bmatrix}=\begin{bmatrix}
0 \\
\tau \\
0 \\
-\tau 
\end{bmatrix}+J^T\lambda 
$$</p>
<p>$$
Jv=0
$$</p>
<blockquote>
<p>âœ… é€šå¸¸åœ¨å­å…³èŠ‚ä¸ŠåŠ  \(\tau \)ï¼Œåœ¨çˆ¶å…³èŠ‚ä¸ŠåŠ  \(-\tau \)ï¼ </p>
</blockquote>
<p>P40</p>
<h2 id="simulating--controlling-a-character"><a class="header" href="#simulating--controlling-a-character">Simulating + Controlling a Character</a></h2>
<p><img src="./assets/09-17.png" alt="" /></p>
<blockquote>
<p>âœ… æ§åˆ¶å™¨ï¼Œæ ¹æ®å½“å‰è§’è‰²çŠ¶æ€ï¼Œä»¥åŠé¢å¤–æ§åˆ¶ä¿¡å·å®æ—¶è®¡ç®—å‡º \(f \) å’Œ \(\tau \)ï¼Œå½±å“è§’è‰²åŠ¨ä½œå˜åŒ–ã€‚</p>
</blockquote>
<p>P44</p>
<h3 id="forward-dynamics-vs-inverse-dynamics"><a class="header" href="#forward-dynamics-vs-inverse-dynamics">Forward Dynamics vs. Inverse Dynamics</a></h3>
<p><img src="./assets/09-18.png" alt="" /></p>
<blockquote>
<p>âœ… å‰å‘ä¸åå‘ï¼Œæ˜¯ä¸€ä¸ªè¿åŠ¨æ–¹ç¨‹çš„ä¸¤ç§ç”¨æ³•ã€‚<br />
âœ… ä»¿çœŸå™¨ä¸ºå‰å‘éƒ¨åˆ†ï¼Œæ§åˆ¶åé€†å‘éƒ¨åˆ†ã€‚</p>
</blockquote>
<p>P46</p>
<h3 id="fully-actuated-vs-underactuated"><a class="header" href="#fully-actuated-vs-underactuated">Fully-Actuated vs. Underactuated</a></h3>
<table><thead><tr><th></th><th></th></tr></thead><tbody>
<tr><td><img src="./assets/09-20.png" alt="" /></td><td><img src="./assets/09-21.png" alt="" /></td></tr>
<tr><td>If #actuators â‰¥ #dofs, the system is <strong>fully-actuated</strong></td><td>If #actuators &lt; #dofs, the system is <strong>underactuated</strong></td></tr>
<tr><td>For any \([x,v,\dot{v} ]\), there exists an \(f\) that produces the motion</td><td>For many \([x,v,\dot{v} ]\) , there is no such \(f\) that produces the motion</td></tr>
<tr><td>âœ… å¯ä»¥ç²¾ç¡®æ§åˆ¶æœºæ¢°è‡‚åˆ°è¾¾ç›®æ ‡çŠ¶æ€ã€‚</td><td>âœ… ä¸å€ŸåŠ©å¤–åŠ›æƒ…å†µï¼Œäººæ— æ³•æ§åˆ¶ Hips çš„çŠ¶æ€ï¼ˆä½ç½®ï¼‰ã€‚</td></tr>
</tbody></table>
<blockquote>
<p>âœ… ï¼ƒactuatorsï¼š\(f \) å’Œ \(\tau \) çš„è‡ªç”±åº¦ã€‚<br />
âœ… #dofsï¼šè§’è‰²çŠ¶æ€çš„è‡ªç”±åº¦ã€‚<br />
âœ… é¿å…è®©è§’è‰²æ‰å…¥æ— æ³•æ§åˆ¶çš„çŠ¶æ€ã€‚</p>
</blockquote>
<p>P49</p>
<h3 id="feedforward-vs-feedback"><a class="header" href="#feedforward-vs-feedback">Feedforward vs. Feedback</a></h3>
<p><img src="./assets/09-22.png" alt="" /></p>
<table><thead><tr><th>Feedforward control</th><th>Feedback control</th></tr></thead><tbody>
<tr><td>\(f,\tau =\pi (t)\)</td><td>\(f,\tau =\pi (s_t,t)\)</td></tr>
<tr><td>Apply predefined control signals <strong>without considering the current state</strong> of the system</td><td>Adjust control signals based on the current state of the system</td></tr>
<tr><td>Assuming unchanging system.</td><td>Certain perturbations are expected.</td></tr>
<tr><td>Perturbations may lead to unpredicted results<br>âœ… å¦‚æœè§’è‰²å—åˆ°æŒ åŠ¨è€Œåç¦»äº†åŸè®¡åˆ’ï¼Œæ— æ³•ä¿®æ­£å›æ¥ã€‚</td><td>The feedback signal will be used to improves the performance at the next state.</td></tr>
</tbody></table>
<p>P55</p>
<h1 id="proportional-derivative-control"><a class="header" href="#proportional-derivative-control">Proportional-Derivative Control</a></h1>
<blockquote>
<p>âœ… æœ‰åé¦ˆï¼Œä½†è¿˜æ˜¯ç®—æ˜¯å‰å‘æ§åˆ¶ï¼Œå› ä¸ºåé¦ˆçš„éƒ¨åˆ†å’Œæƒ³æ§åˆ¶çš„éƒ¨åˆ†ä¸å®Œå…¨ä¸€è‡´ã€‚</p>
</blockquote>
<h2 id="ç®€åŒ–é—®é¢˜åˆ†æ"><a class="header" href="#ç®€åŒ–é—®é¢˜åˆ†æ">ç®€åŒ–é—®é¢˜åˆ†æ</a></h2>
<h3 id="é—®é¢˜æè¿°-6"><a class="header" href="#é—®é¢˜æè¿°-6">é—®é¢˜æè¿°</a></h3>
<p>Compute force \(f\) to move the object to the target height</p>
<blockquote>
<p>âœ… ä¾‹å­ï¼šç‰©ä½“åªèƒ½æ²¿ç«¿ä¸Šä¸‹ç§»åŠ¨ï¼Œä¸”å—åˆ°é‡åŠ›ã€‚<br />
âœ… æ§åˆ¶ç›®çš„ï¼šè®¾è®¡æ§åˆ¶å™¨ï¼Œä½¿ç‰©ä½“åœ¨æ§åˆ¶åŠ›çš„ä½œç”¨ä¸‹è¾¾åˆ°ç›®æ ‡é«˜åº¦ã€‚</p>
</blockquote>
<p><img src="./assets/09-23-1.png" alt="" /></p>
<h3 id="ä½¿ç”¨æ¯”ä¾‹æ§åˆ¶"><a class="header" href="#ä½¿ç”¨æ¯”ä¾‹æ§åˆ¶">ä½¿ç”¨æ¯”ä¾‹æ§åˆ¶</a></h3>
<p><img src="./assets/09-23-2.png" alt="" /></p>
<p>å®é™…ä¸Šï¼šä¼šäº§ç”Ÿä¸Šä¸‹æŒ¯è¡ï¼Œä¸ä¼šåœåœ¨ç›®æ ‡ä½ç½®ã€‚</p>
<p><img src="./assets/09-23.png" alt="" /></p>
<p>P56</p>
<h3 id="æ¯”ä¾‹æ§åˆ¶damping"><a class="header" href="#æ¯”ä¾‹æ§åˆ¶damping">æ¯”ä¾‹æ§åˆ¶+Damping</a></h3>
<p><img src="./assets/09-24.png" alt="" /></p>
<blockquote>
<p>âœ… æ”¹è¿›ï¼šå¦‚æœç‰©ä½“å·²æœ‰åŒæ–¹å‘é€Ÿåº¦ï¼Œåˆ™åŠ›åŠ å¾—å°ä¸€ç‚¹ã€‚</p>
</blockquote>
<p>P57</p>
<h3 id="æ¯”ä¾‹å¾®åˆ†æ§åˆ¶"><a class="header" href="#æ¯”ä¾‹å¾®åˆ†æ§åˆ¶">æ¯”ä¾‹å¾®åˆ†æ§åˆ¶</a></h3>
<p><img src="./assets/09-24-1.png" alt="" /></p>
<blockquote>
<p>âœ… ç¬¬ä¸€é¡¹ï¼šæ¯”ä¾‹æ§åˆ¶ï¼›ç¬¬äºŒé¡¹ï¼šå¾®åˆ†æ§åˆ¶</p>
</blockquote>
<p>P59</p>
<blockquote>
<p>âœ… å­˜åœ¨çš„é—®é¢˜ï¼šä¸ºäº†æŠµæŠ—é‡åŠ›ï¼Œä¸€å®šä¼šå­˜åœ¨è¿™æ ·çš„è¯¯å·®ã€‚</p>
</blockquote>
<p><img src="./assets/09-26.png" alt="" /></p>
<p>P60</p>
<p>Increase stiffness \(k_p\) reduces the steady-state error, but can make the system too stiff and numerically unstable</p>
<blockquote>
<p>âœ… å¢åŠ  \(k_p\) å¯ä»¥å‡å°è¯¯å·®ï¼Œä½†ä¼šè®©äººçœ‹èµ·æ¥å¾ˆåƒµç¡¬ã€‚</p>
</blockquote>
<p>P61</p>
<h3 id="æ¯”ä¾‹ç§¯åˆ†å¾®åˆ†æ§åˆ¶-proportional-integral-derivative-controller"><a class="header" href="#æ¯”ä¾‹ç§¯åˆ†å¾®åˆ†æ§åˆ¶-proportional-integral-derivative-controller">æ¯”ä¾‹ç§¯åˆ†å¾®åˆ†æ§åˆ¶ Proportional-Integral-Derivative controller</a></h3>
<p><img src="./assets/09-27.png" alt="" /><br />
<img src="./assets/09-28.png" alt="" /></p>
<blockquote>
<p>âœ… è§£å†³è¯¯å·®æ–¹æ³•ï¼šç§¯åˆ†é¡¹ã€‚<br />
âœ… ä½†è§’è‰²åŠ¨ç”»é€šå¸¸ä¸ç”¨ç§¯åˆ†é¡¹ã€‚<br />
âœ… ç§¯åˆ†é¡¹è·Ÿå†å²ç›¸å…³ï¼Œä¼šå¸¦æ¥å®ç°çš„éº»çƒ¦å’Œæ§åˆ¶çš„ä¸ç¨³å®šã€‚</p>
</blockquote>
<p>P62</p>
<h2 id="pd-control-for-characters"><a class="header" href="#pd-control-for-characters">PD Control for Characters</a></h2>
<blockquote>
<p>âœ… å‰é¢æ˜¯ PD çš„ä¾‹å­ï¼Œè¿™é‡Œæ˜¯ PD åœ¨ç‰©ç†ä»¿çœŸè§’è‰²ä¸Šçš„åº”ç”¨ï¼Œè®¡ç®—åœ¨æ¯ä¸ªå…³èŠ‚ä¸Šæ–½åŠ å¤šå°‘åŠ›çŸ©ã€‚</p>
</blockquote>
<p><img src="./assets/09-29.png" alt="" /></p>
<p><img src="./assets/09-30.png" alt="" /></p>
<blockquote>
<p>âœ… é€šå¸¸ç›®æ ‡çš„é€Ÿåº¦ \(\bar{q} = 0\).</p>
</blockquote>
<p>å› æ­¤ï¼š<br />
<img src="./assets/09-31.png" alt="" /></p>
<p>P63</p>
<h3 id="pd-control-for-charactersçš„å‚æ•°å’Œæ•ˆæœ"><a class="header" href="#pd-control-for-charactersçš„å‚æ•°å’Œæ•ˆæœ">PD Control for Charactersçš„å‚æ•°å’Œæ•ˆæœ</a></h3>
<blockquote>
<p>âœ… \(K_p\) å¤ªå°ï¼šå¯èƒ½æ— æ³•è¾¾åˆ°ç›®æ ‡çŠ¶æ€ã€‚<br />
âœ… \(K_p\) å¤ªå¤§ï¼šäººä½“å¾ˆåƒµç¡¬ã€‚<br />
âœ… \(k_d\) å¤ªå°ï¼šåŠ¨ä½œæœ‰æ˜æ˜¾æŒ¯è¡ã€‚<br />
âœ… \(k_d\) å¤ªå¤§ï¼Œè¦èŠ±æ›´å¤šæ—¶é—´åˆ°è¾¾ç›®æ ‡èµ„æ€ã€‚</p>
</blockquote>
<p>P66</p>
<h2 id="tracking-controllers-1"><a class="header" href="#tracking-controllers-1">Tracking Controllers</a></h2>
<blockquote>
<p>âœ… å¼•å…¥PD Controlä¹‹åï¼Œæ§åˆ¶æœ¬è´¨ä¸Šå˜æˆäº†è®¾è®¡ targer stateï¼</p>
</blockquote>
<p><img src="./assets/09-32.png" alt="" /></p>
<p>P67</p>
<h3 id="full-body-tracking-controllers"><a class="header" href="#full-body-tracking-controllers">Full-body Tracking Controllers</a></h3>
<p><img src="./assets/09-33.png" alt="" /></p>
<blockquote>
<p>âœ… è®¾è®¡è§’è‰²çš„ç›®æ ‡è½¨è¿¹ã€‚<br />
âœ… ç›´æ¥ç”¨ PD æ§åˆ¶è·Ÿè¸ªåŠ¨æ•æ•°æ®ä¼šæœ‰å¾ˆå¤§çš„é—®é¢˜ï¼ŒåŸå› ï¼š<br />
ï¼ˆ1ï¼‰ç¨³æ€è¯¯å·®ã€‚<br />
ï¼ˆ2ï¼‰è¿åŠ¨è½¨è¿¹è·ŸåŸè½¨è¿¹ä¹‹é—´ä¼šç›¸å·®ä¸€ç‚¹ç‚¹ç›¸ä½<br />
ï¼ˆ3ï¼‰æ¬ é©±åŠ¨ç³»ç»Ÿï¼Œæœ‰ä¸€ç‚¹ç‚¹è¯¯å·®ï¼Œåé¢æ— æ³•ä¿®å¤ã€‚</p>
</blockquote>
<p>P71</p>
<h3 id="feedforward--feedback"><a class="header" href="#feedforward--feedback">feedforward ï¼Ÿ feedback</a></h3>
<p>Is PD control a <strong>feedforward</strong> control?<br />
a <strong>feedback</strong> control?</p>
<blockquote>
<p>âœ… æ˜¯åé¦ˆæ§åˆ¶ï¼Œå› ä¸ºè®¡ç®— \(\tau \) æ—¶ä½¿ç”¨äº†å½“å‰çŠ¶æ€ \(q\)ï¼<br />
âœ… æ˜¯å‰é¦ˆæ§åˆ¶ï¼Œå› ä¸ºåœ¨ PD ç³»ç»Ÿé‡Œï¼ŒçŠ¶æ€æ˜¯ä½ç½®ä¸æ˜¯ \(q\).</p>
</blockquote>
<p>P72</p>
<h2 id="æ¬ é©±åŠ¨ç³»ç»Ÿ"><a class="header" href="#æ¬ é©±åŠ¨ç³»ç»Ÿ">æ¬ é©±åŠ¨ç³»ç»Ÿ</a></h2>
<h3 id="æ¬ é©±åŠ¨ç³»ç»Ÿçš„é—®é¢˜"><a class="header" href="#æ¬ é©±åŠ¨ç³»ç»Ÿçš„é—®é¢˜">æ¬ é©±åŠ¨ç³»ç»Ÿçš„é—®é¢˜</a></h3>
<p>ç”±äºæ˜¯æ¬ é©±åŠ¨ç³»ç»Ÿï¼ŒTracking Mocap with Joint Torquesä¼šé‡åˆ°é—®é¢˜ï¼Œå› ä¸ºï¼š</p>
<p>\(\tau _j\): joint torques<br />
Apply \(\tau _j\) to â€œchildâ€ body<br />
Apply \(-\tau _j\) to â€œparentâ€ body<br />
<strong>All forces/torques sum up to zero</strong></p>
<blockquote>
<p>âœ… åˆåŠ›ä¸ºé›¶ï¼Œæ— æ³•æ§åˆ¶æ•´ä½“çš„ä½ç½®å’Œæœå‘ã€‚</p>
</blockquote>
<p>P73</p>
<h3 id="è§£å†³æ–¹æ³•å¢åŠ å‡€å¤–åŠ›"><a class="header" href="#è§£å†³æ–¹æ³•å¢åŠ å‡€å¤–åŠ›">è§£å†³æ–¹æ³•ï¼šå¢åŠ å‡€å¤–åŠ›</a></h3>
<p>\(f_0,\tau _0\): root force / torque<br />
\(\quad\quad\)Apply \(f_0\) to the root body<br />
\(\quad\quad\)Apply \(\tau _0\) to the root body<br />
\(\quad\quad\)Non-zero net force/torque on the character!</p>
<blockquote>
<p>âœ… å‡€å¤–åŠ›ï¼Œæ— æ–½åŠ›è€…ï¼Œç”¨äºå¸®åŠ©è§’è‰²ä¿æŒå¹³è¡¡ã€‚<br />
âœ… ç¼ºç‚¹ï¼šè®©è§’è‰²çœ‹èµ·æ¥åƒæçº¿æœ¨å¶ã€‚</p>
</blockquote>
<p>P75</p>
<h2 id="mixture-simulation-and-mocap"><a class="header" href="#mixture-simulation-and-mocap">Mixture Simulation and Mocap</a></h2>
<p><img src="./assets/09-34.png" alt="" /></p>
<blockquote>
<p>âœ… å…³é”®å¸§ä¸ä»¿çœŸçš„æ··åˆã€‚</p>
</blockquote>
<hr />
<blockquote>
<p>æœ¬æ–‡å‡ºè‡ªCaterpillarStudyGroupï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>
<p>https://caterpillarstudygroup.github.io/GAMES105_mdbook/</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><p>P2</p>
<h1 id="outline-9"><a class="header" href="#outline-9">Outline</a></h1>
<ul>
<li>
<p>More about PD (Proportional-Derivative) control</p>
<ul>
<li>Stable PD control</li>
</ul>
</li>
<li>
<p>Feedforward Motion Control</p>
<ul>
<li>Trajectory optimization</li>
</ul>
</li>
</ul>
<blockquote>
<p>âœ… ä¸é€šè¿‡æ–½åŠ å‡€å¤–åŠ›ï¼Œæ„å»ºç‰©ç†å‡†ç¡®çš„åŠ¨ç”»ã€‚</p>
</blockquote>
<ul>
<li>Feedback Motion Control
<ul>
<li>Static balance</li>
</ul>
</li>
</ul>
<p>P3</p>
<h1 id="pd-control-for-characters-1"><a class="header" href="#pd-control-for-characters-1">PD Control for Characters</a></h1>
<h2 id="åŸºæœ¬æ–¹æ³•"><a class="header" href="#åŸºæœ¬æ–¹æ³•">åŸºæœ¬æ–¹æ³•</a></h2>
<p><img src="./assets/10-01.png" alt="" /></p>
<p><img src="./assets/10-02.png" alt="" /></p>
<p>P4</p>
<h3 id="å­˜åœ¨çš„é—®é¢˜-1"><a class="header" href="#å­˜åœ¨çš„é—®é¢˜-1">å­˜åœ¨çš„é—®é¢˜</a></h3>
<p>PD control computes torques based on <strong>errors</strong></p>
<h4 id="steady-state-error"><a class="header" href="#steady-state-error">Steady state error</a></h4>
<p>This arm never reaches the target angle under gravity</p>
<p><img src="./assets/10-03.png" alt="" /></p>
<p>P5</p>
<h4 id="motion-falls-behind-the-reference"><a class="header" href="#motion-falls-behind-the-reference">Motion falls behind the reference</a></h4>
<p><img src="./assets/10-04.png" alt="" /></p>
<p>P7</p>
<h4 id="ç¨³å®šæ€§"><a class="header" href="#ç¨³å®šæ€§">ç¨³å®šæ€§</a></h4>
<blockquote>
<p>âœ… å‰é¢ä¸¤ä¸ªé—®é¢˜çš„æ ¹æœ¬åŸå› æ˜¯ç›¸åŒçš„ï¼Œå› ä¸ºéœ€è¦æœ‰è¯¯å·®æ‰èƒ½è®¡ç®—forceï¼Œæœ‰äº†forceæ‰èƒ½æ§åˆ¶ã€‚</p>
</blockquote>
<p>High-gain \((k_p)\) control is more precise but less stableâ€¦</p>
<blockquote>
<p>âœ… å¢å¤§ \(k_p\)èƒ½ç¼“è§£ä»¥ä¸Šé—®é¢˜ï¼Œä½†å¤§çš„ \(k_p\) ä¼šå¸¦æ¥è‚¢ä½“åƒµç¡¬å’Œè®¡ç®—ä¸ç¨³å®šã€‚</p>
</blockquote>
<p>P8</p>
<h2 id="stability-of-pd-control"><a class="header" href="#stability-of-pd-control">Stability of PD Control</a></h2>
<h3 id="ä»¥å¼¹ç°§ç³»ç»Ÿä¸ºä¾‹å­"><a class="header" href="#ä»¥å¼¹ç°§ç³»ç»Ÿä¸ºä¾‹å­">ä»¥å¼¹ç°§ç³»ç»Ÿä¸ºä¾‹å­</a></h3>
<p><img src="./assets/10-05.png" alt="" /></p>
<p>$$
\begin{matrix}
f=-k_px-k_dv \quad\quad\quad\\
h: \text{ simulation time step}
\end{matrix}
$$</p>
<blockquote>
<p>âœ… PD control çš„è¿‡ç¨‹ç±»ä¼¼äºä¸€ä¸ªå¼¹ç°§ç³»ç»Ÿã€‚<br />
âœ… å› æ­¤åˆ©ç”¨å¼¹ç°§ç³»ç»Ÿä¸­çš„åŠéšå¼æ¬§æ‹‰æ¥æå‡ PD çš„ç¨³å®šæ€§ã€‚</p>
</blockquote>
<h3 id="åŠéšå¼æ¬§æ‹‰çš„å¼¹ç°§ç³»ç»Ÿ"><a class="header" href="#åŠéšå¼æ¬§æ‹‰çš„å¼¹ç°§ç³»ç»Ÿ">åŠéšå¼æ¬§æ‹‰çš„å¼¹ç°§ç³»ç»Ÿ</a></h3>
<p>Semi-implicit Euler Integration</p>
<p>$$
\begin{align*}
v_{n+1}  &amp; =v_n+h\frac{f}{m} \\
x_{n+1} &amp;=x_n+hv_{n+1}
\end{align*}
$$</p>
<h3 id="åŠéšå¼æ¬§æ‹‰çš„pdæ§åˆ¶"><a class="header" href="#åŠéšå¼æ¬§æ‹‰çš„pdæ§åˆ¶">åŠéšå¼æ¬§æ‹‰çš„PDæ§åˆ¶</a></h3>
<blockquote>
<p>âœ… \(h\) ä¸ºæ—¶é—´æ­¥é•¿ã€‚<br />
âœ… (1) å‡è®¾ \(mï¼1\) (2) ä»£å…¥ \(f\) åˆ°æ–¹ç¨‹ç»„ (3) æ–¹ç¨‹ç»„å†™æˆçŸ©é˜µå½¢å¼ï¼Œå¾—ï¼š</p>
</blockquote>
<p>P11</p>
<p>$$
\begin{bmatrix}
v_{n+1}\\
x_{n+1}
\end{bmatrix}=\begin{bmatrix}
1-k_dh  &amp; -k_ph\\
h(1-k_dh) &amp; 1-k_ph^2
\end{bmatrix}\begin{bmatrix}
v_n \\
x_n
\end{bmatrix}
$$</p>
<p>P14<br />
æå–å¸¸æ•°æ–¹ç¨‹Aï¼Œå¾—ï¼š</p>
<p>$$
A=\begin{bmatrix}
1-k_dh  &amp; -k_ph\\
h(1-k_dh) &amp; 1-k_ph^2
\end{bmatrix}
$$</p>
<p><img src="./assets/10-06.png" alt="" /></p>
<p>P19</p>
<h3 id="pdæ§åˆ¶çš„ç¨³å®šæ€§"><a class="header" href="#pdæ§åˆ¶çš„ç¨³å®šæ€§">PDæ§åˆ¶çš„ç¨³å®šæ€§</a></h3>
<p>\(\lambda _1,\lambda _2 \in  \mathbb{C}  \) are eigenvalues of \(A\)</p>
<blockquote>
<p>âœ… åŸºäºä¸­é—´å˜æ˜¯ \(z_n\) æ¨å¯¼çš„è¿‡ç¨‹è·³è¿‡ã€‚<br />
âœ… æ ¹æ®çŸ©é˜µç‰¹å¾å€¼çš„æ€§è´¨å¯ç›´æ¥å¾—å‡ºç»“è®ºã€‚</p>
</blockquote>
<p>if \(|\lambda _1|&gt; 1\)</p>
<p>The system is unstable!</p>
<p>Condition of stability: \(|\lambda _i|\le  1 \text{ for all } \lambda _i\)</p>
<p>P20</p>
<h3 id="é€šè¿‡hæ§åˆ¶pdæ§åˆ¶çš„ç¨³å®šæ€§"><a class="header" href="#é€šè¿‡hæ§åˆ¶pdæ§åˆ¶çš„ç¨³å®šæ€§">é€šè¿‡hæ§åˆ¶PDæ§åˆ¶çš„ç¨³å®šæ€§</a></h3>
<p><img src="./assets/10-07.png" alt="" /></p>
<blockquote>
<p>âœ… å¦‚æœ \(k_p\) å’Œ \(k_d\) å˜å¤§ï¼Œå°±å¿…é¡»ä»¥ä¸€ä¸ªè¾ƒå°çš„æ—¶é—´æ­¥é•¿è¿›è¡Œä»¿çœŸã€‚</p>
</blockquote>
<h3 id="pd-control-for-characters-2"><a class="header" href="#pd-control-for-characters-2">PD Control for Characters</a></h3>
<p>P21</p>
<ul>
<li>
<p>Determining gain and damping coefficients can be difficultâ€¦</p>
<ul>
<li>A typical setting \(k_p\) = 200, \(k_d\) = 20 for a 50kg character</li>
<li>Light body requires smaller gains</li>
<li>Dynamic motions need larger gains</li>
</ul>
</li>
<li>
<p>High-gain/high-damping control can be unstable, so small times is necessary</p>
<ul>
<li>\(h\) = 0.5~1ms is often used, or 1000~2000Hz</li>
<li>Higher gain/damping requires smaller time step</li>
</ul>
</li>
</ul>
<p>P22</p>
<h2 id="a-more-stable-pd-control"><a class="header" href="#a-more-stable-pd-control">A More Stable PD Control</a></h2>
<h3 id="åŠéšå¼æ¬§æ‹‰--éšå¼æ¬§æ‹‰"><a class="header" href="#åŠéšå¼æ¬§æ‹‰--éšå¼æ¬§æ‹‰">åŠéšå¼æ¬§æ‹‰ â†’ éšå¼æ¬§æ‹‰</a></h3>
<blockquote>
<p>âœ… è§£å†³æ–¹æ³•ï¼šåŠéšå¼æ¬§æ‹‰ â†’ éšå¼æ¬§æ‹‰ï¼Œå³ç”¨ä¸‹ä¸€æ—¶åˆ»çš„åŠ›è®¡ç®—ä¸‹ä¸€æ—¶åˆ»çš„é€Ÿåº¦ã€‚</p>
</blockquote>
<ul>
<li>åŠéšå¼æ¬§æ‹‰</li>
</ul>
<p>$$
\begin{align*}
v_{n+1} &amp; = v_n+h(-k_px_n-k_dv_n) \\
v_{n+1} &amp; = x_n+hv_{n+1}
\end{align*}
$$</p>
<p>$$
\Downarrow 
$$</p>
<ul>
<li>éšå¼æ¬§æ‹‰</li>
</ul>
<p>$$
\begin{align*}
v_{n+1} &amp; = v_n+h(-k_px_n-k_dv_{n+1}) \\
x_{n+1} &amp; = x_n+hv_{n+1}
\end{align*}
$$</p>
<blockquote>
<p>âœ… å®é™…ä¸Šï¼Œè®¡ç®— \(f_{nï¼‹1}\) åªä½¿ç”¨ \(V_{nï¼‹1}\) , ä¸ä½¿ç”¨ \(x_{nï¼‹1}\) , å› ä¸º \(x_{nï¼‹1}\) ä¼šå¼•å…¥éå¸¸å¤æ‚çš„è®¡ç®—ã€‚<br />
âœ… ç”±äº \(v_{nï¼‹1}\) æœªçŸ¥ï¼Œéœ€é€šè¿‡è§£æ–¹ç¨‹ç»„æ¥æ±‚è§£ã€‚</p>
</blockquote>
<p>P23<br />
å¾—åˆ°çš„æ–¹ç¨‹ç»„ä¸ºï¼š</p>
<p>$$
\begin{bmatrix}
v_{n+1} \\
x_{n+1} 
\end{bmatrix}=\frac{1}{1+hk_d} \begin{bmatrix}
1 &amp; -k_ph\\
h &amp; 1+k_dh-k_ph^2
\end{bmatrix}\begin{bmatrix}
v_n\\
x_n
\end{bmatrix}
$$</p>
<p>P24</p>
<h3 id="ç¨³å®šæ€§åˆ†æ"><a class="header" href="#ç¨³å®šæ€§åˆ†æ">ç¨³å®šæ€§åˆ†æ</a></h3>
<p><img src="./assets/10-08.png" alt="" /></p>
<blockquote>
<p>âœ… \(v_{n}\) æ¢æˆ \(v_{nï¼‹1}\) ï¼Œå¾ˆå¤§æ‰¿åº¦ä¸Šæé«˜äº†ç¨³å®šæ€§ã€‚</p>
</blockquote>
<p>P25</p>
<h3 id="ç›¸å…³å·¥ä½œ-3"><a class="header" href="#ç›¸å…³å·¥ä½œ-3">ç›¸å…³å·¥ä½œ</a></h3>
<blockquote>
<p>ğŸ” <img src="./assets/10-09.png" alt="" /></p>
</blockquote>
<p>$$
\tau _{\mathrm{int} }=-K_p(q^n+\dot{q}^n \Delta t-\bar{q} ^{n+1})-K_d(\dot{q} ^n+\ddot{q} ^n \Delta t)
$$</p>
<p>P26</p>
<h3 id="pd-control-for-characters-3"><a class="header" href="#pd-control-for-characters-3">PD Control for Characters</a></h3>
<ul>
<li>
<p>Determining gain and damping coefficients can be difficultâ€¦</p>
<ul>
<li>A typical setting \(k_p\) = 200, \(k_d\) = 20 for a 50kg character</li>
<li>Light body requires smaller gains</li>
<li>Dynamic motions need larger gains</li>
</ul>
</li>
<li>
<p>High-gain/high-damping control can be unstable, so small times is necessary</p>
<ul>
<li>\(h\) = 0.5~1ms is often used, or 1000~2000Hz</li>
<li>\(h\) = 1/120s~1/60s, or 120Hz/60Hz <strong>with Stable PD</strong></li>
<li>Higher gain/damping requires smaller time step</li>
</ul>
</li>
</ul>
<p>P28</p>
<h1 id="tracking-mocap-with-root-forcestorques"><a class="header" href="#tracking-mocap-with-root-forcestorques">Tracking Mocap with Root Forces/Torques</a></h1>
<blockquote>
<p>âœ… å½“å‰ç³»ç»Ÿä»å­˜çš„é—®é¢˜ã€‚(1) ç¨³æ€è¯¯å·®ï¼Œç›¸ä½å»¶è¿Ÿ (2) ç¼ºå°‘å¯¹æ ¹ç»“ç‚¹çš„åŠ›ã€‚</p>
</blockquote>
<p><img src="./assets/10-10.png" alt="" /></p>
<p>\(\tau _j\): joint torques<br />
\(\text{ }\) Apply \(\tau _j\) to â€œchildâ€ body<br />
\(\text{ }\) Apply \(-\tau _j\) to â€œparentâ€ body<br />
\(\text{ }\) All forces/torques sum up to zero</p>
<p>\(f_0,\tau _0\): root force / torque</p>
<p>\(\quad\quad\) Apply \(f _0\) to the root body</p>
<p>\(\quad\quad\) Apply \(\tau _0\) to the root body</p>
<p>\(\quad\quad\) Non-zero net force/torque on the character!</p>
<blockquote>
<p>âœ… å‡€å¤–åŠ›èƒ½è§£å†³é—®é¢˜ 2ï¼Œä½†ä¼šæœ‰â€œæçº¿æœ¨å¶â€çš„ artifacts.<br />
âœ… è§£å†³æ–¹æ³•ï¼šä¸ç›´æ¥å­¦ä¹ ç›®æ ‡è½¨è¿¹ï¼Œè€Œæ˜¯å…ˆå¯¹ç›®æ ‡è½¨è¿¹å¢åŠ ä¸€ä¸ªä¿®æ­£ã€‚å³è½¨è¿¹ä¼˜åŒ–ã€‚</p>
</blockquote>
<p>P30</p>
<h2 id="trajectory-optimization"><a class="header" href="#trajectory-optimization">Trajectory Optimization</a></h2>
<blockquote>
<p>ğŸ” [Witkin and Kass 1988 â€“ Spacetime constraints]</p>
</blockquote>
<blockquote>
<p>âœ… è½¨è¿¹ä¼˜åŒ–çš„é—®é¢˜æè¿°ï¼š</p>
</blockquote>
<p>Find the trajectories:</p>
<p>$$
\begin{align*}
\text{Simulation trajectory } &amp; : S_0,S_1,\dots ,S_T \\
\text{Control trajectory } &amp; : a_0,a_1,\dots ,a_{T-1}
\end{align*}
$$</p>
<blockquote>
<p>âœ… \(S\)ï¼šæ¯ä¸€ä¸ªæ—¶åˆ»ï¼Œè§’è‰²çš„çŠ¶æ€ï¼ŒåŒ…æ‹¬ä½ç½®ã€é€Ÿåº¦ã€æœå‘ç­‰ã€‚<br />
âœ… \(a\)ï¼šç›®æ ‡è½¨è¿¹ã€‚<br />
âœ… ä¼˜åŒ–å‡º \(S\) å’Œ \(a\)ï¼Œæ ¹æ® \(S\) å’Œ \(a\) å¾—åˆ°å…³èŠ‚åŠ›çŸ©ï¼Œå…³èŠ‚åŠ›çŸ©å†æ§åˆ¶è§’è‰²ã€‚</p>
</blockquote>
<p>that minimize the objective function</p>
<p>$$
\min_{(S_t,a_t)} f(S_T)+\sum_{t=0}^{T-1} f(S_t,a_t)
$$</p>
<blockquote>
<p>âœ… ç›®æ ‡å‡½æ•°ç¬¬ä¸€é¡¹ï¼šå…³äºè½¨è¿¹ç»“æŸæ—¶åˆ»çš„çŠ¶æ€ã€‚<br />
âœ… ç¬¬äºŒé¡¹ï¼šå…³äºæ¯ä¸€æ—¶åˆ»çš„çŠ¶æ€ã€‚</p>
</blockquote>
<p>and satisfy the constraints:</p>
<p>$$
\begin{align*}
M\dot{v}+C(x,v)   &amp; =f+J^T\lambda &amp; \text{Equations of motion} \\
g(x,v) &amp; \ge 0 &amp; \text{constraints } \quad \quad\quad
\end{align*}
$$</p>
<blockquote>
<p>âœ… çº¦æŸç¬¬ä¸€é¡¹ï¼šè¿åŠ¨å­¦æ–¹ç¨‹ã€‚<br />
âœ… ç¬¬äºŒé¡¹ï¼šæ ¹æ®åœºæ™¯ç‰¹æ®Šå®šä¹‰çš„çº¦æŸã€‚</p>
</blockquote>
<p>P33 </p>
<h2 id="ç®€åŒ–é—®é¢˜åˆ†æ-1"><a class="header" href="#ç®€åŒ–é—®é¢˜åˆ†æ-1">ç®€åŒ–é—®é¢˜åˆ†æ</a></h2>
<blockquote>
<p>âœ… ä»ä»¥æ–¹å—ç§»åŠ¨åˆ°ç›®æ ‡é«˜åº¦ä¸ºä¾‹ã€‚</p>
</blockquote>
<h3 id="é—®é¢˜æè¿°-7"><a class="header" href="#é—®é¢˜æè¿°-7">é—®é¢˜æè¿°</a></h3>
<p><img src="./assets/10-11.png" alt="" /></p>
<p>Compute a target trajectory \(\tilde{x} (t)\) such that the simulated trajectory \(x(t)\) is a sine curve.</p>
<h3 id="ç›®æ ‡å‡½æ•°"><a class="header" href="#ç›®æ ‡å‡½æ•°">ç›®æ ‡å‡½æ•°</a></h3>
<p>$$
\min_ {(x_n,v_n,\tilde {x} _n)} \sum _ {n=0}^{N} (\sin (t_n)-x_n)^2+\sum _ {n=0}^{N} \tilde {x}^2_n 
$$</p>
<blockquote>
<p>âœ… ç›®æ ‡å‡½æ•°ï¼šç›®æ ‡é¡¹ï¼‹æ­£åˆ™é¡¹</p>
</blockquote>
<h3 id="çº¦æŸ"><a class="header" href="#çº¦æŸ">çº¦æŸ</a></h3>
<p>$$
\begin{align*}
s.t. \quad &amp; v _ {n+1}= v_ n+h (k _ p( \tilde {x} _n-x_n)-k _ dv_n) \\
&amp; v _ {n+1} = x _ n + hv _ {n+1}
\end{align*}
$$</p>
<blockquote>
<p>âœ… çº¦æŸï¼šåŠéšå¼ç§¯åˆ†çš„è¿åŠ¨æ–¹ç¨‹</p>
</blockquote>
<p>P34</p>
<table><thead><tr><th></th><th></th></tr></thead><tbody>
<tr><td>Hard constraints:</td><td><img src="./assets/10-12.png" alt="" /></td></tr>
<tr><td>Soft constraints:</td><td><img src="./assets/10-013.png" alt="" /></td></tr>
</tbody></table>
<blockquote>
<p>âœ… ä»¥ä¸¤ç§æ–¹å¼ä½“ç°çº¦æŸï¼š<br />
âœ…ï¼ˆ1ï¼‰Hardï¼šå¿…é¡»æ»¡è¶³ï¼Œéš¾è§£ï¼Œä¸ç¨³å®šã€‚<br />
âœ…ï¼ˆ2ï¼‰Softï¼šå°½å¯èƒ½æ»¡è¶³ï¼Œæ˜“æ±‚è§£ã€‚</p>
</blockquote>
<p>P35</p>
<h3 id="å‚æ•°ç®€åŒ–"><a class="header" href="#å‚æ•°ç®€åŒ–">å‚æ•°ç®€åŒ–</a></h3>
<p>Collocation methods:</p>
<p>Assume the optimization variables {\(x_n, v_n, \tilde{x}_n\)} are values of a set of parametric curves</p>
<ul>
<li>typically polynomials or splines</li>
</ul>
<p>Optimize the parameters of the curves \(\theta\) instead</p>
<ul>
<li>with smaller number of variables than the original problem</li>
</ul>
<blockquote>
<p>âœ… è¦ä¼˜åŒ–çš„å‚æ•°é‡å¤ªå¤§ï¼Œéš¾ä»¥ä¼˜åŒ–ã€‚<br />
âœ… è§£å†³æ–¹æ³•ï¼šå‡è®¾å‚æ•°ç¬¦åˆç‰¹å®šçš„æ›²çº¿ï¼Œåªå­¦ä¹ æ›²çº¿çš„å‚æ•°ï¼Œå†ç”Ÿæˆå®Œæ•´çš„å‚æ•°ã€‚</p>
</blockquote>
<p>P37</p>
<h3 id="ä¼˜åŒ–æ–¹æ³•"><a class="header" href="#ä¼˜åŒ–æ–¹æ³•">ä¼˜åŒ–æ–¹æ³•</a></h3>
<p>How to solve this optimization problem?<br />
Gradient-based approaches:</p>
<ul>
<li>Gradient descent</li>
<li>Newtonâ€™s methods</li>
<li>Quasi-Newton methods</li>
<li>â€¦â€¦</li>
</ul>
<p>P39</p>
<h2 id="trajectory-optimization-for-tracking-control"><a class="header" href="#trajectory-optimization-for-tracking-control">Trajectory Optimization for Tracking Control</a></h2>
<p><img src="./assets/10-14.png" alt="" /></p>
<p>find a target trajectory</p>
<p><img src="./assets/10-15.png" alt="" /></p>
<blockquote>
<p>âœ… æŠŠåŠ¨æ•ç»“æœå½“æˆåˆå§‹è§£ï¼Œç„¶åä»¥ä¼˜åŒ–çš„æ–¹å¼æ‰¾åˆ°åˆç†è½¨è¿¹ã€‚</p>
</blockquote>
<p>P40</p>
<h3 id="problem-with-gradient-based-methods"><a class="header" href="#problem-with-gradient-based-methods">Problem with Gradient-Based Methods</a></h3>
<ul>
<li>The optimization problem is usually <strong>highly nonlinear</strong>, gradients are unreliable</li>
<li>The system is a black box with unknow dynamics, gradients are not available</li>
</ul>
<p>è§£å†³æ–¹æ³•ï¼š Derivative-Free Optimization</p>
<ul>
<li>
<p>Iterative methods</p>
<ul>
<li>Goal: find the variables ğ’™ that optimize \(f(x)\)</li>
<li>Determining an initial guess of \(x\)</li>
<li>Repeat:
<ul>
<li>Propose a set of candidate variables {\(x_i\)} according to \(x\)</li>
<li>Evaluate the objective function \(f_i=f(x_i)\)</li>
<li>Update the estimation for \(x\)</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Examples:</p>
<ul>
<li>Bayesian optimization, Evolution strategies (e.g. CMA-ES), Stochastic optimization, Sequential Monte Carlo methods, â€¦â€¦</li>
</ul>
</li>
</ul>
<blockquote>
<p>âœ… å¯å‘å¼æ–¹æ³•æˆ–éšæœºé‡‡æ ·æ–¹æ³•ï¼Œä¸éœ€è¦æ¢¯åº¦ã€‚<br />
âœ… ç¼ºç‚¹ï¼šæ…¢ã€ä¸ç²¾ç¡®ã€‚</p>
</blockquote>
<p>P43</p>
<h3 id="cma-es"><a class="header" href="#cma-es">CMA-ES</a></h3>
<ul>
<li>Covariance matrix adaptation evolution strategy (CMA-ES)
<ul>
<li>A widely adopted derivative-free method in character animation</li>
</ul>
</li>
</ul>
<p><img src="./assets/10-17.png" alt="" /></p>
<p>Goal: find the variables ğ’™ that optimize \(f(x)\) </p>
<ul>
<li>Initialize Gaussian distribution \(x\sim \mathcal{N} (\mu ,\Sigma )\)</li>
<li>Repeat:
<ul>
<li>sample candidate variables {\(x_i\)} \( \sim \mathcal{N} (\mu ,\Sigma )\)</li>
<li>Evaluate the objective function \(f_i=f(x_i)\)
<ul>
<li>Involve simulation and generate simulation trajectories</li>
</ul>
</li>
<li>Sort {\(f_i\)} and keep the top \(N\) elite samples</li>
<li>Update \(\mu ,\Sigma \) according to the elite samples</li>
</ul>
</li>
</ul>
<blockquote>
<p>âœ… ä¼˜ç‚¹ï¼šç¨³å®šï¼Œæ— æ¢¯åº¦ï¼Œå¯ç”¨äºé»‘ç›’ç³»ç»Ÿã€‚</p>
</blockquote>
<p>P44</p>
<blockquote>
<p>ğŸ” [Wampler and PopoviÄ‡ 2009 - Optimal Gait and Form for Animal Locomotion]</p>
</blockquote>
<p>P45</p>
<blockquote>
<p>âœ… [Al Borno et al. 2013 - Trajectory Optimization for Full-Body Movements with Complex Contacts]</p>
</blockquote>
<blockquote>
<p>âœ… åªä¼˜åŒ–ç›®æ ‡è½¨è¿¹ï¼Œä¸ä¼˜åŒ–ä»¿çœŸè½¨è¿¹ã€‚å› ä¸ºä»¿çœŸè½¨è¿¹å¯ä»¥é€šä»¿çœŸå¾—åˆ°ã€‚</p>
</blockquote>
<p>P46</p>
<h3 id="samcon"><a class="header" href="#samcon">SAMCON</a></h3>
<blockquote>
<p>âœ… CMA-ES çš„ç¼ºç‚¹ï¼š<br />
ï¼ˆ1ï¼‰æ¯æ¬¡éƒ½ä»å¤´åˆ°å°¾åšä»¿çœŸï¼Œè®¡ç®—é‡å¤§ã€‚<br />
ï¼ˆ2ï¼‰å¦‚æœä»¿çœŸè½¨è¿¹é•¿ï¼Œåˆ™éš¾æ”¶æ•›ã€‚<br />
âœ… æ”¹è¿›æ–¹æ³•ï¼šæ¯æ¬¡é‡‡æ ·ï¼Œåªè€ƒè™‘ä¸‹é¢ä¸€å¸§ã€‚</p>
</blockquote>
<blockquote>
<p>ğŸ” <strong>SA</strong>mpling-based <strong>M</strong>otion <strong>CON</strong>trol [Liu et al. 2010, 2015]<br />
- Motion Clip â†’ Open-loop control trajectory<br />
- A sequential Monte-Carlo method</p>
</blockquote>
<p><img src="./assets/10-18.png" alt="" /></p>
<table><thead><tr><th></th><th></th></tr></thead><tbody>
<tr><td><img src="./assets/10-19.png" alt="" /></td><td>âœ… æŠŠè½¨è¿¹åˆ†å‰²å¼€ï¼Œæ¯æ¬¡ä¼˜åŒ–ä¸€å°æ®µã€‚</td></tr>
<tr><td><img src="./assets/10-20.png" alt="" /></td><td>âœ… åœ¨ç›®æ ‡è½¨è¿¹ä¸Šå¢åŠ åç§»ï¼Œè·Ÿè¸ªåç§»ä¹‹åçš„è½¨è¿¹ã€‚<br> âœ… åç§»é‡æœªçŸ¥ï¼Œå› æ­¤ä»¥é«˜æ–¯åˆ†å¸ƒå¯¹åç§»é‡é‡‡æ ·ã€‚  <br> âœ… é«˜æ–¯åˆ†å¸ƒå¯ç”±å…¶å®ƒåˆ†å¸ƒä»£æ›¿ã€‚</td></tr>
<tr><td><img src="./assets/10-21.png" alt="" /></td><td>âœ… å¯¹æ¯ä¸ªåç§»é‡åšä¸€æ¬¡ä»¿çœŸï¼Œç”Ÿæˆæ–°çš„çŠ¶æ€ï¼Œä¿ç•™å…¶ä¸­ä¸å½“ç›®æ ‡æ¥è¿‘çš„ N ä¸ªã€‚</td></tr>
<tr><td><img src="./assets/10-22.png" alt="" /></td><td>âœ… ä»ä¸Šä¸€æ­¥ N ä¸ªä¸­éšæœºé€‰æ‹©å‡ºå‘ç‚¹ï¼Œä»¥åŠéšæœºçš„åç§»é‡ï¼Œå†åšä»¿çœŸä¸ç­›é€‰ã€‚</td></tr>
<tr><td><img src="./assets/10-23.png" alt="" /></td><td>âœ… æœ€ç»ˆæ‰¾åˆ°ä¸€ç»„æœ€æ¥è¿‘çš„ã€‚   <br> âœ… åŸç†ï¼šåªé€‰ä¸€ä¸ªå®¹æ˜“æ‰å…¥å±€éƒ¨æœ€ä¼˜ï¼Œå› æ­¤ä¿ç•™å¤šä¸ªã€‚ <br>  âœ… è’™ç‰¹å¡ç½—ï¼‹åŠ¨æ€è§„åˆ’</td></tr>
</tbody></table>
<blockquote>
<p>âœ… ä¼˜ç‚¹ï¼šç©¿è†œé—®é¢˜ä¹Ÿèƒ½è¢«ä¿®æ­£æ‰ï¼Œå¯è¿˜åŸåŠ¨æ•æ•°æ®ï¼Œå¯æ ¹æ®ç¯å¢ƒå½±å“è€Œè‡ªåŠ¨è°ƒæ•´ã€‚</p>
</blockquote>
<p>P54</p>
<h1 id="feedforward--feedback-control"><a class="header" href="#feedforward--feedback-control">Feedforward &amp; Feedback Control</a></h1>
<h2 id="feedforward-control"><a class="header" href="#feedforward-control">Feedforward Control</a></h2>
<p><img src="./assets/10-24.png" alt="" /></p>
<blockquote>
<p>âœ… å‰é¦ˆæ§åˆ¶ï¼Œè¦æ±‚æ¯ä¸€æ­¥çš„èµ·å§‹çŠ¶æ€éƒ½æ˜¯åœ¨è·å–è½¨è¿¹è¿‡ç¨‹ä¸­èƒ½å¾—åˆ°çš„çŠ¶æ€ã€‚<br />
âœ… å¦‚æœå¯¹èµ·å§‹çŠ¶æ€åŠ ä¸€ç‚¹æŒ åŠ¨ï¼ŒçŠ¶æ€ä¼šåç¦»å¾ˆè¿œã€‚</p>
</blockquote>
<p>P56</p>
<h2 id="feedback-control"><a class="header" href="#feedback-control">Feedback Control</a></h2>
<blockquote>
<p>âœ… è§£å†³æ–¹æ³•ï¼šå¼•å…¥åé¦ˆç­–ç•¥ã€‚æ ¹æ®å½“å‰åå·®ï¼Œè‡ªåŠ¨è®¡ç®—å‡ºæ›´æ­£ï¼ŒæŠŠæ›´æ­£å åŠ åˆ°æ§åˆ¶è½¨è¿¹ä¸Šã€‚</p>
</blockquote>
<table><thead><tr><th></th></tr></thead><tbody>
<tr><td><img src="./assets/10-025.png" alt="" /></td></tr>
<tr><td><img src="./assets/10-026.png" alt="" /></td></tr>
<tr><td><img src="./assets/10-027.png" alt="" /></td></tr>
</tbody></table>
<p>P62</p>
<h1 id="static-balance"><a class="header" href="#static-balance">Static Balance</a></h1>
<h2 id="å®šä¹‰-3"><a class="header" href="#å®šä¹‰-3">å®šä¹‰</a></h2>
<p>What is balance?</p>
<blockquote>
<p>âœ… Static Balanceï¼šåœ¨ä¸å‘ç”Ÿç§»åŠ¨çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡ç®€å•çš„æ§åˆ¶ç­–ç•¥ï¼Œä¿è¯è§’è‰²ä¸æ‘”å€’ã€‚<br />
âœ… å¹³è¡¡ï¼šè´¨å¿ƒåœ¨æ”¯æ’‘é¢å†…ã€‚</p>
</blockquote>
<p>P64<br />
<img src="./assets/10-29.png" alt="" /></p>
<blockquote>
<p>âœ… äººçš„è´¨å¿ƒï¼šæ¯ä¸€æ®µçš„è´¨å¿ƒçš„åŠ æƒå¹³å‡ã€‚<br />
âœ… äººçš„æ”¯æ’‘é¢ï¼šä¸¤è„šä¹‹å†…ã€‚</p>
</blockquote>
<p>P66 </p>
<h2 id="a-simple-strategy-pd-control"><a class="header" href="#a-simple-strategy-pd-control">A simple strategyï¼š PD Control</a></h2>
<p>A simple strategy to maintain balance:</p>
<h3 id="æ ¹æ®æ¡ä»¶è®¡ç®—åŠ›çŸ©"><a class="header" href="#æ ¹æ®æ¡ä»¶è®¡ç®—åŠ›çŸ©">æ ¹æ®æ¡ä»¶è®¡ç®—åŠ›çŸ©</a></h3>
<ul>
<li>
<p>Keep projected CoM close to the center of support polygon <strong>while tracking a standing pose</strong></p>
</li>
<li>
<p>Use <strong>PD control</strong> to compute feedback torque</p>
</li>
</ul>
<p><img src="./assets/10-30.png" alt="" /></p>
<blockquote>
<p>âœ… åŠ›çŸ© 1ï¼šè®©è§’è‰²ä¿æŒæŸä¸ªå§¿åŠ¿ã€‚<br />
âœ… åŠ›çŸ© 2ï¼šè®©è´¨å¿ƒä¸ç›®æ ‡è´¨å¿ƒä½ç½®æ¥è¿‘ã€‚<br />
âœ… åœ¨æŸäº›å…³èŠ‚ä¸Šå¢åŠ ä¸€äº›é¢å¤–çš„åŠ›çŸ©ã€‚</p>
</blockquote>
<p>P68</p>
<h3 id="æ–½åŠ åŠ›çŸ©"><a class="header" href="#æ–½åŠ åŠ›çŸ©">æ–½åŠ åŠ›çŸ©</a></h3>
<ul>
<li>Apply the feedback torque at <strong>ankles</strong> (ankle strategy) or <strong>hips</strong> (hip strategy)</li>
</ul>
<p>P69</p>
<h2 id="jacobian-transpose-control"><a class="header" href="#jacobian-transpose-control">Jacobian Transpose Control</a></h2>
<blockquote>
<p>âœ… å®ç° static balanceï¼Œé™¤äº† PD æ§åˆ¶è¿˜æœ‰å…¶å®ƒæ–¹æ³•ã€‚</p>
</blockquote>
<h3 id="è®¡ç®—è¦æ–½åŠ çš„åŠ›"><a class="header" href="#è®¡ç®—è¦æ–½åŠ çš„åŠ›">è®¡ç®—è¦æ–½åŠ çš„åŠ›</a></h3>
<p><img src="./assets/10-32.png" alt="" /></p>
<p>Can we use joint torques \(\tau _i\) to mimic the effect of a force \(f\) applied at \(x\)</p>
<ul>
<li>Note that the <strong>desired force</strong> \(f\) is not actually applied</li>
<li>Also called <strong>â€œvirtual forceâ€</strong></li>
</ul>
<blockquote>
<p>âœ… é€šè¿‡æ–½åŠ  \(\tau _1 ï¼Œ\tau _2ï¼Œ\tau _3\) æ¥è¾¾åˆ°ç»™ \(x\) æ–½åŠ  \(f\) çš„æ•ˆæœï¼</p>
</blockquote>
<p>P73</p>
<h3 id="æŠŠåŠ›è½¬åŒ–ä¸ºåŠ›çŸ©"><a class="header" href="#æŠŠåŠ›è½¬åŒ–ä¸ºåŠ›çŸ©">æŠŠåŠ›è½¬åŒ–ä¸ºåŠ›çŸ©</a></h3>
<p>Make \(f\) and \(\tau _i\) done the same power</p>
<p>$$
P=f^T\dot{x}=\tau  ^T\dot{\theta } 
$$</p>
<blockquote>
<p>âœ… ä»åšåŠŸçš„è§’åº¦ã€‚åŠŸç‡ = fv</p>
</blockquote>
<p>Forward kinematics \(x=g(\dot{\theta } )\Rightarrow \dot{x}=J \dot{\theta } \)</p>
<blockquote>
<p>âœ… \(gï¼ˆ* ï¼‰\) æ˜¯ä¸€ä¸ªFKå‡½æ•°ã€‚å…¶ä¸­ï¼š<br />
$$
J=\frac{\partial g}{\partial \theta } 
$$<br />
âœ… æŠŠ \( \dot{x } \) ä»£å…¥ä¸Šé¢å…¬å¼å¾—</p>
</blockquote>
<p>$$
f^T J\dot{\theta } = \tau  ^T\dot{\theta } 
$$</p>
<p>$$
\Downarrow 
$$</p>
<p>P76</p>
<p>$$
\tau =J^Tf
$$</p>
<blockquote>
<p>âœ… æŠŠ \( \tau\) åˆ†è§£ä¸ºæ¯ä¸€ä¸ªå…³èŠ‚æ¯ä¸€ä¸ªæ—‹è½¬çš„ \( \tau\)ï¼é€šè¿‡ Jacobian çŸ©é˜µçš„å«ä¹‰æ¨å‡ºï¼š</p>
</blockquote>
<p>$$
\Downarrow 
$$</p>
<p>$$
\tau _i=(x-p_i)\times f
$$</p>
<p>P77</p>
<h3 id="ç”¨äºstatic-balance"><a class="header" href="#ç”¨äºstatic-balance">ç”¨äºStatic Balance</a></h3>
<p>A simple strategy to maintain balance:</p>
<ul>
<li>
<p>Keep projected CoM close to the center of support polygon <strong>while tracking a standing pose</strong></p>
</li>
<li>
<p>Use PD control to compute feedback <strong>virtual force</strong></p>
</li>
</ul>
<blockquote>
<p>âœ… P66 ä¸­åœ¨ Hips ä¸ŠåŠ åŠ›çŸ©çš„æ–¹å¼åªèƒ½è¿›è¡Œç®€å•çš„æ§åˆ¶ã€‚<br />
âœ… å¯ä»¥é€šè¿‡è™šåŠ›å®ç°ç›¸ä¼¼çš„æ•ˆæœã€‚</p>
</blockquote>
<p>$$
f=k_p(\bar{c} -c)-k_d\dot{c}
$$</p>
<blockquote>
<p>âœ… \(c\) ä¸ä¸€å®šæ˜¯æŠ•å½±è·ç¦»ï¼Œè¿˜å¯ä»¥æè¿°é«˜åº¦è·ç¦»ï¼Œå®ç°ç«™èµ·è¹²ä¸‹çš„æ•ˆæœã€‚</p>
</blockquote>
<p>P78</p>
<ul>
<li>Assuming \(f\) <strong>is applied to the CoM</strong>, compute necessary joint torques using Jacobian transpose control to achieve it</li>
</ul>
<blockquote>
<p>âœ… ä½†ä¹Ÿä¸æ˜¯çœŸçš„åŠ åŠ›ï¼Œè€Œæ˜¯é€šè¿‡å‰é¢è®²çš„ Jacobian transpose control æ–¹æ³•è½¬ä¸ºç‰¹å®šå…³èŠ‚çš„åŠ›çŸ©ã€‚</p>
</blockquote>
<ul>
<li>Usually using the joints in the legs</li>
</ul>
<blockquote>
<p>âœ… æœ€åè¾¾åˆ°åœ¨Hipsä¸ŠåŠ åŠ›çš„æ•ˆæœ<br />
âœ… ä½†è¿™ç§æ–¹å¼èƒ½æ–½åŠ çš„åŠ›éå¸¸å¼±ï¼Œåªèƒ½å®ç°æ¯”è¾ƒå¾®å¼±çš„å¹³è¡¡</p>
</blockquote>
<p>P79</p>
<h2 id="a-fancier-strategy"><a class="header" href="#a-fancier-strategy">A fancier strategy:</a></h2>
<ul>
<li>Mocap tracking as an objective function</li>
<li>Controlling both the CoM position/<strong>momentum</strong> and the <strong>angular</strong> momentum</li>
<li>Solve a <strong>one-step</strong> optimization problem to compute joint torques</li>
</ul>
<blockquote>
<p>ğŸ” <img src="./assets/10-34.png" alt="" /></p>
</blockquote>
<hr />
<blockquote>
<p>æœ¬æ–‡å‡ºè‡ªCaterpillarStudyGroupï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>
<p>https://caterpillarstudygroup.github.io/GAMES105_mdbook/</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><p>P2</p>
<h1 id="outline-10"><a class="header" href="#outline-10">Outline</a></h1>
<ul>
<li>
<p>Walking and Dynamic Balance</p>
</li>
<li>
<p>Simplified Models</p>
<ul>
<li>ZMP (Zero-Moment Point)</li>
<li>Inverted Pendulum</li>
<li>SIMBICON</li>
</ul>
</li>
</ul>
<blockquote>
<p>âœ… ä¸èƒ½ç›´æ¥æ§åˆ¶è§’è‰²ä½ç½®ï¼Œè€Œæ˜¯é€šè¿‡ä¸åœ°é¢çš„åŠ›å’Œåä½œç”¨åŠ›ã€‚</p>
</blockquote>
<p>P3</p>
<h1 id="walking"><a class="header" href="#walking">Walking</a></h1>
<p><img src="./assets/11-01.png" alt="" /></p>
<p><img src="./assets/11-02.png" alt="" /></p>
<blockquote>
<p>ğŸ” <strong>Gait disorders in adults and the elderly</strong>.<br />
phases of a walking gait cycle<br />
Pirker and Katzenschlager 2017.</p>
</blockquote>
<p>P4</p>
<h2 id="walking-vs-running"><a class="header" href="#walking-vs-running">Walking VS Running</a></h2>
<table><thead><tr><th>Walking</th><th>Running</th></tr></thead><tbody>
<tr><td><img src="./assets/11-04.png" alt="" /><br>Walking: move without <em>loss of contact</em>, or flight phases</td><td><img src="./assets/11-05.png" alt="" /></td></tr>
</tbody></table>
<p>P7</p>
<h2 id="walkingçš„å‡ ä¸ªé˜¶æ®µ"><a class="header" href="#walkingçš„å‡ ä¸ªé˜¶æ®µ">Walkingçš„å‡ ä¸ªé˜¶æ®µ</a></h2>
<table><thead><tr><th></th><th></th></tr></thead><tbody>
<tr><td><img src="./assets/11-6.png" alt="" /></td><td><img src="./assets/11-7.png" alt="" /></td></tr>
<tr><td><img src="./assets/11-08.png" alt="" /></td><td><img src="./assets/11-09.png" alt="" /></td></tr>
<tr><td><img src="./assets/11-10.png" alt="" /></td><td><img src="./assets/11-11.png" alt="" /></td></tr>
</tbody></table>
<blockquote>
<p>âœ… ä»¥ä¸Šè¿‡ç¨‹å‡è®¾è§’è‰²å¤„äº static çŠ¶æ€ã€‚æ²¡æœ‰è€ƒè™‘åˆ°ç§»åŠ¨è¿‡ç¨‹ä¸­çš„è„šçš„åŠ¨é‡ã€‚å› æ­¤åªèƒ½å‹‰å¼ºä¿æŒè§’è‰²ç¨³å®šã€‚è¦ä»¥éå¸¸æ…¢çš„é€Ÿåº¦ç›¸å‰ç§»åŠ¨ã€‚</p>
</blockquote>
<p>P11</p>
<h1 id="zero-moment-point-zmp"><a class="header" href="#zero-moment-point-zmp">Zero-Moment Point (ZMP)</a></h1>
<blockquote>
<p>âœ… é€šè¿‡ZMPçš„æ§åˆ¶å®ç°æ¯”è¾ƒç¨³å®šçš„èµ°è·¯ã€‚</p>
</blockquote>
<h2 id="å…¨èº«å—åŠ›åˆ†æä¸é—®é¢˜ç®€åŒ–"><a class="header" href="#å…¨èº«å—åŠ›åˆ†æä¸é—®é¢˜ç®€åŒ–">å…¨èº«å—åŠ›åˆ†æä¸é—®é¢˜ç®€åŒ–</a></h2>
<p><img src="./assets/11-12.png" alt="" /></p>
<blockquote>
<p>âœ… è§’è‰²å—åˆ°é‡åŠ›å’ŒGRFåŠ›ã€‚<br />
âœ… GRF ï¼ æ”¯æŒåŠ›ï¼ˆå‘ä¸Šï¼‰ï¼‹ åŠ¨æ‘©æ“¦åŠ›ï¼ˆæœ‰é€Ÿåº¦æ—¶æ‰æœ‰ï¼‰<br />
âœ… ç®€åŒ–ï¼šä¸ŠåŠèº«å—åˆ°çš„æ‰€æœ‰çš„åŠ›ï¼Œéƒ½ä½“ç°åœ¨ ankle å…³èŠ‚ä¸Šã€‚</p>
</blockquote>
<p>P12</p>
<h3 id="recall-a-system-of-links-and-joints"><a class="header" href="#recall-a-system-of-links-and-joints">Recall: A System of Links and Joints</a></h3>
<p><img src="./assets/11-13.png" alt="" /></p>
<p>$$
M\dot{v} +C(x,v)=f+f_J
$$</p>
<blockquote>
<p>âœ… åœ¨æ»¡è¶³è¿™ä¸ªå…¬å¼çš„å‰æä¸‹ï¼Œä¸€ä¸ªéƒ¨åˆ†åŠ¨äº†å¦ä¸€ä¸ªéƒ¨åˆ†å°±ä¼šè·Ÿç€åŠ¨ã€‚å› æ­¤å¯ä»¥æŠŠé—®é¢˜ç®€åŒ–ï¼Œåªåˆ†æankleã€‚</p>
</blockquote>
<p>P15</p>
<h2 id="è„šä¸Šå—åŠ›åˆ†æ"><a class="header" href="#è„šä¸Šå—åŠ›åˆ†æ">è„šä¸Šå—åŠ›åˆ†æ</a></h2>
<p><img src="./assets/11-14.png" alt="" /></p>
<blockquote>
<p>âœ… ä»…åˆ†æè„šä¸Šçš„åŠ›ï¼Œ\(f_{\text{ankle}}\) ä¸º ankle ä¸Šçš„åŠ›è½¬åŒ–åˆ°è„šä¸Šçš„åŠ›ã€‚</p>
</blockquote>
<p><img src="./assets/11-15.png" alt="" /></p>
<blockquote>
<p>âœ… åœ°é¢å¯¹è„šçš„åŠ›ä¸æ˜¯æ–½åŠ åˆ°æŸä¸€ä¸ªç‚¹ä¸Šï¼Œä½†å¯ä»¥æ ¹æ®å…¬å¼æ¢ç®—æˆæ–½åŠ åˆ°æŸä¸€ç‚¹çš„åŠ›ã€‚</p>
</blockquote>
<p>P17</p>
<p>Assuming the ground is flat and level<br />
so \(p_i\) - \(p\)  is always in the horizontal plane</p>
<p><img src="./assets/11-16.png" alt="" /></p>
<blockquote>
<p>âœ… æŠŠ \(\tau _{GRF} \) åˆ†è§£ä¸ºä¸åœ°é¢å‚ç›´éƒ¨åˆ†å’Œä¸åœ°é¢å¹³è¡Œéƒ¨åˆ†ï¼ˆåŠ›çŸ©çš„æ–¹å‘æ˜¯æŒ‡å®ƒçš„æ—‹è½¬è½´çš„æ–¹å‘ã€‚ï¼‰ï¼Œå…¶ä¸­å‚ç›´çš„éƒ¨åˆ†ä¸ºï¼š</p>
</blockquote>
<p><img src="./assets/11-1.png" alt="" /></p>
<p>æ°´å¹³çš„éƒ¨åˆ†ä¸ºï¼š </p>
<p><img src="./assets/11-17.png" alt="" /></p>
<p><strong>Can we find \(p\) such that \(\tau _{GRF}^{xz}=0\) ?</strong></p>
<p>P21</p>
<h2 id="zero-moment-point-zmp-1"><a class="header" href="#zero-moment-point-zmp-1">Zero-Moment Point (ZMP)</a></h2>
<p><img src="./assets/11-18.png" alt="" /></p>
<p>å½“\(p\) ä¸º center pressureæ—¶ï¼š</p>
<p>$$
\begin{align*}
f_{GRF}  &amp; =\sum _{i}^{} f_i \\
\tau _{GRF} &amp; =\tau _{GRF}^y=\sum _{i}^{}(p_i-p)\times f_i^{xz}
\end{align*}
$$</p>
<p>The position of \(p\) is not known, but we assume ä»¥ä¸Šå…¬å¼æˆç«‹ã€‚</p>
<h2 id="zmpæ¡ä»¶ä¸‹æ”¯æ’‘è„šçš„å—åŠ›åˆ†æ"><a class="header" href="#zmpæ¡ä»¶ä¸‹æ”¯æ’‘è„šçš„å—åŠ›åˆ†æ">ZMPæ¡ä»¶ä¸‹æ”¯æ’‘è„šçš„å—åŠ›åˆ†æ</a></h2>
<p>å‡è®¾ï¼š æ”¯æ’‘è„š should not move in a <strong>stance phase</strong>ï¼Œä¸”æ”¯æ’‘è„šä¸åœ°é¢å®Œæˆæ¥è§¦<br />
åˆ™ï¼šåœ¨æ‰€æœ‰åŠ›ä½œç”¨ä¸‹å¤„äºé™å¹³è¡¡çŠ¶æ€ã€‚</p>
<p><img src="./assets/11-20.png" alt="" /></p>
<p>Static Equilibrium:</p>
<p>é™æ€å¹³è¡¡æ»¡è¶³ï¼šæ‰€æœ‰åˆåŠ›ä¸º0</p>
<p>$$
f_{\text{ankle}} + f_{\text{GRF}} + mg = 0<br />
$$</p>
<p>é™æ€å¹³è¡¡æ»¡è¶³ï¼šä»»é€‰ä¸€ä¸ªå‚è€ƒç‚¹ï¼Œæ‰€æœ‰åˆåŠ›ï¼ˆåŠ›çŸ©ï¼‰ç›¸å¯¹äºå‚è€ƒç‚¹çš„åŠ¨é‡ä¸º0ï¼Œå¦åˆ™ä¼šæ—‹è½¬ã€‚</p>
<p>The moment around a reference point \(o\):</p>
<p>$$
(u-o) \times f_{\text{ankle}} + (p-o) \times f_{\text{GRF}} + (x-o)\times mg + \tau _{GRF}^{y} + \tau _{\text{ankle}} = 0
$$</p>
<blockquote>
<p>âœ… \(o\) æ˜¯ä¸€ä¸ªå‚è€ƒç‚¹ï¼Œå¯ä»¥åœ¨ä»»æ„ä½ç½®<br />
âœ… Uï¼šankle ä½ç½®ã€‚<br />
âœ… Xï¼šè´¨å¿ƒä½ç½®
âœ… Pï¼šä½ç½®æœªçŸ¥ï¼Œé«˜åº¦ä¸º 0ï¼</p>
</blockquote>
<p>åŒæ ·åªå…³å¿ƒæ°´å¹³æ–¹å‘ï¼š</p>
<p>Horizontal components (moment projected onto \(xz\) plane):</p>
<p>$$
((u-o) \times f_{\text{ankle}})^{xz} +( (p-o) \times f_{\text{GRF}} ) ^{xz}+ (x-o)\times mg + \tau _{\text{ankle}}^{xz} = 0
$$</p>
<blockquote>
<p>âœ… æ€»åŠ›çŸ©ä¸º 0ï¼Œå¦åˆ™äººä¼šæ—‹è½¬ã€‚</p>
</blockquote>
<p>P28</p>
<h2 id="æ±‚è§£-zero-moment-point-zmp"><a class="header" href="#æ±‚è§£-zero-moment-point-zmp">æ±‚è§£ Zero-Moment Point (ZMP)</a></h2>
<p>We can solve this equation to find \(p\)</p>
<p>\(p\) is <strong>called Zero-Moment Point (ZMP)</strong> because it makes</p>
<p>$$
\tau _{GRF}^{xz}=0
$$</p>
<p>and the horizontal moment</p>
<p>$$
((u-o) \times f_{\text{ankle}})^{xz} +( (p-o) \times f_{\text{GRF}} ) ^{xz}+ (x-o)\times mg + \tau _{\text{ankle}}^{xz} = 0
$$</p>
<p>Only when ğ‘ is <strong>within the support polygon</strong>!</p>
<blockquote>
<p>âœ… \(p\) æ»¡è¶³ï¼ˆ1ï¼‰æ°´å¹³åŠ›çŸ©ä¸º0. ï¼ˆ2ï¼‰äººæ•´ä½“ä¸Šå¹³è¡¡ã€‚<br />
âœ… \(uï¼ŒOï¼ŒX\) éƒ½æ˜¯å·²çŸ¥ï¼Œ\(p\) çš„é«˜åº¦ä¸º 0ï¼Œåªæœ‰ \(P_xP_y\) æœªçŸ¥ä¸”è¯¥å…¬å¼åˆ†åˆ«åœ¨ \(X\) å’Œ \(Z\) ä¸Šæˆç«‹ï¼Œå®é™…ä¸Šæ˜¯ä¸¤ä¸ªæ–¹ç¨‹ã€‚<br />
âœ… ä¸¤ä¸ªæœªçŸ¥é‡å’Œä¸¤ä¸ªæ–¹ç¨‹ï¼Œå¯ä»¥è§£å‡º \(p\)ã€‚</p>
</blockquote>
<p>P33</p>
<p>å¦‚æœè§£å‡ºå…¬å¼å¾—åˆ°çš„\(p\) is outside the support polygonï¼Œé‚£ä¹ˆï¼š<br />
\(p\) could NOT be the center of pressure, because all the GRFs 
are applied within the polygon, so that</p>
<p>$$
\tau _{GRF}^{xz}\ne 0
$$</p>
<blockquote>
<p>âœ… å¦‚æœæ±‚å‡º \(p\) åœ¨ polygonå¤– åˆ™ä¸èƒ½å¹³è¡¡ï¼Œå› ä¸ºä¸æ˜¯ center pressure.</p>
</blockquote>
<p>å¦‚æœé€‰æ‹©polygonä¸Šçš„real center of pressure\({p}' \) ,é‚£ä¹ˆï¼š</p>
<p>$$
((u-o) \times f_{\text{ankle}})^{xz} +( ({p}'-o) \times f_{\text{GRF}} ) ^{xz}+ (x-o)\times mg + \tau _{\text{ankle}}^{xz} \ne 0
$$</p>
<blockquote>
<p>âœ… \({p}' \ne p\)ï¼Œ\({p}'\) å¤„æ°´å¹³æ–¹å‘çš„åˆå¤–åŠ›ä¸ä¸ºé›¶ï¼Œè„šä¼šç¿»è½¬äººä¼šæ‘”å€’ã€‚</p>
</blockquote>
<h1 id="simplified-models"><a class="header" href="#simplified-models">Simplified Models</a></h1>
<p>P35</p>
<h2 id="å…³äºzmpçš„æ€è€ƒ"><a class="header" href="#å…³äºzmpçš„æ€è€ƒ">å…³äºZMPçš„æ€è€ƒ</a></h2>
<p>The existence of ZMP is an indication of dynamic balance We can achieve balanced walking by controlling ZMP But how?</p>
<p>P36</p>
<h2 id="simplified-modelsçš„åŸºæœ¬å¥—è·¯"><a class="header" href="#simplified-modelsçš„åŸºæœ¬å¥—è·¯">Simplified Modelsçš„åŸºæœ¬å¥—è·¯</a></h2>
<ul>
<li>Simplify humanoid / biped robot into an abstract model
<ul>
<li>Often consists of a CoM and a massless mechanism</li>
<li>Need to map the state of the robot to the abstract model</li>
</ul>
</li>
</ul>
<blockquote>
<p>âœ… å› æ­¤ï¼ŒæŠŠæœ€å½±å“å¹³è¡¡çš„é‡æ‹¿å‡ºæ¥ï¼Œå»ºç«‹ç®€åŒ–æ¨¡å‹ã€‚<br />
âœ… å®é™…ä¸Šæ›´åŠ å¤æ‚ï¼Œå¯¹ä¸ŠåŠèº«ä»»ä½•ä¸€ä¸ªéƒ¨ä½çš„å¹²æŒ ï¼Œéƒ½ä¼šå½±å“åˆ°è„šä¸Šçš„åŠ›ã€‚</p>
</blockquote>
<ul>
<li>
<p>Plan the control and movement of the model</p>
<ul>
<li>Optimization</li>
<li>Dynamic programming</li>
<li>Optimal control</li>
<li>MPC</li>
</ul>
</li>
<li>
<p>Track the planned motion of the abstract model</p>
<ul>
<li>Inverse Kinematics</li>
<li>Inverse Dynamics</li>
</ul>
</li>
</ul>
<p><img src="./assets/11-23.png" alt="" /></p>
<p>P37</p>
<h2 id="example-zmp-guided-control"><a class="header" href="#example-zmp-guided-control">Example: ZMP-Guided Control</a></h2>
<blockquote>
<p>ğŸ” <img src="./assets/11-25.png" alt="" /></p>
</blockquote>
<p><img src="./assets/11-26-1.png" alt="" /></p>
<blockquote>
<p>âœ… æŠŠæœºå™¨äººç®€åŒ–ä¸ºæ¡Œå­å’Œå°è½¦ï¼Œé€šè¿‡æ§åˆ¶å°è½¦mçš„è¿åŠ¨æ¥æ§åˆ¶ ZMPã€‚ä½¿ ZMP æ»¡è¶³é¢„å®šä¹‰è½¨è¿¹ã€‚</p>
</blockquote>
<p><img src="./assets/11-26.png" alt="" /></p>
<blockquote>
<p>âœ… é¢„å®šä¹‰è½¨è¿¹çš„è½¨è¿¹æ˜¯æŒ‡ä¿æŒåœ¨pologoné‡Œé¢ã€‚é€šè¿‡ä¼˜åŒ–å¾—åˆ° \(m\) çš„è¿åŠ¨ã€‚<br />
âœ… ç„¶åé€šè¿‡IKå’ŒPD controlæ§åˆ¶è„šçš„è¿åŠ¨ã€‚</p>
</blockquote>
<blockquote>
<p>âœ… ASIMOæœºå™¨äººå±€é™æ€§ï¼š(1) è„šå¿…é¡»ä¸åœ°é¢å¹³è¡Œã€‚ (2) è„šå¿…é¡»å¼¯æ›²ã€‚ (3) æ•´ä½“ç§»åŠ¨é€Ÿåº¦æ…¢ã€‚</p>
</blockquote>
<p>P40</p>
<h2 id="inverted-pendulum-model-ipm"><a class="header" href="#inverted-pendulum-model-ipm">Inverted Pendulum Model (IPM)</a></h2>
<p><strong>Walking == Falling + Step Planning</strong></p>
<blockquote>
<p>âœ… äººçš„ç‰¹ç‚¹æ˜¯é‡å¿ƒåç¦»å†æ‹‰å›æ¥ï¼Œè¿™æ ·æ¯”å§‹ç»ˆä¿æŒå¹³æ›´çœã€‚</p>
</blockquote>
<p>P42</p>
<h3 id="ipmé—®é¢˜"><a class="header" href="#ipmé—®é¢˜">IPMé—®é¢˜</a></h3>
<blockquote>
<p>âœ… IPMï¼š å€’ç«‹æ‘†æ¨¡å‹ï¼Œæ§åˆ¶å°è½¦ä½¿æ†ä¸æ‰ä¸‹å»ã€‚</p>
</blockquote>
<p><img src="./assets/11-27-1.png" alt="" /></p>
<h3 id="step-plan-with-ipm"><a class="header" href="#step-plan-with-ipm">Step Plan with IPM</a></h3>
<blockquote>
<p>ğŸ” <img src="./assets/11-28.png" alt="" /></p>
</blockquote>
<p>P45</p>
<ul>
<li>Map CoM of the character and the stance foot as IPM</li>
<li>Plan the position of the next foot step so that the mass point rests at the top of the pendulum</li>
<li>Create foot trajectory based on the step plan</li>
<li>Compute target poses using IK</li>
</ul>
<p><img src="./assets/11-29.png" alt="" /></p>
<blockquote>
<p>âœ… è„šåˆ°é‡å¿ƒæ˜¯ä¸€ä¸ªå€’ç«‹æ‘†ã€‚<br />
âœ… ç”±äºå¤±å»å¹³è¡¡ï¼Œè´¨å¿ƒæœ‰ä¸€ä¸ªå‘å‰çš„é€Ÿåº¦ï¼Œé€šè¿‡åˆ°ä¸€ä¸ªåˆé€‚çš„è½è„šç‚¹ï¼Œä½¿è´¨å¿ƒåˆ°è¾¾è„šçš„æ­£ä¸Šæ–¹åˆšå¥½åˆ°è¾¾é€Ÿåº¦ç¨³å®šã€‚<br />
âœ… ç®—å‡ºè„šçš„ç›®æ ‡ä½ç½®åï¼Œæ’å€¼ï¼ŒIKï¼ŒPD æ§åˆ¶ã€‚</p>
</blockquote>
<p>P46</p>
<p><img src="./assets/11-30.png" alt="" /></p>
<blockquote>
<p>âœ… åŠ¨èƒ½è½¬åŠ¿èƒ½ï¼Œèƒ½é‡å®ˆæ’ï¼ç®—å‡ºé«˜åº¦ã€‚<br />
â— æ³¨æ„ï¼šæ†çš„é•¿åº¦æ˜¯ä¸ç¡®å®šçš„ï¼Œå› ä¸ºè…¿ä¼šå¼¯æ›²ã€‚</p>
</blockquote>
<p>P47</p>
<blockquote>
<p>âœ… æ–¹æ³•ä¼˜ç‚¹ï¼šå¯ä»¥é€‚ç”¨äºä¸åŒè§’è‰²ï¼Œä¸åŒåŠ¨ä½œï¼Œä¸åŒç¯å¢ƒäº¤äº’ã€‚</p>
</blockquote>
<p>P48</p>
<h2 id="simbicon-1"><a class="header" href="#simbicon-1">SIMBICON</a></h2>
<blockquote>
<p>ğŸ” SIMBICON (SIMple BIped Locomotion CONtrol) Yin et al. 2007</p>
</blockquote>
<p><img src="./assets/11-31.png" alt="" /></p>
<blockquote>
<p>âœ… ç»å…¸å·¥ä½œï¼Œç¬¬ä¸€ä¸ªå®ç°äº†é²æ£’çš„æ­¥æ€æ§åˆ¶ã€‚<br />
âœ… åŸç†ï¼šè·Ÿè¸ªæ§åˆ¶å™¨ä¸ŠåŠ ä¸€ä¸ªåé¦ˆ</p>
</blockquote>
<p>P49</p>
<h3 id="step-1"><a class="header" href="#step-1">Step 1</a></h3>
<ul>
<li>Step 1: develop a cyclical base motion
<ul>
<li>PD controllers track target angles</li>
<li>FSM (Finite State Machine) or mocap</li>
</ul>
</li>
</ul>
<blockquote>
<p>âœ… æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªè·Ÿè¸ªæ§åˆ¶å™¨ï¼Œç”¨çŠ¶æ€æœºæ¥å®ç°çš„è·Ÿè¸ªæ§åˆ¶å™¨</p>
</blockquote>
<p><img src="./assets/11-32.png" alt="" /></p>
<blockquote>
<p>âœ… æœ‰å››ä¸ªçŠ¶æ€ï¼Œé€šè¿‡è·Ÿè¸ªåœ¨4ä¸ªçŠ¶æ€ä¹‹é—´åˆ‡æ¢ï¼Œä¹Ÿå¯ä»¥ç”¨åŠ¨æ•æ•°æ®æ¥ä»£æ›¿</p>
</blockquote>
<p>P50</p>
<h3 id="step-2"><a class="header" href="#step-2">Step 2</a></h3>
<ul>
<li>Step 2:
<ul>
<li>control torso and swing-hip wrt world frame</li>
</ul>
</li>
</ul>
<p><img src="./assets/11-33.png" alt="" /></p>
<blockquote>
<p>âœ… æ§åˆ¶ç›®æ ‡ï¼šä¸ŠåŠèº«ä¿æŒç«–ç›´ã€‚<br />
âœ… æ§åˆ¶æ–¹æ³•ï¼š<br />
é€šè¿‡ä¿æŒä¸ŠåŠèº«ç«–ç›´ï¼Œè®¡ç®—å‡º\(\tau _{\text{torso}} \)ã€‚<br />
é€šè¿‡ä½¿Bè·Ÿè¸ªç›®æ ‡åŠ¨ä½œï¼Œè®¡ç®—å‡º\(\tau _{B} \)ã€‚<br />
é€šè¿‡ \(\tau _{\text{torso}} \) å’Œ \(\tau _{B} \) æ§åˆ¶ \(\tau _{A} \).</p>
</blockquote>
<p>P51</p>
<h3 id="step-3"><a class="header" href="#step-3">Step 3</a></h3>
<ul>
<li>Step 3: COM feedback</li>
</ul>
<p><img src="./assets/11-34.png" alt="" /></p>
<blockquote>
<p>âœ… ä¼°è®¡ä¸‹ä¸€ä¸ªè„šæ­¥çš„ä½ç½®dï¼Œä½¿è´¨å¿ƒå¤„äºå¯æ§èŒƒå›´å†…ã€‚<br />
âœ… \(d\) ä¸ \(D\) æœ‰å…³ï¼Œä½†å…³ç³»å¤æ‚ï¼Œåœ¨æ­¤å¤„åšäº†ç®€åŒ–ã€‚</p>
</blockquote>
<p>P52</p>
<p><img src="./assets/11-35.png" alt="" /></p>
<blockquote>
<p>âœ… ç®€åŒ–é—®é¢˜ï¼š\(d\) å’Œ \(v\) ä¸ \(\theta _d\) çš„é€Ÿåº¦æ˜¯çº¿æ€§å…³ç³»ã€‚é€Ÿåº¦ä¼šè½¬åŒ–ä¸º PD ç›®æ ‡çš„ä¿®æ­£ã€‚<br />
âœ… çº¿æ€§çš„ç³»æ•°ä¸ºæ‰‹è°ƒã€‚</p>
</blockquote>
<p>P53</p>
<h3 id="simbicon-2"><a class="header" href="#simbicon-2">SIMBICON</a></h3>
<p><img src="./assets/11-36.png" alt="" /></p>
<p>P54</p>
<h2 id="outline-11"><a class="header" href="#outline-11">Outline</a></h2>
<ul>
<li>How to generalize to other motion?</li>
</ul>
<p><img src="./assets/11-37.png" alt="" /></p>
<hr />
<blockquote>
<p>æœ¬æ–‡å‡ºè‡ªCaterpillarStudyGroupï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>
<p>https://caterpillarstudygroup.github.io/GAMES105_mdbook/</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><p>P2</p>
<h1 id="outline-12"><a class="header" href="#outline-12">Outline</a></h1>
<ul>
<li>
<p>Optimal Control</p>
</li>
<li>
<p>Model-based Approaches vs. Model-free Approaches</p>
</li>
<li>
<p>Sampling-based Optimization</p>
</li>
<li>
<p>Reinforcement Learning</p>
</li>
<li>
<p>Conclusion</p>
</li>
</ul>
<p>P3</p>
<h2 id="recap-1"><a class="header" href="#recap-1">Recap</a></h2>
<table><thead><tr><th>feedforward</th><th>feedback</th></tr></thead><tbody>
<tr><td><img src="./assets/12-01.png" alt="" /></td><td><img src="./assets/12-04.png" alt="" /></td></tr>
<tr><td><img src="./assets/12-02.png" alt="" /></td><td><img src="./assets/12-03.png" alt="" /></td></tr>
</tbody></table>
<blockquote>
<p>âœ… å¼€ç¯æ§åˆ¶ï¼šåªè€ƒè™‘åˆå§‹çŠ¶æ€ã€‚<br />
âœ… å‰é¦ˆæ§åˆ¶ï¼šè€ƒè™‘åˆå§‹çŠ¶æ€å’Œå¹²æŒ ã€‚<br />
âœ… å‰é¦ˆæ§åˆ¶ä¼˜åŒ–çš„æ˜¯è½¨è¿¹ã€‚<br />
âœ… åé¦ˆæ§åˆ¶ä¼˜åŒ–çš„æ˜¯æ§åˆ¶ç­–ç•¥ï¼Œæ§åˆ¶ç­–ç•¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ ¹æ®å½“å‰çŠ¶æ€ä¼˜åŒ–è½¨è¿¹ã€‚</p>
</blockquote>
<p>P9</p>
<p><img src="./assets/12-05.png" alt="" /></p>
<blockquote>
<p>âœ… Feedback ç±»ä¼¼æ„é€ ä¸€ä¸ªåœºï¼ŒæŠŠä»»ä½•çŠ¶æ€æ¨åˆ°ç›®æ ‡çŠ¶æ€ã€‚</p>
</blockquote>
<p>P10</p>
<h1 id="å¼€ç¯æ§åˆ¶"><a class="header" href="#å¼€ç¯æ§åˆ¶">å¼€ç¯æ§åˆ¶</a></h1>
<h2 id="é—®é¢˜æè¿°-8"><a class="header" href="#é—®é¢˜æè¿°-8">é—®é¢˜æè¿°</a></h2>
<p>$$
\begin{matrix}
\min_{x}  f(x)\\
ğ‘ .ğ‘¡. g(x)=0
\end{matrix}
$$</p>
<p><img src="./assets/12-06.png" alt="" /></p>
<p>P12</p>
<h2 id="æŠŠç¡¬çº¦æŸè½¬åŒ–ä¸ºè½¯çº¦æŸ"><a class="header" href="#æŠŠç¡¬çº¦æŸè½¬åŒ–ä¸ºè½¯çº¦æŸ">æŠŠç¡¬çº¦æŸè½¬åŒ–ä¸ºè½¯çº¦æŸ</a></h2>
<p>$$
\min_{x}  f(x)+ wg(x)
$$</p>
<p>\(^\ast \) The solution \(x^\ast\)  may not satisfy the constraint</p>
<p>P16</p>
<h2 id="lagrange-multiplier---æŠŠçº¦æŸæ¡ä»¶è½¬åŒ–ä¸ºä¼˜åŒ–"><a class="header" href="#lagrange-multiplier---æŠŠçº¦æŸæ¡ä»¶è½¬åŒ–ä¸ºä¼˜åŒ–">Lagrange Multiplier - æŠŠçº¦æŸæ¡ä»¶è½¬åŒ–ä¸ºä¼˜åŒ–</a></h2>
<blockquote>
<p>âœ… æ‹‰æ ¼æœ—æ—¥ä¹˜å­æ³•ã€‚</p>
</blockquote>
<p><img src="./assets/12-08.png" alt="" /></p>
<blockquote>
<p>âœ… é€šè¿‡è§‚å¯Ÿå¯çŸ¥ï¼Œæå€¼ç‚¹ä½äº\({f}'(x)\) ä¸ \(g\) çš„åˆ‡çº¿å‚ç›´ï¼Œå³ \({f}' (x)\) ä¸ \({g}' (x)\) å¹³è¡Œã€‚ï¼ˆå……åˆ†éå¿…è¦æ¡ä»¶ã€‚ï¼‰</p>
</blockquote>
<p>å› æ­¤ï¼š</p>
<p><img src="./assets/12-07.png" alt="" /></p>
<p>Lagrange function</p>
<p>$$
L(x,\lambda )=f(x)+\lambda ^Tg(x)
$$</p>
<blockquote>
<p>âœ… æŠŠçº¦æŸæ¡ä»¶è½¬åŒ–ä¸ºä¼˜åŒ–ã€‚</p>
</blockquote>
<p>P18</p>
<h2 id="lagrange-multiplier"><a class="header" href="#lagrange-multiplier">Lagrange Multiplier</a></h2>
<p><img src="./assets/12-09-1.png" alt="" /></p>
<blockquote>
<p>âœ… è¿™æ˜¯ä¸€ä¸ªä¼˜åŒ–é—®é¢˜ï¼Œé€šè¿‡æ¢¯åº¦ä¸‹é™æ‰¾åˆ°æå€¼ç‚¹ã€‚</p>
</blockquote>
<p>P20</p>
<h2 id="solving-trajectory-optimization-problem"><a class="header" href="#solving-trajectory-optimization-problem">Solving Trajectory Optimization Problem</a></h2>
<h3 id="å®šä¹‰å¸¦çº¦æŸçš„ä¼˜åŒ–é—®é¢˜"><a class="header" href="#å®šä¹‰å¸¦çº¦æŸçš„ä¼˜åŒ–é—®é¢˜">å®šä¹‰å¸¦çº¦æŸçš„ä¼˜åŒ–é—®é¢˜</a></h3>
<p>Find a control sequence {\(a_t\)} that generates a state sequence {\(s_t\)} start from \(s_o\) minimizes</p>
<p>$$
\min h (s_r)+\sum _{t=0}^{T-1} h(s_t,a_t)
$$</p>
<blockquote>
<p>âœ… å› ä¸ºæŠŠæ—¶é—´ç¦»æ•£åŒ–ï¼Œæ­¤å¤„ç”¨æ±‚å’Œä¸ç”¨ç§¯åˆ†ã€‚</p>
</blockquote>
<p>subject to</p>
<p>$$
\begin{matrix}
f(s_t,a_t)-s_{t+1}=0\\
\text{ for } 0 \le t &lt; T
\end{matrix}
$$</p>
<blockquote>
<p>âœ… è¿åŠ¨å­¦æ–¹ç¨‹ï¼Œä½œä¸ºçº¦æŸ</p>
</blockquote>
<h3 id="è½¬åŒ–ä¸ºä¼˜åŒ–é—®é¢˜"><a class="header" href="#è½¬åŒ–ä¸ºä¼˜åŒ–é—®é¢˜">è½¬åŒ–ä¸ºä¼˜åŒ–é—®é¢˜</a></h3>
<p>The Lagrange function</p>
<p>$$
L(s,a,\lambda ) = h(s _ T)+ \sum _ {t=0} ^ {T-1} h(s _t,a _t) + \lambda _ {t+1}^T(f(s _t,a _t) - s _ {t+1})
$$</p>
<p>P27</p>
<h3 id="æ±‚è§£æ‹‰æ ¼æœ—æ—¥æ–¹ç¨‹"><a class="header" href="#æ±‚è§£æ‹‰æ ¼æœ—æ—¥æ–¹ç¨‹">æ±‚è§£æ‹‰æ ¼æœ—æ—¥æ–¹ç¨‹</a></h3>
<p><img src="./assets/12-10-1.png" alt="" /></p>
<blockquote>
<p>âœ… æ‹‰æ ¼æœ—æ—¥æ–¹ç¨‹ï¼Œå¯¹æ¯ä¸ªå˜é‡æ±‚å¯¼ï¼Œå¹¶ä»¤å¯¼æ•°ä¸ºé›¶ã€‚å› æ­¤å¾—åˆ°å³è¾¹æ–¹ç¨‹ç»„ã€‚<br />
âœ… å³è¾¹æ–¹ç¨‹ç»„è¿›ä¸€æ­¥æ•´ç†ï¼Œå¾—åˆ°å·¦è¾¹ã€‚<br />
âœ… \(\lambda \) ç±»ä¼¼äºé€†å‘ä»¿çœŸã€‚<br />
âœ… å…¬å¼ 3ï¼šé€šè¿‡è½¬ä¸ºä¼˜åŒ–é—®é¢˜æ±‚ \(a\)ï¼</p>
</blockquote>
<p>P30</p>
<h3 id="pontryagins-maximum-principle-for-discrete-systems"><a class="header" href="#pontryagins-maximum-principle-for-discrete-systems">Pontryaginâ€™s Maximum Principle for discrete systems</a></h3>
<p><img src="./assets/12-11.png" alt="" /></p>
<p><img src="./assets/12-12.png" alt="" /></p>
<blockquote>
<p>âœ… æ–¹ç¨‹ç»„æ•´ç†å¾—åˆ°å·¦è¾¹ï¼Œç§°ä¸º PMP æ¡ä»¶ã€‚æ˜¯å¼€ç¯æ§åˆ¶æœ€ä¼˜çš„å¿…è¦æ¡ä»¶ã€‚</p>
</blockquote>
<p>P32</p>
<h2 id="optimal-control"><a class="header" href="#optimal-control">Optimal Control</a></h2>
<p><strong>Open-loop Control</strong>:<br />
given a start state \(s_0\), compute sequence of actions {\(a_t\)} to reach the goal</p>
<p><img src="./assets/12-13.png" alt="" /></p>
<blockquote>
<p><strong>Shooting method</strong> directly applies PMP. However, it does not scale well to complicated problems such as motion controlâ€¦<br />
\(<br>\)<br />
Need to be combined with collocation method, multiple shooting, etc. for those problems.<br />
\(<br>\)<br />
Or use derivative-free approaches.</p>
</blockquote>
<p><img src="./assets/12-14.png" alt="" /></p>
<blockquote>
<p>âœ… å¯¹äºå¤æ‚å‡½æ•°ï¼Œè¡¨ç°æ¯”è¾ƒå·®ï¼Œè¿˜éœ€è¦å€ŸåŠ©å…¶å®ƒæ–¹æ³•ã€‚</p>
</blockquote>
<h1 id="é—­ç¯æ§åˆ¶"><a class="header" href="#é—­ç¯æ§åˆ¶">é—­ç¯æ§åˆ¶</a></h1>
<p><img src="./assets/12-05.png" alt="" /></p>
<p>P34</p>
<h2 id="dynamic-programming"><a class="header" href="#dynamic-programming">Dynamic Programming</a></h2>
<p><img src="./assets/12-15.png" alt="" /> </p>
<p>å¸Œæœ›æ‰¾åˆ°ä¸€æ¡æœ€çŸ­è·¯å¾„åˆ°è¾¾å¦ä¸€ä¸ªç‚¹ï¼Œå¯¹è¿™ä¸ªé—®é¢˜ç”¨ä¸åŒçš„æ–¹å¼å»ºæ¨¡ï¼Œä¼šå¾—åˆ°ä¸åŒçš„æ–¹æ³•ï¼š</p>
<table><thead><tr><th></th><th></th><th></th></tr></thead><tbody>
<tr><td>åŠ¨æ€è§„åˆ’é—®é¢˜</td><td>Find a path {\(s_t\)} that minimizes</td><td>\(J(s_0)=\sum _ {t=0}^{ } h(s_t,s_{t+1})\)</td></tr>
<tr><td>è½¨è¿¹é—®é¢˜</td><td>Find a sequence of action {\(a_t\)} that minimizes</td><td>\(J(s_0)=\sum _ {t=0}^{ } h(s_t,a_t)\)<br> subject to <br> \( s_{t+1}=f(s_t,a_t)\)</td></tr>
<tr><td>æ§åˆ¶ç­–ç•¥é—®é¢˜</td><td>Find a policy \( a_t=\pi (s_t,t)\)æˆ– \( a_t=\pi (s_t)\)that minimizes</td><td>\(J(s_0)=\sum _ {t=0}^{ } h(s_t,a_t)\)<br>subject to  <br>\(s_{t+1}=f(s_t,a_t)\)</td></tr>
</tbody></table>
<p>P39</p>
<h2 id="bellmans-principle-of-optimality"><a class="header" href="#bellmans-principle-of-optimality">Bellmanâ€™s Principle of Optimality</a></h2>
<blockquote>
<p>âœ… é’ˆå¯¹æ§åˆ¶ç­–ç•¥é—®é¢˜ï¼Œä»€ä¹ˆæ ·çš„ç­–ç•¥æ˜¯æœ€ä¼˜ç­–ç•¥ï¼Ÿ</p>
</blockquote>
<p><img src="./assets/12-16.png" alt="" /> </p>
<p>An optimal policy has the property that whatever the initial 
state and initial decision are, the remaining decisions must 
constitute an optimal policy with regard to the state resulting 
from the first decision.</p>
<p>\(^\ast \) The problem is said to have <strong>optimal substructure</strong></p>
<p>P40</p>
<h2 id="value-function"><a class="header" href="#value-function">Value Function</a></h2>
<p>Value of a state \(V(s)\) :</p>
<ul>
<li>the minimal total cost for finishing the task starting from \(s\)</li>
<li>the total cost for finishing the task starting from \(s\) using the optimal policy</li>
</ul>
<blockquote>
<p>âœ… Value Funcronï¼Œè®¡ç®—ä»æŸä¸ªç»“ç‚¹åˆ° gool çš„æœ€å°ä»£ä»·ã€‚<br />
âœ… åé¢åŠ¨æ€è§„åˆ’åŸç†è·³è¿‡ã€‚</p>
</blockquote>
<p>P49</p>
<h2 id="the-bellman-equation"><a class="header" href="#the-bellman-equation">The Bellman Equation</a></h2>
<p>Mathematically, an optimal <strong>value function</strong> \(V(s)\) can be defined recursively as:</p>
<p>$$
V(s)=\min_{a} (h(s,a)+V(f(s,a)))
$$</p>
<blockquote>
<p>âœ… hä»£è¡¨sçŠ¶æ€ä¸‹æ‰§è¡Œä¸€æ­¥açš„ä»£ä»·ã€‚fä»£è¡¨ä»¥sçŠ¶æ€ä¸‹æ‰§è¡Œä¸€æ­¥aä¹‹åçš„çŠ¶æ€ã€‚</p>
</blockquote>
<p>If we know this value function, the optimal <strong>policy</strong> can be computed as</p>
<p>$$
\pi (s)=\arg \min_{a} (h(s,a)+V(f(s,a)))
$$</p>
<blockquote>
<p>âœ… piä»£è¡¨ä¸€ç§ç­–ç•¥ï¼Œæ ¹æ®å½“å‰çŠ¶æ€sæ‰¾åˆ°æœ€ä¼˜çš„ä¸‹ä¸€æ­¥aã€‚<br />
âœ… This arg max can be easily computed for discrete control problems.<br />
But there are not always closed-forms solution for continuous control problems.</p>
</blockquote>
<p>or</p>
<p>$$
\begin{matrix}
\pi (s)=\arg \min_{a} Q(s,a)\\
\text{where} \quad \quad  Q(s,a)=h(s,a)+V(f(s,a))
\end{matrix}
$$</p>
<p>Q-functionç§°ä¸ºState-action value function<br />
Learning \(V(s)\) and/or \(Q(s,a)\) is the core of optimal control / reinforcement learning methods</p>
<blockquote>
<p>âœ… å¼ºåŒ–å­¦ä¹ æœ€ä¸»è¦çš„ç›®çš„æ˜¯å­¦ä¹  \(V\) å‡½æ•°å’Œ \(Q\) å‡½æ•°ï¼Œå¦‚æœ \(a\) æ˜¯æœ‰é™çŠ¶æ€ï¼Œéå†å³å¯ã€‚ä½†åœ¨è§’è‰²åŠ¨ç”»é‡Œï¼Œ\(a\) æ˜¯è¿ç»­çŠ¶æ€ã€‚</p>
</blockquote>
<p>P52</p>
<h1 id="linear-quadratic-regulator-lqr"><a class="header" href="#linear-quadratic-regulator-lqr">Linear Quadratic Regulator (LQR)</a></h1>
<p><img src="./assets/12-17.png" alt="" /> </p>
<ul>
<li>LQR is a special class of optimal control problems with
<ul>
<li><strong>Linear</strong> dynamic function</li>
<li><strong>Quadratic</strong> objective function</li>
</ul>
</li>
</ul>
<blockquote>
<p>âœ… LQR æ˜¯æ§åˆ¶é¢†åŸŸä¸€ç±»ç»å…¸é—®é¢˜ï¼Œå®ƒå¯¹åŸæ§åˆ¶é—®é¢˜åšäº†ä¸€äº›ç‰¹å®šçš„çº¦æŸã€‚å› ä¸ºç®€åŒ–äº†é—®é¢˜ï¼Œå¯ä»¥å¾—åˆ°æœ‰ç‰¹å®šå…¬å¼çš„ \(Q\) å’Œ \(V\).</p>
</blockquote>
<p>P53</p>
<h2 id="a-very-simple-example"><a class="header" href="#a-very-simple-example">A very simple example</a></h2>
<h3 id="é—®é¢˜æè¿°-9"><a class="header" href="#é—®é¢˜æè¿°-9">é—®é¢˜æè¿°</a></h3>
<p><img src="./assets/12-18.png" alt="" /> </p>
<p>Compute a target trajectory \(\tilde{x}(t)\) such that the simulated trajectory \(x(t)\) is a sine curve.</p>
<p><img src="./assets/12-19.png" alt="" /> </p>
<p>$$
\min _{(x_n,v_n,\tilde{x} _n)} \sum _{n=0}^{N} (\sin (t_n)-x_n)^2+\sum _{n=0}^{N}\tilde{x}^2_n 
$$</p>
<p>$$
\begin{align*}
s.t. \quad \quad v _ {n+1} &amp; = v _ n + h(k _p ( \tilde{x} _ n - x _ n) - k _ dv _ n ) \\
v _ {x+1} &amp; = x _ n + hv _ {n+1}
\end{align*}
$$</p>
<p>P54<br />
objective function</p>
<p>$$
\min s^T_TQ_Ts_T+\sum_{t=0}^{T} s^T_tQ_ts_t+a^T_tR_ta_t
$$</p>
<p>subject to dynamic function</p>
<p>$$
s_{t+1}=A_ts_t+B_ta_t   \quad \quad \text{for }   0\le t &lt;T 
$$</p>
<blockquote>
<p>âœ… ç›®æ ‡å‡½æ•°æ˜¯äºŒæ¬¡å‡½æ•°ï¼Œè¿åŠ¨å­¦æ–¹ç¨‹æ˜¯çº¿æ€§å‡½æ•°ã€‚è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„ LQR é—®é¢˜ã€‚</p>
</blockquote>
<p>P58</p>
<h3 id="æ¨å¯¼ä¸€æ­¥"><a class="header" href="#æ¨å¯¼ä¸€æ­¥">æ¨å¯¼ä¸€æ­¥</a></h3>
<blockquote>
<p>âœ… ç”±äºå­˜åœ¨optimal substructureï¼Œæ¯æ¬¡åªéœ€è¦è€ƒè™‘ä¸‹ä¸€ä¸ªçŠ¶æ€çš„æœ€ä¼˜è§£ã€‚<br />
âœ… æ¯ä¸€ä¸ªçŠ¶æ€åŸºäºä¸‹ä¸€ä¸ªçŠ¶æ€æ¥è®¡ç®—ï¼Œä¸æ–­å¾€ä¸‹è¿­ä»£ï¼Œç›´åˆ°æœ€åä¸€ä¸ªçŠ¶æ€ã€‚<br />
âœ… æœ€åä¸€ä¸ªçŠ¶æ€çš„Vçš„è®¡ç®—ä¸aæ— å…³ã€‚<br />
âœ… è®¡ç®—å®Œæœ€åä¸€ä¸ªï¼Œå†è®¡ç®—å€’æ•°ç¬¬äºŒä¸ªï¼Œä¾æ¬¡å¾€å‰æ¨ã€‚</p>
</blockquote>
<p><img src="./assets/12-20-1.png" alt="" /> </p>
<p>P60<br />
å…¬å¼æ•´ç†å¾—ï¼š</p>
<p><img src="./assets/12-20.png" alt="" /> </p>
<p>P61 
<img src="./assets/12-21.png" alt="" /> </p>
<blockquote>
<p>âœ… ç»“è®ºï¼šæœ€ä¼˜ç­–ç•¥ä¸å½“å‰çŠ¶æ€çš„å…³ç³»æ˜¯çŸ©é˜µKçš„å…³ç³»ã€‚</p>
</blockquote>
<p>P62<br />
å½“aå–æœ€å°å€¼æ—¶ï¼Œæ±‚å‡ºVï¼š</p>
<p><img src="./assets/12-22.png" alt="" /></p>
<blockquote>
<p>âœ… \(V(S_{T-1})\)å’Œ\(V(S_{T})\)çš„å½¢å¼åŸºæœ¬ä¸€è‡´ï¼Œåªæ˜¯Pçš„è¡¨ç¤ºä¸åŒã€‚ </p>
</blockquote>
<p>P63</p>
<h3 id="æ¨å¯¼æ¯ä¸€æ­¥"><a class="header" href="#æ¨å¯¼æ¯ä¸€æ­¥">æ¨å¯¼æ¯ä¸€æ­¥</a></h3>
<p><img src="./assets/12-23.png" alt="" /> </p>
<p>P64</p>
<h3 id="solution"><a class="header" href="#solution">Solution</a></h3>
<ul>
<li>LQR is a special class of optimal control problems with
<ul>
<li>Linear dynamic function</li>
<li>Quadratic objective function</li>
</ul>
</li>
<li>Solution of LQR is a linear feedback policy</li>
</ul>
<p><img src="./assets/12-24.png" alt="" /> </p>
<p>P65</p>
<h2 id="æ›´å¤æ‚çš„æƒ…å†µ"><a class="header" href="#æ›´å¤æ‚çš„æƒ…å†µ">æ›´å¤æ‚çš„æƒ…å†µ</a></h2>
<ul>
<li>How to deal with
<ul>
<li>Nonlinear dynamic function?</li>
<li>Non-quadratic objective function?</li>
</ul>
</li>
</ul>
<blockquote>
<p>âœ… äººä½“è¿åŠ¨æ¶‰åŠåˆ°è§’åº¦æ—‹è½¬ï¼Œå› æ­¤æ˜¯éçº¿æ€§çš„ã€‚</p>
</blockquote>
<p>P68</p>
<h3 id="nonlinear-problems"><a class="header" href="#nonlinear-problems">Nonlinear problems</a></h3>
<p><img src="./assets/12-25.png" alt="" /> </p>
<blockquote>
<p>âœ… æ–¹æ³•ï¼šæŠŠé—®é¢˜è¿‘ä¼¼ä¸ºçº¿æ€§é—®é¢˜ã€‚</p>
</blockquote>
<p>Approximate cost function as a quadratic function:</p>
<blockquote>
<p>âœ… ç›®æ ‡å‡½æ•°ï¼šæ³°å‹’å±•å¼€ï¼Œä¿ç•™äºŒæ¬¡ã€‚</p>
</blockquote>
<p>$$
h(s_t,a_t)\approx h(\bar{s}_t ,\bar{a}_t)+\nabla h(\bar{s}_t ,\bar{a}_t)\begin{bmatrix}
s_t-\bar{s} _t\\
a_t-\bar{a} _t
\end{bmatrix} + \frac{1}{2} \begin{bmatrix}
s_t-\bar{s} _t\\
a_t-\bar{a} _t
\end{bmatrix}^T\nabla^2h(\bar{s}_t ,\bar{a}_t)\begin{bmatrix}
s_t-\bar{s} _t\\
a_t-\bar{a} _t
\end{bmatrix}
$$</p>
<p>Approximate dynamic function as a linear function:</p>
<blockquote>
<p>âœ… è½¬ç§»å‡½æ•°ï¼šæ³°å‹’å±•å¼€ï¼Œä¿ç•™ä¸€æ¬¡æˆ–äºŒæ¬¡ã€‚</p>
</blockquote>
<p>$$
f(s_t,a_t)\approx f(\bar{s}_t ,\bar{a}_t)+\nabla f(\bar{s}_t ,\bar{a}_t)\begin{bmatrix}
s_t-\bar{s} _t\\
a_t-\bar{a} _t
\end{bmatrix}
$$</p>
<p>å±•å¼€ä¸ºä¸€æ¬¡é¡¹ï¼Œå¯¹åº”è§£å†³ç®—æ³•ï¼šiLQRï¼ˆiterative LQRï¼‰ </p>
<p>Or a quadratic function:</p>
<p>$$
f(s_t,a_t)\approx \ast \ast \ast \frac{1}{2} \begin{bmatrix}
s_t-\bar{s} _t\\
a_t-\bar{a} _t
\end{bmatrix}^T\nabla^2f(\bar{s}_t ,\bar{a}_t)\begin{bmatrix}
s_t-\bar{s} _t\\
a_t-\bar{a} _t
\end{bmatrix}
$$</p>
<p>å±•å¼€ä¸ºäºŒæ¬¡é¡¹ï¼Œå¯¹åº”è§£å†³ç®—æ³•ï¼šDDPï¼ˆDifferential Dynamic Programmingï¼‰</p>
<p>P69</p>
<h3 id="ç›¸å…³åº”ç”¨"><a class="header" href="#ç›¸å…³åº”ç”¨">ç›¸å…³åº”ç”¨</a></h3>
<blockquote>
<p>ğŸ” [Muico et al 2011 - Composite Control of Physically Simulated Characters]</p>
</blockquote>
<blockquote>
<p>âœ… é€‰æ‹©åˆé€‚çš„ \(Q\) å’Œ \(R\)ï¼Œéœ€è¦ä¸€äº›å·¥ç¨‹ä¸Šçš„æŠ€å·§ã€‚<br />
âœ… ä¸ºäº†æ±‚è§£æ–¹ç¨‹ï¼Œéœ€è¦æ˜¾å¼åœ°å»ºæ¨¡è¿åŠ¨å­¦æ–¹ç¨‹ã€‚</p>
</blockquote>
<p>P70</p>
<h2 id="model-based-method-vs-model-free-method"><a class="header" href="#model-based-method-vs-model-free-method">Model-based Method vs. Model-free Method</a></h2>
<blockquote>
<p>âœ… Model Based æ–¹æ³•ï¼Œè¦æ±‚ dynamic function æ˜¯å·²çŸ¥çš„ï¼Œä½†æ˜¯å®é™…ä¸Šè¿™ä¸ªå‡½æ•°å¯èƒ½æ˜¯ï¼ˆ1ï¼‰æœªçŸ¥çš„ï¼ˆ2ï¼‰ä¸ç²¾ç¡®çš„ã€‚<br />
âœ… å› æ­¤Model Based æ–¹æ³•å¯¹äºå¤æ‚é—®é¢˜éš¾ä»¥åº”ç”¨ï¼Œä½†å¯¹äºç®€å•é—®é¢˜éå¸¸é«˜æ•ˆã€‚</p>
</blockquote>
<p>What if the dynamic function \(f(s,a)\) is not know?</p>
<blockquote>
<p>âœ… \(f\) æœªçŸ¥åªæ˜¯æŠŠ \(f\) å½“æˆä¸€ä¸ªé»‘ç›’å­ï¼Œä»éœ€è¦æ ¹æ® \(S_t\) å¾—åˆ° \(S_{tï¼‹1}\) .</p>
</blockquote>
<p>What if the dynamic function \(f(s,a)\) is not accurate?</p>
<blockquote>
<p>âœ… ä¸å‡†ç¡®æ¥æºäºï¼ˆ1ï¼‰æµ‹è¯•é‡è¯¯å·®ï¼ˆ2ï¼‰é—®é¢˜ç®€åŒ–</p>
</blockquote>
<p>What if the system has noise?</p>
<p>What if the system is highly nonlinear?</p>
<p>P72</p>
<h1 id="sampling-based-policy-optimization"><a class="header" href="#sampling-based-policy-optimization">Sampling-based Policy Optimization</a></h1>
<ul>
<li>
<p>Iterative methods</p>
<ul>
<li>Goal: find the optimal <strong>policy</strong> \(\pi (s;\theta )\) that minimize the objective \(J(\theta )=\sum_{t=0}^{}h(s_t,a_t) \)</li>
<li>Initialize policy parmeters \(\pi (x;\theta )\)</li>
<li>Repeat:
<ul>
<li>Propose a set of candidate parameters {\(\theta _i \)} according to \(\theta \)</li>
<li>Simulate the agent under the control of each \( \pi ( \theta _i)\) </li>
<li>Evaluate the objective function \( J (\theta_i )\)  on the simulated state-action sequences</li>
<li>Update the estimation of \(\theta \) based on {\( J (\theta_i )\)}</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Example: CMA-ES</p>
</li>
</ul>
<blockquote>
<p>âœ… åŸºäºé‡‡æ ·çš„æ–¹æ³•ã€‚</p>
</blockquote>
<p>P73</p>
<h2 id="example-locomotion-controller-with-linear-policy"><a class="header" href="#example-locomotion-controller-with-linear-policy">Example: Locomotion Controller with Linear Policy</a></h2>
<blockquote>
<p>ğŸ” [Liu et al. 2012 â€“ Terrain Runner]</p>
</blockquote>
<p>P74</p>
<h3 id="stage-1a-open-loop-policy"><a class="header" href="#stage-1a-open-loop-policy">Stage 1a: Open-loop Policy</a></h3>
<p>Find open-loop control using SAMCON</p>
<p><img src="./assets/12-26.png" alt="" /> </p>
<blockquote>
<p>âœ… ä½¿ç”¨å¼€ç¯è½¨è¿¹ä¼˜åŒ–å¾—åˆ°å¼€ç¯æ§åˆ¶è½¨è¿¹ã€‚</p>
</blockquote>
<p>P76</p>
<h3 id="stage-1b-linear-feedback-policy"><a class="header" href="#stage-1b-linear-feedback-policy">Stage 1b: Linear Feedback Policy</a></h3>
<p><img src="./assets/12-27.png" alt="" /></p>
<blockquote>
<p>âœ… ä½¿ç”¨åé¦ˆæ§åˆ¶æ›´æ–°æ§åˆ¶ä¿¡å·ã€‚ç”±äºå‡è®¾äº†çº¿æ€§å…³ç³»ï¼Œæ ¹æ®åç¦» offset å¯ç›´æ¥å¾—åˆ°è°ƒæ•´ offset.</p>
</blockquote>
<p>P78</p>
<h3 id="stage-1b-reduced-order-closed-loop-policy"><a class="header" href="#stage-1b-reduced-order-closed-loop-policy">Stage 1b: Reduced-order Closed-loop Policy</a></h3>
<p><img src="./assets/12-28.png" alt="" /></p>
<blockquote>
<p>âœ… æŠŠ \(M\) åˆ†è§£ä¸ºä¸¤ä¸ªçŸ©é˜µï¼Œ\(M_{AXB} = M_{AXC}\cdot M_{CXB}\) å¦‚æœ \(C\) æ¯”è¾ƒå°ï¼Œå¯ä»¥æ˜æ˜¾å‡å°‘çŸ©é˜µçš„å‚æ•°é‡ã€‚<br />
âœ… å¥½å¤„ï¼š(1) å‡å°‘å‚æ•°ï¼Œå‡åŒ–ä¼˜åŒ–è¿‡ç¨‹ã€‚(2) æŠ¹æ‰çŠ¶æ€é‡Œä¸éœ€è¦çš„ä¿¡æ¯ã€‚</p>
</blockquote>
<p>P79</p>
<h4 id="manually-selected-states-s"><a class="header" href="#manually-selected-states-s">Manually-selected States: s</a></h4>
<ul>
<li>Running: 12 dimensions</li>
</ul>
<p><img src="./assets/12-29.png" alt="" /> </p>
<blockquote>
<p>âœ… ï¼ˆ1ï¼‰æ ¹ç»“ç‚¹æ—‹è½¬ï¼ˆ2ï¼‰è´¨å¿ƒä½ç½®ï¼ˆ3ï¼‰è´¨å¿ƒé€Ÿåº¦ï¼ˆ4ï¼‰æ”¯æ’‘è„šä½ç½®</p>
</blockquote>
<p>P80</p>
<h4 id="manually-selected-controls-a"><a class="header" href="#manually-selected-controls-a">Manually-selected Controls: a</a></h4>
<ul>
<li>for all skills: 9 dimensions</li>
</ul>
<p><img src="./assets/12-30.png" alt="" /></p>
<blockquote>
<p>âœ… ä»…å¯¹å°‘æ•°å…³èŠ‚åŠ åé¦ˆã€‚</p>
</blockquote>
<p>P81</p>
<h3 id="optimization"><a class="header" href="#optimization">Optimization</a></h3>
<p>$$
\delta a=M\delta s+\hat{a} 
$$</p>
<ul>
<li>Optimize \(M\)
<ul>
<li>CMA, Covariance Matrix Adaption ([Hansen 2006])</li>
<li>For the running task:
<ul>
<li>#optimization variables: \(12 ^\ast 9 = 108 / (12^\ast 3+3 ^\ast 9) = 63\)</li>
</ul>
</li>
<li>12 minutes on 24 cores</li>
</ul>
</li>
</ul>
<p>P85</p>
<h1 id="optimal-control-leftrightarrow--reinforcement-learning"><a class="header" href="#optimal-control-leftrightarrow--reinforcement-learning">Optimal Control \(\Leftrightarrow \) Reinforcement Learning</a></h1>
<p>â€¢ RL shares roughly the same overall goal with Optimal Control</p>
<p>$$
\max \sum_{t=0}^{} r (s_t,a_t)
$$</p>
<blockquote>
<p>âœ… ç›¸åŒç‚¹ï¼šç›®æ ‡å‡½æ•°ç›¸åŒï¼Œæ˜¯æ¯ä¸€æ—¶åˆ»çš„ä»£ä»·å‡½æ•°ä¹‹å’Œã€‚ </p>
</blockquote>
<p>â€¢ But RL typically does not assume perfect knowledge of system</p>
<p><img src="./assets/12-30-1.png" alt="" /> </p>
<blockquote>
<p>âœ… æœ€ä¼˜æ§åˆ¶è¦æ±‚æœ‰ç²¾ç¡®çš„è¿åŠ¨æ–¹ç¨‹ï¼Œè€Œ RL ä¸éœ€è¦ã€‚</p>
</blockquote>
<ul>
<li>RL can still take advantage of a system model â†’ model-based RL
<ul>
<li>The model can be learned from data<br />
$$
s_{t+1}=f(s_t,a_t;\theta )
$$</li>
</ul>
</li>
</ul>
<blockquote>
<p>âœ… RL é€šè¿‡ä¸æ–­ä¸ä¸–ç•Œäº¤äº’è¿›è¡Œé‡‡æ ·ã€‚</p>
</blockquote>
<p>P87</p>
<h2 id="markov-decision-process-mdp"><a class="header" href="#markov-decision-process-mdp">Markov Decision Process (MDP)</a></h2>
<p><img src="./assets/12-32.png" alt="" /></p>
<p><img src="./assets/12-31.png" alt="" /></p>
<table><thead><tr><th></th><th></th></tr></thead><tbody>
<tr><td>State</td><td>\(\quad s_t \quad \quad \)</td></tr>
<tr><td>Action</td><td>\(\quad a_t\)</td></tr>
<tr><td>Policy</td><td>\(\quad \quad a_t\sim \pi (\cdot \mid s_t)\)</td></tr>
<tr><td>Transition probability</td><td>\(\quad \quad s_{t+1}\sim p  (\cdot \mid s_t,a_t)\)</td></tr>
<tr><td>Reward</td><td>\(\quad \quad r_t=r (s_t,a_t)\)</td></tr>
<tr><td>Return</td><td>\(R = \sum _{t}^{} \gamma ^t r (s_t,a_t)\)</td></tr>
</tbody></table>
<blockquote>
<p>âœ… çœŸå®åœºæ™¯ä¸­è½¨è¿¹æ— é™é•¿ï¼Œä¼šå¯¼åˆ° \(R\) æ— é™å¤§ã€‚<br />
âœ… å› æ­¤ä¼šä½¿ç”¨å°äº 1 çš„ \(r,t\) è¶Šå¤§åˆ™å¯¹ç»“æœçš„å½±å“è¶Šå°ã€‚</p>
</blockquote>
<p>P88</p>
<h2 id="è·Ÿè¸ªé—®é¢˜å˜æˆmdpé—®é¢˜"><a class="header" href="#è·Ÿè¸ªé—®é¢˜å˜æˆmdpé—®é¢˜">è·Ÿè¸ªé—®é¢˜å˜æˆMDPé—®é¢˜</a></h2>
<p>Trajectory</p>
<p>$$
\begin{matrix}
\tau =&amp; s_0 &amp; a_0 &amp; s_1 &amp; a_1 &amp; s_2&amp;\dots 
\end{matrix}
$$</p>
<p>Reward</p>
<p><img src="./assets/12-33.png" alt="" /></p>
<p>P90</p>
<h2 id="mdpé—®é¢˜çš„æ•°å­¦æè¿°"><a class="header" href="#mdpé—®é¢˜çš„æ•°å­¦æè¿°">MDPé—®é¢˜çš„æ•°å­¦æè¿°</a></h2>
<blockquote>
<p>âœ… Markov æ€§è´¨ï¼šå½“å½“å‰çŠ¶æ€å·²çŸ¥çš„æƒ…å†µä¸‹ï¼Œä¸‹ä¸€æ—¶åˆ»çŠ¶æ€åªä¸å½“å‰çŠ¶æ€ç›¸å…³ï¼Œè€Œä¸ä¸ä¹‹å‰ä»»ä¸€æ—¶åˆ»çŠ¶æ€ç›¸å…³ã€‚</p>
</blockquote>
<p>MDP is a <strong>discrete-time</strong> stochastic control process.<br />
It provides a mathematical framework for modeling decision making in situations<br />
where outcomes are <strong>partly random and partly under the control of a decision maker</strong>.</p>
<p>A MDP problem:</p>
<p>\(\mathcal{M}\) = {\(S,A,p,r\)}<br />
\(S\): state space<br />
\(A\): action space<br />
pï¼šçŠ¶æ€è½¬ç§»æ¦‚ç‡ï¼Œå³è¿åŠ¨å­¦æ–¹ç¨‹ã€‚<br />
rï¼šä»£ä»·å‡½æ•°ã€‚</p>
<p>P91</p>
<p>Solve for a policy \(\pi (a\mid s)\) that optimize the <strong>expected return</strong></p>
<p>$$
J=E[R]=E_{\tau \sim \pi }[\sum_{t}^{} \gamma ^tr(s_t,a_t)]
$$</p>
<blockquote>
<p>âœ… æ±‚è§£ä¸€ä¸ªpolicy \(\pi \) ä½¿æœŸæœ›æœ€ä¼˜ï¼Œè€Œä¸æ˜¯ç›´æ¥æ‰¾æœ€ä¼˜è§£ã€‚</p>
</blockquote>
<p>Overall all trajectories \(\tau \) = { \(s_0, a_0 , s_1 , a_1 ,  \dots  \)} induced by \(\pi \)</p>
<blockquote>
<p>âœ… å‡è®¾ \(\pi \) å‡½æ•°å’Œ \(p\) å‡½æ•°éƒ½æ˜¯æœ‰å™ªéŸ³çš„ï¼Œå³å¾—åˆ°çš„ç»“æœä¸æ˜¯ç¡®å®šå€¼ï¼Œè€Œæ˜¯ä»¥ä¸€å®šæ¦‚ç‡å¾—åˆ°æŸä¸ªç»“æœã€‚<strong>è¿™æ˜¯ä¸æœ€ä¼˜æ§åˆ¶é—®é¢˜çš„åŒºåˆ«ã€‚</strong></p>
</blockquote>
<p>P93</p>
<h2 id="bellman-equations"><a class="header" href="#bellman-equations">Bellman Equations</a></h2>
<p>In optimal control:</p>
<p><img src="./assets/12-34.png" alt="" /></p>
<p>In RL control:</p>
<p><img src="./assets/12-35.png" alt="" /></p>
<blockquote>
<p>âœ… æ­¤å¤„çš„\(\pi \)æ˜¯æŸä¸€ä¸ªç­–ç•¥ï¼Œè€Œä¸æ˜¯æœ€ä¼˜ç­–ç•¥ã€‚</p>
</blockquote>
<p>P94</p>
<h2 id="how-to-solve-mdp"><a class="header" href="#how-to-solve-mdp">How to Solve MDP</a></h2>
<h3 id="value-based-methods"><a class="header" href="#value-based-methods">Value-based Methods</a></h3>
<ul>
<li>Learning the value function/Q-function using the Bellman equations</li>
<li>Evaluation the policy as</li>
</ul>
<p>$$
\pi (s) = \arg \min_{a} Q(s,a)
$$</p>
<ul>
<li>Typically used for <strong>discrete</strong> problems</li>
<li>Example: Value iteration, Q-l a ning, DQN, â€¦</li>
</ul>
<p>P95</p>
<blockquote>
<p>ğŸ” DQN [Mnih et al. 2015, Human-level control through deep reinforcement learning]</p>
</blockquote>
<p>P96</p>
<h3 id="ç›¸å…³å·¥ä½œ-4"><a class="header" href="#ç›¸å…³å·¥ä½œ-4">ç›¸å…³å·¥ä½œ</a></h3>
<blockquote>
<p>ğŸ” [Liu et al. 2017: Learning to Schedule Control Fragments ]</p>
</blockquote>
<p><img src="./assets/12-36.png" alt="" /></p>
<blockquote>
<p>âœ… DQN æ–¹æ³•è¦æ±‚æ§åˆ¶ç©ºé—´å¿…é¡»æ˜¯ç¦»æ•£çš„ï¼Œä½†çŠ¶æ€ç©ºé—´å¯ä»¥æ˜¯è¿ç»­çš„ã€‚<br />
âœ… å› æ­¤å¯ç”¨äºé«˜é˜¶çš„æ§åˆ¶ã€‚</p>
</blockquote>
<p>P97</p>
<h3 id="policy-gradient-approach"><a class="header" href="#policy-gradient-approach">Policy Gradient approach</a></h3>
<ul>
<li>
<p>Learning the value function/Q-function using the Bellman equations</p>
</li>
<li>
<p>Compute approximate <strong>policy gradient</strong> according to value functions using Monte-Carlo method</p>
</li>
<li>
<p>Update the policy using policy gradient</p>
</li>
<li>
<p>Suitable for <strong>continuous</strong> problems</p>
</li>
<li>
<p>Exa pl : REINFORCE, TRPO, PPO, â€¦</p>
</li>
</ul>
<blockquote>
<p>âœ… policy grodient æ˜¯ Value function å¯¹çŠ¶æ€å‚æ•°çš„æ±‚å¯¼ã€‚ä½†è¿™ä¸ªæ²¡æ³•ç®—ï¼Œæ‰€ä»¥ç”¨ç»Ÿè®¡çš„æ–¹æ³•å¾—åˆ°è¿‘ä¼¼ã€‚<br />
âœ… ç‰¹ç‚¹æ˜¯æ˜¾ç¤ºå®šä¹‰ Dolicy å‡½æ•°ã€‚å¯¹è¿ç»­é—®é¢˜æ›´æœ‰æ•ˆã€‚</p>
</blockquote>
<p>P98</p>
<h3 id="ç›¸å…³å·¥ä½œ-5"><a class="header" href="#ç›¸å…³å·¥ä½œ-5">ç›¸å…³å·¥ä½œ</a></h3>
<table><thead><tr><th></th><th></th><th></th></tr></thead><tbody>
<tr><td><img src="./assets/12-37.png" alt="" /></td><td><img src="./assets/12-38.png" alt="" /></td><td><img src="./assets/12-39.png" alt="" /></td></tr>
<tr><td>[Liu et al. 2016. ControlGraphs]</td><td>[Liu et al. 2018]</td><td>[Peng et al. 2018. DeepMimic]</td></tr>
</tbody></table>
<p>P100</p>
<h2 id="generative-control-policies"><a class="header" href="#generative-control-policies">Generative Control Policies</a></h2>
<blockquote>
<p>âœ… ä½¿ç”¨RL learningï¼ŒåŠ ä¸Šä¸€ç‚¹ç‚¹è½¨è¿¹ä¼˜åŒ–çš„æ§åˆ¶ï¼Œå°±å¯ä»¥å®ç°éå¸¸å¤æ‚çš„åŠ¨ä½œã€‚</p>
</blockquote>
<blockquote>
<p>ğŸ” [Yao et al. Control VAE]</p>
</blockquote>
<p>P101</p>
<h1 id="whats-next"><a class="header" href="#whats-next">Whatâ€™s Next?</a></h1>
<h2 id="digital-cerebellum"><a class="header" href="#digital-cerebellum">Digital Cerebellum</a></h2>
<p>Large Pretrained Model for Motion Control</p>
<p><img src="./assets/12-40.png" alt="" /></p>
<p>P102</p>
<h2 id="cross-modality-generation"><a class="header" href="#cross-modality-generation">Cross-modality Generation</a></h2>
<ul>
<li>\(\Leftrightarrow\) LLM \(\Leftrightarrow\) Text/Audio \(\Leftrightarrow\) Motion/Control \(\Leftrightarrow\) Image/Video \(\Leftrightarrow\)</li>
<li>Digital Actor?</li>
</ul>
<hr />
<blockquote>
<p>æœ¬æ–‡å‡ºè‡ªCaterpillarStudyGroupï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>
<p>https://caterpillarstudygroup.github.io/GAMES105_mdbook/</p>
</blockquote>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="theme/pagetoc.js"></script>
        <script type="text/javascript">
        window.addEventListener('load', function() {
            MathJax.Hub.Register.StartupHook('End', function() {
                window.setTimeout(window.print, 100);
            });
        });
        </script>
    </body>
</html>
